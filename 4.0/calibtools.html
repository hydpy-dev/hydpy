
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>calibtools &#8212; HydPy 4.0.1 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="iuhtools" href="iuhtools.html" />
    <link rel="prev" title="armatools" href="armatools.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="iuhtools.html" title="iuhtools"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="armatools.html" title="armatools"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HydPy 4.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="framework.html" >Framework Tools</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="auxiliaries.html" accesskey="U">Auxiliary Tools</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">calibtools</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="calibtools">
<span id="id1"></span><h1>calibtools<a class="headerlink" href="#calibtools" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-hydpy.auxs.calibtools"></span><p>This module implements features for calibrating model parameters.</p>
<p>Module <a class="reference internal" href="#module-hydpy.auxs.calibtools" title="hydpy.auxs.calibtools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">calibtools</span></code></a> implements the following members:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">RuleType1</span></code> Type variable.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">RuleType2</span></code> Type variable.</p></li>
<li><p><a class="reference internal" href="#hydpy.auxs.calibtools.TargetFunction" title="hydpy.auxs.calibtools.TargetFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TargetFunction</span></code></a> Protocol class for the target function required by class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a>.</p></li>
<li><p><a class="reference internal" href="#hydpy.auxs.calibtools.Adaptor" title="hydpy.auxs.calibtools.Adaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Adaptor</span></code></a> Protocol class for defining adoptors required by <a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a> objects.</p></li>
<li><p><a class="reference internal" href="#hydpy.auxs.calibtools.SumAdaptor" title="hydpy.auxs.calibtools.SumAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">SumAdaptor</span></code></a> Adaptor which calculates the sum of the values of multiple <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects and assigns it to the value(s) of the target <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> object.</p></li>
<li><p><a class="reference internal" href="#hydpy.auxs.calibtools.FactorAdaptor" title="hydpy.auxs.calibtools.FactorAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">FactorAdaptor</span></code></a> Adaptor which calculates the product of the value of the parent <a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a> object and the value(s) of a given reference <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> object and assigns it to the value(s) of the target <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> object.</p></li>
<li><p><a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> Base class for defining calibration rules.</p></li>
<li><p><a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a> <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> class which simply replaces the current model parameter value(s) with the current calibration parameter value.</p></li>
<li><p><a class="reference internal" href="#hydpy.auxs.calibtools.Add" title="hydpy.auxs.calibtools.Add"><code class="xref py py-class docutils literal notranslate"><span class="pre">Add</span></code></a> <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> class which adds its calibration delta to the original model parameter value(s).</p></li>
<li><p><a class="reference internal" href="#hydpy.auxs.calibtools.Multiply" title="hydpy.auxs.calibtools.Multiply"><code class="xref py py-class docutils literal notranslate"><span class="pre">Multiply</span></code></a> <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> class which multiplies the original model parameter value(s) by its calibration factor.</p></li>
<li><p><a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> Interface for the coupling of <em>HydPy</em> to optimisation libraries like <a class="reference external" href="https://nlopt.readthedocs.io/en/latest/">NLopt</a>.</p></li>
<li><p><a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH" title="hydpy.auxs.calibtools.ReplaceIUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplaceIUH</span></code></a> A <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> class specialised for <a class="reference internal" href="iuhtools.html#hydpy.auxs.iuhtools.IUH" title="hydpy.auxs.iuhtools.IUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">IUH</span></code></a> parameters.</p></li>
<li><p><a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpec</span></code></a> Helper class for specifying the properties of a single calibration parameter.</p></li>
<li><p><a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpecs" title="hydpy.auxs.calibtools.CalibSpecs"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpecs</span></code></a> Collection class for handling <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpec</span></code></a> objects.</p></li>
</ul>
</div></blockquote>
<hr class="docutils" />
<dl class="py class">
<dt id="hydpy.auxs.calibtools.TargetFunction">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.auxs.calibtools.</span></code><code class="sig-name descname"><span class="pre">TargetFunction</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwds</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#TargetFunction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.TargetFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">typing_extensions.Protocol</span></code></p>
<p>Protocol class for the target function required by class
<a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a>.</p>
<p>The target functions must calculate and return a floating-point number
reflecting the quality of the current parameterisation of the models of
the current project.  Often, as in the following example, the target
function relies on objective functions as <a class="reference internal" href="statstools.html#hydpy.auxs.statstools.nse" title="hydpy.auxs.statstools.nse"><code class="xref py py-func docutils literal notranslate"><span class="pre">nse()</span></code></a>, applied on the time
series of the <a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.Sim" title="hydpy.core.sequencetools.Sim"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sim</span></code></a> and <a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.Obs" title="hydpy.core.sequencetools.Obs"><code class="xref py py-class docutils literal notranslate"><span class="pre">Obs</span></code></a> sequences handled by the <a class="reference internal" href="hydpytools.html#hydpy.core.hydpytools.HydPy" title="hydpy.core.hydpytools.HydPy"><code class="xref py py-class docutils literal notranslate"><span class="pre">HydPy</span></code></a> object:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">HydPy</span><span class="p">,</span> <span class="n">nse</span><span class="p">,</span> <span class="n">TargetFunction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Target</span><span class="p">(</span><span class="n">TargetFunction</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hp</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">hp</span> <span class="o">=</span> <span class="n">hp</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">nse</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="n">node</span><span class="p">)</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hp</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="n">Target</span><span class="p">(</span><span class="n">HydPy</span><span class="p">())</span>
</pre></div>
</div>
<p>See the documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> for more information.</p>
</dd></dl>

<dl class="py class">
<dt id="hydpy.auxs.calibtools.Adaptor">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.auxs.calibtools.</span></code><code class="sig-name descname"><span class="pre">Adaptor</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwds</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#Adaptor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.Adaptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">typing_extensions.Protocol</span></code></p>
<p>Protocol class for defining adoptors required by <a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a> objects.</p>
<p>Often, one calibration parameter (represented by one <a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a> object)
depends on other calibration parameters (represented by other <a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a>
objects) or other “real” parameter values.  Please select an existing
or define an individual adaptor and assign it to a <a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a> object to
introduce such dependencies.</p>
<p>See class <a class="reference internal" href="#hydpy.auxs.calibtools.SumAdaptor" title="hydpy.auxs.calibtools.SumAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">SumAdaptor</span></code></a> or class <a class="reference internal" href="#hydpy.auxs.calibtools.FactorAdaptor" title="hydpy.auxs.calibtools.FactorAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">FactorAdaptor</span></code></a> for concrete examples.</p>
</dd></dl>

<dl class="py class">
<dt id="hydpy.auxs.calibtools.SumAdaptor">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.auxs.calibtools.</span></code><code class="sig-name descname"><span class="pre">SumAdaptor</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwds</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#SumAdaptor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.SumAdaptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#hydpy.auxs.calibtools.Adaptor" title="hydpy.auxs.calibtools.Adaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">hydpy.auxs.calibtools.Adaptor</span></code></a></p>
<p>Adaptor which calculates the sum of the values of multiple <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a>
objects and assigns it to the value(s) of the target <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> object.</p>
<p>Class <a class="reference internal" href="#hydpy.auxs.calibtools.SumAdaptor" title="hydpy.auxs.calibtools.SumAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">SumAdaptor</span></code></a> helps to introduce “larger than” relationships between
calibration parameters.  A common use-case is the time of concentration
of different runoff components.  The time of concentration of base flow
should be larger than the one of direct runoff.  Accordingly, when
modelling runoff concentration with linear storages, the recession
coefficient of direct runoff should be larger. Principally, we could
ensure this during a calibration process by defining two <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects
with fixed non-overlapping parameter ranges.  For example, we could
search for the best direct runoff delay between 1 and 5 days and the
base flow delay between 5 and 100 days.  We demonstrate this for the
recession coefficient parameters <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.K" title="hydpy.models.hland.hland_control.K"><code class="xref py py-class docutils literal notranslate"><span class="pre">K</span></code></a> and <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.K4" title="hydpy.models.hland.hland_control.K4"><code class="xref py py-class docutils literal notranslate"><span class="pre">K4</span></code></a>
of application model <a class="reference internal" href="hland_v1.html#module-hydpy.models.hland_v1" title="hydpy.models.hland_v1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">hland_v1</span></code></a> (assuming the nonlinearity parameter
<a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.Alpha" title="hydpy.models.hland.hland_control.Alpha"><code class="xref py py-class docutils literal notranslate"><span class="pre">Alpha</span></code></a> to be zero):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.examples</span> <span class="kn">import</span> <span class="n">prepare_full_example_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="p">,</span> <span class="n">pub</span><span class="p">,</span> <span class="n">TestIO</span> <span class="o">=</span> <span class="n">prepare_full_example_2</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Replace</span><span class="p">,</span> <span class="n">SumAdaptor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">k</span> <span class="o">=</span> <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">2.0</span><span class="o">**-</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">lower</span><span class="o">=</span><span class="mf">5.0</span><span class="o">**-</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">upper</span><span class="o">=</span><span class="mf">1.0</span><span class="o">**-</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">k4</span> <span class="o">=</span> <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;k4&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;k4&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">10.0</span><span class="o">**-</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">lower</span><span class="o">=</span><span class="mf">100.0</span><span class="o">**-</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">upper</span><span class="o">=</span><span class="mf">5.0</span><span class="o">**-</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>To allow for non-fixed non-overlapping ranges, we can prepare a
<a class="reference internal" href="#hydpy.auxs.calibtools.SumAdaptor" title="hydpy.auxs.calibtools.SumAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">SumAdaptor</span></code></a> object, knowing both our <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects, assign it
the direct runoff-related <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> object, and, for example, set its
lower boundary to zero:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">k</span><span class="o">.</span><span class="n">adaptor</span> <span class="o">=</span> <span class="n">SumAdaptor</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">k4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">k</span><span class="o">.</span><span class="n">lower</span> <span class="o">=</span> <span class="mf">0.0</span>
</pre></div>
</div>
<p>Calling method <a class="reference internal" href="#hydpy.auxs.calibtools.Replace.apply_value" title="hydpy.auxs.calibtools.Replace.apply_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_value()</span></code></a> of the <a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a> objects makes
our <a class="reference internal" href="#hydpy.auxs.calibtools.SumAdaptor" title="hydpy.auxs.calibtools.SumAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">SumAdaptor</span></code></a> object apply the sum of the values of all of its
<a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">control</span> <span class="o">=</span> <span class="n">hp</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">land_dill</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">k</span><span class="o">.</span><span class="n">apply_value</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pub</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">parameterstep</span><span class="p">(</span><span class="s2">&quot;1d&quot;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">control</span><span class="o">.</span><span class="n">k</span>
<span class="go">k(0.6)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="hydpy.auxs.calibtools.FactorAdaptor">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.auxs.calibtools.</span></code><code class="sig-name descname"><span class="pre">FactorAdaptor</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwds</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#FactorAdaptor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.FactorAdaptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#hydpy.auxs.calibtools.Adaptor" title="hydpy.auxs.calibtools.Adaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">hydpy.auxs.calibtools.Adaptor</span></code></a></p>
<p>Adaptor which calculates the product of the value of the parent
<a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a> object and the value(s) of a given reference <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> object
and assigns it to the value(s) of the target <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> object.</p>
<p>Class <a class="reference internal" href="#hydpy.auxs.calibtools.FactorAdaptor" title="hydpy.auxs.calibtools.FactorAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">FactorAdaptor</span></code></a> helps to respect dependencies between model
parameters.  If you, for example, aim at calibrating the permanent
wilting point (<a class="reference internal" href="lland.html#hydpy.models.lland.lland_control.PWP" title="hydpy.models.lland.lland_control.PWP"><code class="xref py py-class docutils literal notranslate"><span class="pre">PWP</span></code></a>) of model <a class="reference internal" href="lland_v1.html#module-hydpy.models.lland_v1" title="hydpy.models.lland_v1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lland_v1</span></code></a>, you need to
make sure it always agrees with the maximum soil water storage
(<a class="reference internal" href="lland.html#hydpy.models.lland.lland_control.WMax" title="hydpy.models.lland.lland_control.WMax"><code class="xref py py-class docutils literal notranslate"><span class="pre">WMax</span></code></a>).  Especially, one should avoid permanent wilting
points larger than total porosity.  Due to the high variability
of soil properties within most catchments, it is no real option to
define a fixed upper threshold for <a class="reference internal" href="lland.html#hydpy.models.lland.lland_control.PWP" title="hydpy.models.lland.lland_control.PWP"><code class="xref py py-class docutils literal notranslate"><span class="pre">PWP</span></code></a>.  By using
class <a class="reference internal" href="#hydpy.auxs.calibtools.FactorAdaptor" title="hydpy.auxs.calibtools.FactorAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">FactorAdaptor</span></code></a> you can instead calibrate a multiplication
factor.  Setting the bounds of such a factor to 0.0 and 0.5, for example,
would result in <a class="reference internal" href="lland.html#hydpy.models.lland.lland_control.PWP" title="hydpy.models.lland.lland_control.PWP"><code class="xref py py-class docutils literal notranslate"><span class="pre">PWP</span></code></a> values ranging from zero up to half
of <a class="reference internal" href="lland.html#hydpy.models.lland.lland_control.WMax" title="hydpy.models.lland.lland_control.WMax"><code class="xref py py-class docutils literal notranslate"><span class="pre">WMax</span></code></a> for each respective response unit.</p>
<p>To show how class <a class="reference internal" href="#hydpy.auxs.calibtools.FactorAdaptor" title="hydpy.auxs.calibtools.FactorAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">FactorAdaptor</span></code></a> works, we select another use-case
based on the <cite>Lahn</cite> example project prepared by function
<a class="reference internal" href="examples.html#hydpy.examples.prepare_full_example_2" title="hydpy.examples.prepare_full_example_2"><code class="xref py py-func docutils literal notranslate"><span class="pre">prepare_full_example_2()</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.examples</span> <span class="kn">import</span> <span class="n">prepare_full_example_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="p">,</span> <span class="n">pub</span><span class="p">,</span> <span class="n">TestIO</span> <span class="o">=</span> <span class="n">prepare_full_example_2</span><span class="p">()</span>
</pre></div>
</div>
<p><a class="reference internal" href="hland_v1.html#module-hydpy.models.hland_v1" title="hydpy.models.hland_v1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">hland_v1</span></code></a> calculates the “normal” potential snow-melt with the
degree-day factor <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.CFMax" title="hydpy.models.hland.hland_control.CFMax"><code class="xref py py-class docutils literal notranslate"><span class="pre">CFMax</span></code></a>.  For glacial zones, it
also calculates a separate potential glacier-melt with the additional
degree-day factor <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.GMelt" title="hydpy.models.hland.hland_control.GMelt"><code class="xref py py-class docutils literal notranslate"><span class="pre">GMelt</span></code></a>.  Suppose, we have
<a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.CFMax" title="hydpy.models.hland.hland_control.CFMax"><code class="xref py py-class docutils literal notranslate"><span class="pre">CFMax</span></code></a> readily available for the different hydrological
response units of the Lahn catchment.  We might find it useful to
calibrate <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.GMelt" title="hydpy.models.hland.hland_control.GMelt"><code class="xref py py-class docutils literal notranslate"><span class="pre">GMelt</span></code></a> based on the spatial pattern of
<a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.CFMax" title="hydpy.models.hland.hland_control.CFMax"><code class="xref py py-class docutils literal notranslate"><span class="pre">CFMax</span></code></a>.  Therefore, we first define a <a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a> rule
for parameter <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.GMelt" title="hydpy.models.hland.hland_control.GMelt"><code class="xref py py-class docutils literal notranslate"><span class="pre">GMelt</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Replace</span><span class="p">,</span> <span class="n">FactorAdaptor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmelt</span> <span class="o">=</span> <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;gmelt&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;gmelt&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">lower</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">upper</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Second, we initialise a <a class="reference internal" href="#hydpy.auxs.calibtools.FactorAdaptor" title="hydpy.auxs.calibtools.FactorAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">FactorAdaptor</span></code></a> object based on target
rule <cite>gmelt</cite> and our reference parameter <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.CFMax" title="hydpy.models.hland.hland_control.CFMax"><code class="xref py py-class docutils literal notranslate"><span class="pre">CFMax</span></code></a> and
assign it our rule object:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gmelt</span><span class="o">.</span><span class="n">adaptor</span> <span class="o">=</span> <span class="n">FactorAdaptor</span><span class="p">(</span><span class="n">gmelt</span><span class="p">,</span> <span class="s2">&quot;cfmax&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <cite>Dill</cite> subcatchment, as the whole <cite>Lahn</cite> basin, does not contain
any glaciers.  Hence it defines (identical) <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.CFMax" title="hydpy.models.hland.hland_control.CFMax"><code class="xref py py-class docutils literal notranslate"><span class="pre">CFMax</span></code></a>
values for the zones of type <a class="reference internal" href="hland.html#hydpy.models.hland.hland_constants.FIELD" title="hydpy.models.hland.hland_constants.FIELD"><code class="xref py py-const docutils literal notranslate"><span class="pre">FIELD</span></code></a> and
<a class="reference internal" href="hland.html#hydpy.models.hland.hland_constants.FOREST" title="hydpy.models.hland.hland_constants.FOREST"><code class="xref py py-const docutils literal notranslate"><span class="pre">FOREST</span></code></a>, but must not specify any value for
<a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.GMelt" title="hydpy.models.hland.hland_control.GMelt"><code class="xref py py-class docutils literal notranslate"><span class="pre">GMelt</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">control</span> <span class="o">=</span> <span class="n">hp</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">land_dill</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">control</span><span class="o">.</span><span class="n">cfmax</span>
<span class="go">cfmax(field=4.55853, forest=2.735118)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">control</span><span class="o">.</span><span class="n">gmelt</span>
<span class="go">gmelt(nan)</span>
</pre></div>
</div>
<p>Next, we call method <a class="reference internal" href="#hydpy.auxs.calibtools.Replace.apply_value" title="hydpy.auxs.calibtools.Replace.apply_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_value()</span></code></a> of the <a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a> object to
apply the <a class="reference internal" href="#hydpy.auxs.calibtools.FactorAdaptor" title="hydpy.auxs.calibtools.FactorAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">FactorAdaptor</span></code></a> object on all relevant <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.GMelt" title="hydpy.models.hland.hland_control.GMelt"><code class="xref py py-class docutils literal notranslate"><span class="pre">GMelt</span></code></a>
instances of the <cite>Lahn</cite> catchment:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gmelt</span><span class="o">.</span><span class="n">adaptor</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">gmelt</span><span class="p">)</span>
</pre></div>
</div>
<p>The string representation of the <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.GMelt" title="hydpy.models.hland.hland_control.GMelt"><code class="xref py py-class docutils literal notranslate"><span class="pre">GMelt</span></code></a> instance of <cite>Dill</cite>
catchment seems to indicate nothing happened:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">control</span><span class="o">.</span><span class="n">gmelt</span>
<span class="go">gmelt(nan)</span>
</pre></div>
</div>
<p>However, inspecting the individual values of the respective response
units reveals the multiplication was successful:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">print_values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_values</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">gmelt</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="go">9.11706, 5.470236, 9.11706, 5.470236, 9.11706, 5.470236, 9.11706,</span>
<span class="go">5.470236, 9.11706, 5.470236, 9.11706, 5.470236</span>
</pre></div>
</div>
<p>Calculating values for response units that do not require these
values can be misleading.  We can improve the situation by using
the masks provided by the respective model, in our example mask
<a class="reference internal" href="hland.html#hydpy.models.hland.hland_masks.Glacier" title="hydpy.models.hland.hland_masks.Glacier"><code class="xref py py-class docutils literal notranslate"><span class="pre">Glacier</span></code></a>.  To make this clearer, we set the  first six
response units to <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.ZoneType" title="hydpy.models.hland.hland_control.ZoneType"><code class="xref py py-class docutils literal notranslate"><span class="pre">ZoneType</span></code></a> <a class="reference internal" href="hland.html#hydpy.models.hland.hland_constants.GLACIER" title="hydpy.models.hland.hland_constants.GLACIER"><code class="xref py py-const docutils literal notranslate"><span class="pre">GLACIER</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models.hland_v1</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">control</span><span class="o">.</span><span class="n">zonetype</span><span class="p">(</span><span class="n">GLACIER</span><span class="p">,</span> <span class="n">GLACIER</span><span class="p">,</span> <span class="n">GLACIER</span><span class="p">,</span> <span class="n">GLACIER</span><span class="p">,</span> <span class="n">GLACIER</span><span class="p">,</span> <span class="n">GLACIER</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">FIELD</span><span class="p">,</span> <span class="n">FOREST</span><span class="p">,</span> <span class="n">ILAKE</span><span class="p">,</span> <span class="n">FIELD</span><span class="p">,</span> <span class="n">FOREST</span><span class="p">,</span> <span class="n">ILAKE</span><span class="p">)</span>
</pre></div>
</div>
<p>We now can assign the <a class="reference internal" href="#hydpy.auxs.calibtools.SumAdaptor" title="hydpy.auxs.calibtools.SumAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">SumAdaptor</span></code></a> object to the direct runoff-related
<a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a> object and, for example, set its lower boundary to zero:</p>
<p>Now we create a new <a class="reference internal" href="#hydpy.auxs.calibtools.FactorAdaptor" title="hydpy.auxs.calibtools.FactorAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">FactorAdaptor</span></code></a> object, handling the same parameters
but also the <a class="reference internal" href="hland.html#hydpy.models.hland.hland_masks.Glacier" title="hydpy.models.hland.hland_masks.Glacier"><code class="xref py py-class docutils literal notranslate"><span class="pre">Glacier</span></code></a> mask:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gmelt</span><span class="o">.</span><span class="n">adaptor</span> <span class="o">=</span> <span class="n">FactorAdaptor</span><span class="p">(</span><span class="n">gmelt</span><span class="p">,</span> <span class="s2">&quot;cfmax&quot;</span><span class="p">,</span> <span class="s2">&quot;glacier&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To be able to see the results of our new adaptor object, we change the
values both of our reference parameter and our rule object:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">control</span><span class="o">.</span><span class="n">cfmax</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">forest</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">glacier</span><span class="o">=</span><span class="mf">6.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmelt</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">0.5</span>
</pre></div>
</div>
<p>The string representation of our target parameter shows that the
glacier-related day degree factor of all glacier zones is now half as
large as the snow-related one:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gmelt</span><span class="o">.</span><span class="n">apply_value</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">control</span><span class="o">.</span><span class="n">gmelt</span>
<span class="go">gmelt(3.0)</span>
</pre></div>
</div>
<p>Note that all remaining values (for zone types <a class="reference internal" href="hland.html#hydpy.models.hland.hland_constants.FIELD" title="hydpy.models.hland.hland_constants.FIELD"><code class="xref py py-const docutils literal notranslate"><span class="pre">FIELD</span></code></a>,
<a class="reference internal" href="hland.html#hydpy.models.hland.hland_constants.FOREST" title="hydpy.models.hland.hland_constants.FOREST"><code class="xref py py-const docutils literal notranslate"><span class="pre">FOREST</span></code></a>, and <a class="reference internal" href="hland.html#hydpy.models.hland.hland_constants.ILAKE" title="hydpy.models.hland.hland_constants.ILAKE"><code class="xref py py-const docutils literal notranslate"><span class="pre">ILAKE</span></code></a> are still the same.
This intended behaviour allows calibrating, for example, hydrological
response units of different types with different rule objects:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_values</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">gmelt</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="go">3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 9.11706, 5.470236, 9.11706, 5.470236,</span>
<span class="go">9.11706, 5.470236</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="hydpy.auxs.calibtools.Rule">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.auxs.calibtools.</span></code><code class="sig-name descname"><span class="pre">Rule</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><span class="pre">hydpy.core.parametertools.Parameter</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><span class="pre">hydpy.core.parametertools.Parameter</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">-</span> <span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameterstep</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Period</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.9)"><span class="pre">datetime.timedelta</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selections</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="selectiontools.html#hydpy.core.selectiontools.Selection" title="hydpy.core.selectiontools.Selection"><span class="pre">hydpy.core.selectiontools.Selection</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">module</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#Rule"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.Rule" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></a></p>
<p>Base class for defining calibration rules.</p>
<p>Each <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> object relates one calibration parameter with some
model parameters.  We select the class <a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a> as a concrete example
for the following explanations and use the <cite>Lahn</cite> example project,
which we prepare by calling function <a class="reference internal" href="examples.html#hydpy.examples.prepare_full_example_2" title="hydpy.examples.prepare_full_example_2"><code class="xref py py-func docutils literal notranslate"><span class="pre">prepare_full_example_2()</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.examples</span> <span class="kn">import</span> <span class="n">prepare_full_example_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="p">,</span> <span class="n">pub</span><span class="p">,</span> <span class="n">TestIO</span> <span class="o">=</span> <span class="n">prepare_full_example_2</span><span class="p">()</span>
</pre></div>
</div>
<p>We define a <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> object supposed to replace the values of parameter
<a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.FC" title="hydpy.models.hland.hland_control.FC"><code class="xref py py-class docutils literal notranslate"><span class="pre">FC</span></code></a> of application model <a class="reference internal" href="lland_v1.html#module-hydpy.models.lland_v1" title="hydpy.models.lland_v1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lland_v1</span></code></a>.  Note that argument
<cite>name</cite> is the name of the rule itself, whereas the argument <cite>parameter</cite>
is the name of the parameter:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Replace</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span> <span class="o">=</span> <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>The following string representation shows us the full list of available
arguments:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span>
<span class="go">Replace(</span>
<span class="go">    name=&quot;fc&quot;,</span>
<span class="go">    parameter=&quot;fc&quot;,</span>
<span class="go">    lower=-inf,</span>
<span class="go">    upper=inf,</span>
<span class="go">    parameterstep=None,</span>
<span class="go">    value=100.0,</span>
<span class="go">    model=&quot;hland_v1&quot;,</span>
<span class="go">    selections=(&quot;complete&quot;,),</span>
<span class="go">)</span>
</pre></div>
</div>
<p>The initial value of parameter <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.FC" title="hydpy.models.hland.hland_control.FC"><code class="xref py py-class docutils literal notranslate"><span class="pre">FC</span></code></a> is 206 mm:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span> <span class="o">=</span> <span class="n">hp</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">land_lahn_1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">fc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span>
<span class="go">fc(206.0)</span>
</pre></div>
</div>
<p>We can modify it by calling method <a class="reference internal" href="#hydpy.auxs.calibtools.Rule.apply_value" title="hydpy.auxs.calibtools.Rule.apply_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_value()</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">apply_value</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span>
<span class="go">fc(100.0)</span>
</pre></div>
</div>
<p>You can change and apply the value at any time:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">200.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">apply_value</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span>
<span class="go">fc(200.0)</span>
</pre></div>
</div>
<p>Sometimes, one needs to make a difference between the original value
to be calibrated and the actually applied value.  Therefore, (only)
the <a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a> class allows defining custom “adaptors”. Prepare an
<a class="reference internal" href="#hydpy.auxs.calibtools.Adaptor" title="hydpy.auxs.calibtools.Adaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Adaptor</span></code></a> function and assign it to the relevant <a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a> object (see
the documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.SumAdaptor" title="hydpy.auxs.calibtools.SumAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">SumAdaptor</span></code></a> or <a class="reference internal" href="#hydpy.auxs.calibtools.FactorAdaptor" title="hydpy.auxs.calibtools.FactorAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">FactorAdaptor</span></code></a> for more
realistic examples):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">adaptor</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">target</span><span class="p">:</span> <span class="n">target</span><span class="p">(</span><span class="mf">2.0</span><span class="o">*</span><span class="n">rule</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, our rule does not apply the original but the adapted calibration
parameter value:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">apply_value</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span>
<span class="go">fc(400.0)</span>
</pre></div>
</div>
<p>Use method <a class="reference internal" href="#hydpy.auxs.calibtools.Rule.reset_parameters" title="hydpy.auxs.calibtools.Rule.reset_parameters"><code class="xref py py-func docutils literal notranslate"><span class="pre">reset_parameters()</span></code></a> to restore the original states of the
affected parameters (“original” here means at the time of initialisation
of the <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> object):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">reset_parameters</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span>
<span class="go">fc(206.0)</span>
</pre></div>
</div>
<p>The value of parameter <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.FC" title="hydpy.models.hland.hland_control.FC"><code class="xref py py-class docutils literal notranslate"><span class="pre">FC</span></code></a> is not time-dependent.
Any <a class="reference internal" href="optiontools.html#hydpy.core.optiontools.Options.parameterstep" title="hydpy.core.optiontools.Options.parameterstep"><code class="xref py py-const docutils literal notranslate"><span class="pre">parameterstep</span></code></a> information given to its <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> object
is ignored (note that we pass an example parameter object of
type <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.FC" title="hydpy.models.hland.hland_control.FC"><code class="xref py py-class docutils literal notranslate"><span class="pre">FC</span></code></a> instead of the string <cite>fc</cite> this time):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="n">fc</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">Replace(</span>
<span class="go">    name=&quot;fc&quot;,</span>
<span class="go">    parameter=&quot;fc&quot;,</span>
<span class="go">    lower=-inf,</span>
<span class="go">    upper=inf,</span>
<span class="go">    parameterstep=None,</span>
<span class="go">    value=100.0,</span>
<span class="go">    model=&quot;hland_v1&quot;,</span>
<span class="go">    selections=(&quot;complete&quot;,),</span>
<span class="go">)</span>
</pre></div>
</div>
<p>For time-dependent parameters, the rule queries the current global
<a class="reference internal" href="optiontools.html#hydpy.core.optiontools.Options.parameterstep" title="hydpy.core.optiontools.Options.parameterstep"><code class="xref py py-const docutils literal notranslate"><span class="pre">parameterstep</span></code></a> value, if you do not specify one explicitly
(note that we pass the parameter type <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.PercMax" title="hydpy.models.hland.hland_control.PercMax"><code class="xref py py-class docutils literal notranslate"><span class="pre">PercMax</span></code></a> this
time):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models.hland.hland_control</span> <span class="kn">import</span> <span class="n">PercMax</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span> <span class="o">=</span> <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;percmax&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="n">PercMax</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> object internally handles, to avoid confusion, a copy of
<a class="reference internal" href="optiontools.html#hydpy.core.optiontools.Options.parameterstep" title="hydpy.core.optiontools.Options.parameterstep"><code class="xref py py-const docutils literal notranslate"><span class="pre">parameterstep</span></code></a>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">pub</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pub</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">parameterstep</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span>
<span class="go">Replace(</span>
<span class="go">    name=&quot;percmax&quot;,</span>
<span class="go">    parameter=&quot;percmax&quot;,</span>
<span class="go">    lower=-inf,</span>
<span class="go">    upper=inf,</span>
<span class="go">    parameterstep=&quot;1d&quot;,</span>
<span class="go">    value=5.0,</span>
<span class="go">    model=&quot;hland_v1&quot;,</span>
<span class="go">    selections=(&quot;complete&quot;,),</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">apply_value</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">percmax</span> <span class="o">=</span> <span class="n">hp</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">land_lahn_1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">percmax</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pub</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">parameterstep</span><span class="p">(</span><span class="s2">&quot;1d&quot;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">percmax</span>
<span class="go">percmax(5.0)</span>
</pre></div>
</div>
<p>Alternatively, you can pass a parameter step size yourself:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span> <span class="o">=</span> <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;percmax&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;percmax&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;2d&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">apply_value</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pub</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">parameterstep</span><span class="p">(</span><span class="s2">&quot;1d&quot;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">percmax</span>
<span class="go">percmax(2.5)</span>
</pre></div>
</div>
<p>Missing parameter step-size information results in the following error:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;percmax&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;percmax&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">While trying to initialise the `Replace` rule object `percmax`, the following error occurred: Rules which handle time-dependent parameters require information on the parameter timestep size.  Either assign it directly or define it via option `parameterstep`.</span>
</pre></div>
</div>
<p>With the following definition, the <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> object queries all <a class="reference internal" href="devicetools.html#hydpy.core.devicetools.Element" title="hydpy.core.devicetools.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a>
objects handling <a class="reference internal" href="hland_v1.html#module-hydpy.models.hland_v1" title="hydpy.models.hland_v1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">hland_v1</span></code></a> instances from the global <a class="reference internal" href="selectiontools.html#hydpy.core.selectiontools.Selections" title="hydpy.core.selectiontools.Selections"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selections</span></code></a>
object <cite>pub.selections</cite>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span> <span class="o">=</span> <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">elements</span>
<span class="go">Elements(&quot;land_dill&quot;, &quot;land_lahn_1&quot;, &quot;land_lahn_2&quot;, &quot;land_lahn_3&quot;)</span>
</pre></div>
</div>
<p>Alternatively, you can specify selections by passing themselves or their
names (the latter requires them to be a member of <cite>pub.selections</cite>):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span> <span class="o">=</span> <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">selections</span><span class="o">=</span><span class="p">[</span><span class="n">pub</span><span class="o">.</span><span class="n">selections</span><span class="o">.</span><span class="n">headwaters</span><span class="p">,</span> <span class="s2">&quot;nonheadwaters&quot;</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">elements</span>
<span class="go">Elements(&quot;land_dill&quot;, &quot;land_lahn_1&quot;, &quot;land_lahn_2&quot;, &quot;land_lahn_3&quot;)</span>
</pre></div>
</div>
<p>Without using the <cite>model</cite> argument, you must make sure the selected
elements handle the correct model instance yourself:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">While trying to initialise the `Replace` rule object `fc`, the following error occurred: Model `hstream_v1` of element `stream_dill_lahn_2` does not define a control parameter named `fc`.</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hstream_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">selections</span><span class="o">=</span><span class="p">[</span><span class="n">pub</span><span class="o">.</span><span class="n">selections</span><span class="o">.</span><span class="n">headwaters</span><span class="p">,</span> <span class="s2">&quot;nonheadwaters&quot;</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">While trying to initialise the `Replace` rule object `fc`, the following error occurred: Object `Selections(&quot;headwaters&quot;, &quot;nonheadwaters&quot;)` does not handle any `hstream_v1` model instances.</span>
</pre></div>
</div>
<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Rule.name">
<code class="sig-name descname"><span class="pre">name</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.Rule.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> object.</p>
<p>Often, the name of the target parameter, but this is arbitrary.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Rule.parametername">
<code class="sig-name descname"><span class="pre">parametername</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.Rule.parametername" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the addressed <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> objects.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Rule.upper">
<code class="sig-name descname"><span class="pre">upper</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.Rule.upper" title="Permalink to this definition">¶</a></dt>
<dd><p>Upper boundary value.</p>
<p>No upper boundary corresponds to plus <code class="xref py py-const docutils literal notranslate"><span class="pre">inf</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Rule.lower">
<code class="sig-name descname"><span class="pre">lower</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.Rule.lower" title="Permalink to this definition">¶</a></dt>
<dd><p>Lower boundary value.</p>
<p>No lower boundary corresponds to minus <code class="xref py py-const docutils literal notranslate"><span class="pre">inf</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Rule.selections">
<code class="sig-name descname"><span class="pre">selections</span></code><em class="property"><span class="pre">:</span> <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">…</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#hydpy.auxs.calibtools.Rule.selections" title="Permalink to this definition">¶</a></dt>
<dd><p>The names of all relevant <a class="reference internal" href="selectiontools.html#hydpy.core.selectiontools.Selection" title="hydpy.core.selectiontools.Selection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selection</span></code></a> objects.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Rule.elements">
<code class="sig-name descname"><span class="pre">elements</span></code><em class="property"><span class="pre">:</span> <a class="reference internal" href="devicetools.html#hydpy.core.devicetools.Elements" title="hydpy.core.devicetools.Elements"><span class="pre">hydpy.core.devicetools.Elements</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.Rule.elements" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="devicetools.html#hydpy.core.devicetools.Element" title="hydpy.core.devicetools.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> objects which handle the relevant target <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a>
instances.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Rule.parametertype">
<code class="sig-name descname"><span class="pre">parametertype</span></code><em class="property"><span class="pre">:</span> <span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><span class="pre">hydpy.core.parametertools.Parameter</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#hydpy.auxs.calibtools.Rule.parametertype" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of the addressed <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> objects.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.Rule.value">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">value</span></code><a class="headerlink" href="#hydpy.auxs.calibtools.Rule.value" title="Permalink to this definition">¶</a></dt>
<dd><p>The calibration parameter value.</p>
<p>Property <a class="reference internal" href="#hydpy.auxs.calibtools.Rule.value" title="hydpy.auxs.calibtools.Rule.value"><code class="xref py py-const docutils literal notranslate"><span class="pre">value</span></code></a> ensures that the given value adheres to the
defined lower and upper boundaries:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Replace</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.examples</span> <span class="kn">import</span> <span class="n">prepare_full_example_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="p">,</span> <span class="n">pub</span><span class="p">,</span> <span class="n">TestIO</span> <span class="o">=</span> <span class="n">prepare_full_example_2</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span> <span class="o">=</span> <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">lower</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">upper</span><span class="o">=</span><span class="mf">200.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">value</span>
<span class="go">50.0</span>
</pre></div>
</div>
<p>With option <a class="reference internal" href="optiontools.html#hydpy.core.optiontools.Options.warntrim" title="hydpy.core.optiontools.Options.warntrim"><code class="xref py py-const docutils literal notranslate"><span class="pre">warntrim</span></code></a> enabled (the default), property
<a class="reference internal" href="#hydpy.auxs.calibtools.Rule.value" title="hydpy.auxs.calibtools.Rule.value"><code class="xref py py-const docutils literal notranslate"><span class="pre">value</span></code></a> also emits a warning like the following:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pub</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">warntrim</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">rule</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">300.0</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">UserWarning</span>: <span class="n">The value of the `Replace` object `fc` must not be smaller than `50.0` or larger than `200.0`, but the given value is `300.0`.  Applying the trimmed value `200.0` instead.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">value</span>
<span class="go">200.0</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.Rule.apply_value">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">apply_value</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#Rule.apply_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.Rule.apply_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the current value on the relevant <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> objects.</p>
<p>To be overridden by the concrete subclasses.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.Rule.reset_parameters">
<code class="sig-name descname"><span class="pre">reset_parameters</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#Rule.reset_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.Rule.reset_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all relevant parameter objects to their original states.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.examples</span> <span class="kn">import</span> <span class="n">prepare_full_example_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="p">,</span> <span class="n">pub</span><span class="p">,</span> <span class="n">TestIO</span> <span class="o">=</span> <span class="n">prepare_full_example_2</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Replace</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span> <span class="o">=</span> <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span> <span class="o">=</span> <span class="n">hp</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">land_lahn_1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">fc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span>
<span class="go">fc(206.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span><span class="p">(</span><span class="mf">100.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span>
<span class="go">fc(100.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">reset_parameters</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span>
<span class="go">fc(206.0)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.Rule.parameterstep">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">parameterstep</span></code><a class="headerlink" href="#hydpy.auxs.calibtools.Rule.parameterstep" title="Permalink to this definition">¶</a></dt>
<dd><p>The parameter step size relevant to the related model parameter.</p>
<p>For non-time-dependent parameters, property <a class="reference internal" href="#hydpy.auxs.calibtools.Rule.parameterstep" title="hydpy.auxs.calibtools.Rule.parameterstep"><code class="xref py py-const docutils literal notranslate"><span class="pre">parameterstep</span></code></a>
is (usually) <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.Rule.assignrepr">
<code class="sig-name descname"><span class="pre">assignrepr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#Rule.assignrepr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.Rule.assignrepr" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string representation of the actual <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> object
prefixed with the given string.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hydpy.auxs.calibtools.Replace">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.auxs.calibtools.</span></code><code class="sig-name descname"><span class="pre">Replace</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><span class="pre">hydpy.core.parametertools.Parameter</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><span class="pre">hydpy.core.parametertools.Parameter</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">-</span> <span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameterstep</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Period</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.9)"><span class="pre">datetime.timedelta</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selections</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="selectiontools.html#hydpy.core.selectiontools.Selection" title="hydpy.core.selectiontools.Selection"><span class="pre">hydpy.core.selectiontools.Selection</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">module</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#Replace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.Replace" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">hydpy.auxs.calibtools.Rule</span></code></a></p>
<p><a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> class which simply replaces the current model parameter
value(s) with the current calibration parameter value.</p>
<p>See the documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> for further information.</p>
<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Replace.adaptor">
<code class="sig-name descname"><span class="pre">adaptor</span></code><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#hydpy.auxs.calibtools.Adaptor" title="hydpy.auxs.calibtools.Adaptor"><span class="pre">hydpy.auxs.calibtools.Adaptor</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#hydpy.auxs.calibtools.Replace.adaptor" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional function object for customising individual calibration
strategies.</p>
<p>See the documentation on the classes <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a>, <a class="reference internal" href="#hydpy.auxs.calibtools.SumAdaptor" title="hydpy.auxs.calibtools.SumAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">SumAdaptor</span></code></a>, and 
<a class="reference internal" href="#hydpy.auxs.calibtools.FactorAdaptor" title="hydpy.auxs.calibtools.FactorAdaptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">FactorAdaptor</span></code></a> for further information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.Replace.apply_value">
<code class="sig-name descname"><span class="pre">apply_value</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#Replace.apply_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.Replace.apply_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the current value on the relevant <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> objects.</p>
<p>See the documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> for further information.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hydpy.auxs.calibtools.Add">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.auxs.calibtools.</span></code><code class="sig-name descname"><span class="pre">Add</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><span class="pre">hydpy.core.parametertools.Parameter</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><span class="pre">hydpy.core.parametertools.Parameter</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">-</span> <span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameterstep</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Period</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.9)"><span class="pre">datetime.timedelta</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selections</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="selectiontools.html#hydpy.core.selectiontools.Selection" title="hydpy.core.selectiontools.Selection"><span class="pre">hydpy.core.selectiontools.Selection</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">module</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#Add"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.Add" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">hydpy.auxs.calibtools.Rule</span></code></a></p>
<p><a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> class which adds its calibration delta to the original model
parameter value(s).</p>
<p>Please read the examples of the documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> first.
Here, we modify some of these examples to show the unique features
of class <a class="reference internal" href="#hydpy.auxs.calibtools.Add" title="hydpy.auxs.calibtools.Add"><code class="xref py py-class docutils literal notranslate"><span class="pre">Add</span></code></a>.</p>
<p>The first example deals with the non-time-dependent parameter
<a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.FC" title="hydpy.models.hland.hland_control.FC"><code class="xref py py-class docutils literal notranslate"><span class="pre">FC</span></code></a>.  The following <a class="reference internal" href="#hydpy.auxs.calibtools.Add" title="hydpy.auxs.calibtools.Add"><code class="xref py py-class docutils literal notranslate"><span class="pre">Add</span></code></a> object adds its current
value to the original value of the parameter:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.examples</span> <span class="kn">import</span> <span class="n">prepare_full_example_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="p">,</span> <span class="n">pub</span><span class="p">,</span> <span class="n">TestIO</span> <span class="o">=</span> <span class="n">prepare_full_example_2</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Add</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span> <span class="o">=</span> <span class="n">Add</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">adaptor</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">parameter</span><span class="p">:</span> <span class="mf">2.0</span><span class="o">*</span><span class="n">rule</span><span class="o">.</span><span class="n">value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span> <span class="o">=</span> <span class="n">hp</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">land_lahn_1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">fc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span>
<span class="go">fc(206.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">apply_value</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span>
<span class="go">fc(306.0)</span>
</pre></div>
</div>
<p>The second example deals with the time-dependent parameter
<a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.PercMax" title="hydpy.models.hland.hland_control.PercMax"><code class="xref py py-class docutils literal notranslate"><span class="pre">PercMax</span></code></a> and shows that everything works even for
situations where the actual <a class="reference internal" href="optiontools.html#hydpy.core.optiontools.Options.parameterstep" title="hydpy.core.optiontools.Options.parameterstep"><code class="xref py py-const docutils literal notranslate"><span class="pre">parameterstep</span></code></a> (2 days) differs
from the current <a class="reference internal" href="optiontools.html#hydpy.core.optiontools.Options.simulationstep" title="hydpy.core.optiontools.Options.simulationstep"><code class="xref py py-const docutils literal notranslate"><span class="pre">simulationstep</span></code></a> (1 day):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span> <span class="o">=</span> <span class="n">Add</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;percmax&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;percmax&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;2d&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">percmax</span> <span class="o">=</span> <span class="n">hp</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">land_lahn_1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">percmax</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">percmax</span>
<span class="go">percmax(1.02978)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">apply_value</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">percmax</span>
<span class="go">percmax(3.52978)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="hydpy.auxs.calibtools.Add.apply_value">
<code class="sig-name descname"><span class="pre">apply_value</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#Add.apply_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.Add.apply_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the current (adapted) value on the relevant <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a>
objects.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Add.name">
<code class="sig-name descname"><span class="pre">name</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.Add.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> object.</p>
<p>Often, the name of the target parameter, but this is arbitrary.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Add.lower">
<code class="sig-name descname"><span class="pre">lower</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.Add.lower" title="Permalink to this definition">¶</a></dt>
<dd><p>Lower boundary value.</p>
<p>No lower boundary corresponds to minus <code class="xref py py-const docutils literal notranslate"><span class="pre">inf</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Add.upper">
<code class="sig-name descname"><span class="pre">upper</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.Add.upper" title="Permalink to this definition">¶</a></dt>
<dd><p>Upper boundary value.</p>
<p>No upper boundary corresponds to plus <code class="xref py py-const docutils literal notranslate"><span class="pre">inf</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Add.parametername">
<code class="sig-name descname"><span class="pre">parametername</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.Add.parametername" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the addressed <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> objects.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Add.parametertype">
<code class="sig-name descname"><span class="pre">parametertype</span></code><em class="property"><span class="pre">:</span> <span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><span class="pre">hydpy.core.parametertools.Parameter</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#hydpy.auxs.calibtools.Add.parametertype" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of the addressed <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> objects.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Add.elements">
<code class="sig-name descname"><span class="pre">elements</span></code><em class="property"><span class="pre">:</span> <a class="reference internal" href="devicetools.html#hydpy.core.devicetools.Elements" title="hydpy.core.devicetools.Elements"><span class="pre">hydpy.core.devicetools.Elements</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.Add.elements" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="devicetools.html#hydpy.core.devicetools.Element" title="hydpy.core.devicetools.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> objects which handle the relevant target <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a>
instances.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Add.selections">
<code class="sig-name descname"><span class="pre">selections</span></code><em class="property"><span class="pre">:</span> <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">…</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#hydpy.auxs.calibtools.Add.selections" title="Permalink to this definition">¶</a></dt>
<dd><p>The names of all relevant <a class="reference internal" href="selectiontools.html#hydpy.core.selectiontools.Selection" title="hydpy.core.selectiontools.Selection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selection</span></code></a> objects.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hydpy.auxs.calibtools.Multiply">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.auxs.calibtools.</span></code><code class="sig-name descname"><span class="pre">Multiply</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><span class="pre">hydpy.core.parametertools.Parameter</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><span class="pre">hydpy.core.parametertools.Parameter</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">-</span> <span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameterstep</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Period</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.9)"><span class="pre">datetime.timedelta</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selections</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="selectiontools.html#hydpy.core.selectiontools.Selection" title="hydpy.core.selectiontools.Selection"><span class="pre">hydpy.core.selectiontools.Selection</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">module</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#Multiply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.Multiply" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">hydpy.auxs.calibtools.Rule</span></code></a></p>
<p><a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> class which multiplies the original model parameter value(s)
by its calibration factor.</p>
<p>Please read the examples of the documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> first.
Here, we modify some of these examples to show the unique features
of class <a class="reference internal" href="#hydpy.auxs.calibtools.Multiply" title="hydpy.auxs.calibtools.Multiply"><code class="xref py py-class docutils literal notranslate"><span class="pre">Multiply</span></code></a>.</p>
<p>The first example deals with the non-time-dependent parameter
<a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.FC" title="hydpy.models.hland.hland_control.FC"><code class="xref py py-class docutils literal notranslate"><span class="pre">FC</span></code></a>.  The following <a class="reference internal" href="#hydpy.auxs.calibtools.Multiply" title="hydpy.auxs.calibtools.Multiply"><code class="xref py py-class docutils literal notranslate"><span class="pre">Multiply</span></code></a> object multiplies the
original value of the parameter by its current calibration factor:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.examples</span> <span class="kn">import</span> <span class="n">prepare_full_example_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="p">,</span> <span class="n">pub</span><span class="p">,</span> <span class="n">TestIO</span> <span class="o">=</span> <span class="n">prepare_full_example_2</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Add</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span> <span class="o">=</span> <span class="n">Multiply</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span> <span class="o">=</span> <span class="n">hp</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">land_lahn_1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">fc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span>
<span class="go">fc(206.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">apply_value</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span>
<span class="go">fc(412.0)</span>
</pre></div>
</div>
<p>The second example deals with the time-dependent parameter
<a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.PercMax" title="hydpy.models.hland.hland_control.PercMax"><code class="xref py py-class docutils literal notranslate"><span class="pre">PercMax</span></code></a> and shows that everything works even for
situations where the actual <a class="reference internal" href="optiontools.html#hydpy.core.optiontools.Options.parameterstep" title="hydpy.core.optiontools.Options.parameterstep"><code class="xref py py-const docutils literal notranslate"><span class="pre">parameterstep</span></code></a> (2 days) differs
from the current <a class="reference internal" href="optiontools.html#hydpy.core.optiontools.Options.simulationstep" title="hydpy.core.optiontools.Options.simulationstep"><code class="xref py py-const docutils literal notranslate"><span class="pre">simulationstep</span></code></a> (1 day):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span> <span class="o">=</span> <span class="n">Multiply</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;percmax&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;percmax&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;2d&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">percmax</span> <span class="o">=</span> <span class="n">hp</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">land_lahn_1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">percmax</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">percmax</span>
<span class="go">percmax(1.02978)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rule</span><span class="o">.</span><span class="n">apply_value</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">percmax</span>
<span class="go">percmax(2.05956)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="hydpy.auxs.calibtools.Multiply.apply_value">
<code class="sig-name descname"><span class="pre">apply_value</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#Multiply.apply_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.Multiply.apply_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the current (adapted) value on the relevant <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a>
objects.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Multiply.name">
<code class="sig-name descname"><span class="pre">name</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.Multiply.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> object.</p>
<p>Often, the name of the target parameter, but this is arbitrary.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Multiply.lower">
<code class="sig-name descname"><span class="pre">lower</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.Multiply.lower" title="Permalink to this definition">¶</a></dt>
<dd><p>Lower boundary value.</p>
<p>No lower boundary corresponds to minus <code class="xref py py-const docutils literal notranslate"><span class="pre">inf</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Multiply.upper">
<code class="sig-name descname"><span class="pre">upper</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.Multiply.upper" title="Permalink to this definition">¶</a></dt>
<dd><p>Upper boundary value.</p>
<p>No upper boundary corresponds to plus <code class="xref py py-const docutils literal notranslate"><span class="pre">inf</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Multiply.parametername">
<code class="sig-name descname"><span class="pre">parametername</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.Multiply.parametername" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the addressed <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> objects.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Multiply.parametertype">
<code class="sig-name descname"><span class="pre">parametertype</span></code><em class="property"><span class="pre">:</span> <span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><span class="pre">hydpy.core.parametertools.Parameter</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#hydpy.auxs.calibtools.Multiply.parametertype" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of the addressed <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> objects.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Multiply.elements">
<code class="sig-name descname"><span class="pre">elements</span></code><em class="property"><span class="pre">:</span> <a class="reference internal" href="devicetools.html#hydpy.core.devicetools.Elements" title="hydpy.core.devicetools.Elements"><span class="pre">hydpy.core.devicetools.Elements</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.Multiply.elements" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="devicetools.html#hydpy.core.devicetools.Element" title="hydpy.core.devicetools.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> objects which handle the relevant target <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a>
instances.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.Multiply.selections">
<code class="sig-name descname"><span class="pre">selections</span></code><em class="property"><span class="pre">:</span> <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">…</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#hydpy.auxs.calibtools.Multiply.selections" title="Permalink to this definition">¶</a></dt>
<dd><p>The names of all relevant <a class="reference internal" href="selectiontools.html#hydpy.core.selectiontools.Selection" title="hydpy.core.selectiontools.Selection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selection</span></code></a> objects.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hydpy.auxs.calibtools.CalibrationInterface">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.auxs.calibtools.</span></code><code class="sig-name descname"><span class="pre">CalibrationInterface</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hp</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="hydpytools.html#hydpy.core.hydpytools.HydPy" title="hydpy.core.hydpytools.HydPy"><span class="pre">hydpy.core.hydpytools.HydPy</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">targetfunction</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#hydpy.auxs.calibtools.TargetFunction" title="hydpy.auxs.calibtools.TargetFunction"><span class="pre">hydpy.auxs.calibtools.TargetFunction</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibrationInterface"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Generic</span></code>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">hydpy.auxs.calibtools.RuleType1</span></code>]</p>
<p>Interface for the coupling of <em>HydPy</em> to optimisation libraries like
<a class="reference external" href="https://nlopt.readthedocs.io/en/latest/">NLopt</a>.</p>
<p>Essentially, class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> is supposed for the structured
handling of multiple objects of the different <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> subclasses.  Hence,
please read the documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> before continuing, on
which we base the following explanations.</p>
<p>We work with the <cite>Lahn</cite> example project again:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.examples</span> <span class="kn">import</span> <span class="n">prepare_full_example_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="p">,</span> <span class="n">pub</span><span class="p">,</span> <span class="n">TestIO</span> <span class="o">=</span> <span class="n">prepare_full_example_2</span><span class="p">()</span>
</pre></div>
</div>
<p>First, we create a <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> object.  Initially, it needs
to know the relevant <a class="reference internal" href="hydpytools.html#hydpy.core.hydpytools.HydPy" title="hydpy.core.hydpytools.HydPy"><code class="xref py py-class docutils literal notranslate"><span class="pre">HydPy</span></code></a> object and the target or objective function
(here, we define the target function sloppily via the <cite>lambda</cite> statement;
see the documentation on the protocol class <a class="reference internal" href="#hydpy.auxs.calibtools.TargetFunction" title="hydpy.auxs.calibtools.TargetFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TargetFunction</span></code></a> for a more
formal definition and further explanations):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">CalibrationInterface</span><span class="p">,</span> <span class="n">nse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span> <span class="o">=</span> <span class="n">CalibrationInterface</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">hp</span><span class="o">=</span><span class="n">hp</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">targetfunction</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">nse</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="n">node</span><span class="p">)</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">hp</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Next, we use method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.make_rules" title="hydpy.auxs.calibtools.CalibrationInterface.make_rules"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_rules()</span></code></a>, which generates
one <a class="reference internal" href="#hydpy.auxs.calibtools.Replace" title="hydpy.auxs.calibtools.Replace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Replace</span></code></a> rule related to parameter <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.FC" title="hydpy.models.hland.hland_control.FC"><code class="xref py py-class docutils literal notranslate"><span class="pre">FC</span></code></a> and another
one related to parameter <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.PercMax" title="hydpy.models.hland.hland_control.PercMax"><code class="xref py py-class docutils literal notranslate"><span class="pre">PercMax</span></code></a> in one step:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Replace</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">make_rules</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">rule</span><span class="o">=</span><span class="n">Replace</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span> <span class="s2">&quot;percmax&quot;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span> <span class="s2">&quot;percmax&quot;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">lowers</span><span class="o">=</span><span class="p">[</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">uppers</span><span class="o">=</span><span class="p">[</span><span class="mf">200.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">parametersteps</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ci</span><span class="p">)</span>
<span class="go">CalibrationInterface</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span>
<span class="go">Replace(</span>
<span class="go">    name=&quot;fc&quot;,</span>
<span class="go">    parameter=&quot;fc&quot;,</span>
<span class="go">    lower=50.0,</span>
<span class="go">    upper=200.0,</span>
<span class="go">    parameterstep=None,</span>
<span class="go">    value=100.0,</span>
<span class="go">    model=&quot;hland_v1&quot;,</span>
<span class="go">    selections=(&quot;complete&quot;,),</span>
<span class="go">)</span>
<span class="go">Replace(</span>
<span class="go">    name=&quot;percmax&quot;,</span>
<span class="go">    parameter=&quot;percmax&quot;,</span>
<span class="go">    lower=1.0,</span>
<span class="go">    upper=10.0,</span>
<span class="go">    parameterstep=&quot;1d&quot;,</span>
<span class="go">    value=5.0,</span>
<span class="go">    model=&quot;hland_v1&quot;,</span>
<span class="go">    selections=(&quot;complete&quot;,),</span>
<span class="go">)</span>
</pre></div>
</div>
<p>You can also add existing rules via method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.add_rules" title="hydpy.auxs.calibtools.CalibrationInterface.add_rules"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_rules()</span></code></a>.
We add one for calibrating parameter <a class="reference internal" href="hstream.html#hydpy.models.hstream.hstream_control.Damp" title="hydpy.models.hstream.hstream_control.Damp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Damp</span></code></a> of application
model <a class="reference internal" href="hstream_v1.html#module-hydpy.models.hstream_v1" title="hydpy.models.hstream_v1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">hstream_v1</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">ci</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">add_rules</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;damp&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;damp&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">value</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">lower</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">upper</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">selections</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;complete&quot;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hstream_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">ci</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
<p>All rules are available via attribute and keyword access:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">fc</span>
<span class="go">Replace(</span>
<span class="go">    name=&quot;fc&quot;,</span>
<span class="go">    parameter=&quot;fc&quot;,</span>
<span class="go">    lower=50.0,</span>
<span class="go">    upper=200.0,</span>
<span class="go">    parameterstep=None,</span>
<span class="go">    value=100.0,</span>
<span class="go">    model=&quot;hland_v1&quot;,</span>
<span class="go">    selections=(&quot;complete&quot;,),</span>
<span class="go">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">FC</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">AttributeError</span>: <span class="n">The actual calibration interface does neither handle a normal attribute nor a rule object named `FC`.</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="p">[</span><span class="s2">&quot;damp&quot;</span><span class="p">]</span>
<span class="go">Replace(</span>
<span class="go">    name=&quot;damp&quot;,</span>
<span class="go">    parameter=&quot;damp&quot;,</span>
<span class="go">    lower=0.0,</span>
<span class="go">    upper=0.5,</span>
<span class="go">    parameterstep=None,</span>
<span class="go">    value=0.2,</span>
<span class="go">    model=&quot;hstream_v1&quot;,</span>
<span class="go">    selections=(&quot;complete&quot;,),</span>
<span class="go">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="p">[</span><span class="s2">&quot;Damp&quot;</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">KeyError</span>: <span class="n">&#39;The actual calibration interface does not handle a rule object named `Damp`.&#39;</span>
</pre></div>
</div>
<p>The following properties return consistently sorted information on
the handles <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">names</span>
<span class="go">(&#39;fc&#39;, &#39;percmax&#39;, &#39;damp&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">values</span>
<span class="go">(100.0, 5.0, 0.2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">lowers</span>
<span class="go">(50.0, 1.0, 0.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">uppers</span>
<span class="go">(200.0, 10.0, 0.5)</span>
</pre></div>
</div>
<p>All tuples reflect the current state of all rules:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">damp</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">0.3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">values</span>
<span class="go">(100.0, 5.0, 0.3)</span>
</pre></div>
</div>
<p>For the following examples, we perform a simulation run and assign
the values of the simulated time-series to the observed series:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">conditions</span> <span class="o">=</span> <span class="n">hp</span><span class="o">.</span><span class="n">conditions</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">hp</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">node</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">series</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">series</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">conditions</span> <span class="o">=</span> <span class="n">conditions</span>
</pre></div>
</div>
<p>As the agreement between the simulated and the “observed” time-series is
perfect all four gauges, method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.calculate_likelihood" title="hydpy.auxs.calibtools.CalibrationInterface.calculate_likelihood"><code class="xref py py-func docutils literal notranslate"><span class="pre">calculate_likelihood()</span></code></a>
returns the highest possible sum of four <a class="reference internal" href="statstools.html#hydpy.auxs.statstools.nse" title="hydpy.auxs.statstools.nse"><code class="xref py py-func docutils literal notranslate"><span class="pre">nse()</span></code></a> values and also stores it
under the attribute <cite>result</cite>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">round_</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">round_</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">calculate_likelihood</span><span class="p">())</span>
<span class="go">4.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">round_</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>
<span class="go">4.0</span>
</pre></div>
</div>
<p>When performing a manual calibration, it might be convenient to use
method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.apply_values" title="hydpy.auxs.calibtools.CalibrationInterface.apply_values"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_values()</span></code></a>.  To explain how it works,
we first show the values of the relevant parameters of some randomly
selected model instances:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span> <span class="o">=</span> <span class="n">hp</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">stream_lahn_1_lahn_2</span><span class="o">.</span><span class="n">model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span>
<span class="go">lag(0.583)</span>
<span class="go">damp(0.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">derived</span>
<span class="go">nmbsegments(1)</span>
<span class="go">c1(0.0)</span>
<span class="go">c3(0.0)</span>
<span class="go">c2(1.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">land</span> <span class="o">=</span> <span class="n">hp</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">land_lahn_1</span><span class="o">.</span><span class="n">model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">land</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">fc</span>
<span class="go">fc(206.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">land</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">percmax</span>
<span class="go">percmax(1.02978)</span>
</pre></div>
</div>
<p>Method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.apply_values" title="hydpy.auxs.calibtools.CalibrationInterface.apply_values"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_values()</span></code></a> of class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a>
calls the method <a class="reference internal" href="#hydpy.auxs.calibtools.Rule.apply_value" title="hydpy.auxs.calibtools.Rule.apply_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_value()</span></code></a> of all handled <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects, performs
some preparations (for example, it derives the values of the secondary
parameters (see parameter <a class="reference internal" href="hstream.html#hydpy.models.hstream.hstream_derived.NmbSegments" title="hydpy.models.hstream.hstream_derived.NmbSegments"><code class="xref py py-class docutils literal notranslate"><span class="pre">NmbSegments</span></code></a>), executes a
simulation run, calls method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.calculate_likelihood" title="hydpy.auxs.calibtools.CalibrationInterface.calculate_likelihood"><code class="xref py py-func docutils literal notranslate"><span class="pre">calculate_likelihood()</span></code></a>,
and returns the result:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">apply_values</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span>
<span class="go">lag(0.583)</span>
<span class="go">damp(0.3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">derived</span>
<span class="go">nmbsegments(1)</span>
<span class="go">c1(0.230769)</span>
<span class="go">c3(0.230769)</span>
<span class="go">c2(0.538462)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">land</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">fc</span>
<span class="go">fc(100.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">land</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">percmax</span>
<span class="go">percmax(5.0)</span>
</pre></div>
</div>
<p>Due to the changes in our parameter values, our simulation is not
“perfect” anymore:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">round_</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>
<span class="go">1.605136</span>
</pre></div>
</div>
<p>Use method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.reset_parameters" title="hydpy.auxs.calibtools.CalibrationInterface.reset_parameters"><code class="xref py py-func docutils literal notranslate"><span class="pre">reset_parameters()</span></code></a> to restore the initial
states of all affected parameters:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">reset_parameters</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span>
<span class="go">lag(0.583)</span>
<span class="go">damp(0.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">derived</span>
<span class="go">nmbsegments(1)</span>
<span class="go">c1(0.0)</span>
<span class="go">c3(0.0)</span>
<span class="go">c2(1.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">land</span> <span class="o">=</span> <span class="n">hp</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">land_lahn_1</span><span class="o">.</span><span class="n">model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">land</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">fc</span>
<span class="go">fc(206.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">land</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">percmax</span>
<span class="go">percmax(1.02978)</span>
</pre></div>
</div>
<p>Now we get the same “perfect” efficiency again:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">round_</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">calculate_likelihood</span><span class="p">())</span>
<span class="go">4.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">conditions</span> <span class="o">=</span> <span class="n">conditions</span>
</pre></div>
</div>
<p>Note the <cite>perform_simulation</cite> argument of method
<a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.apply_values" title="hydpy.auxs.calibtools.CalibrationInterface.apply_values"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_values()</span></code></a>, which allows changing the model parameter
values and updating the <a class="reference internal" href="hydpytools.html#hydpy.core.hydpytools.HydPy" title="hydpy.core.hydpytools.HydPy"><code class="xref py py-class docutils literal notranslate"><span class="pre">HydPy</span></code></a> object only without to trigger a simulation run
(and to calculate and return a new likelihood value):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">apply_values</span><span class="p">(</span><span class="n">perform_simulation</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span>
<span class="go">lag(0.583)</span>
<span class="go">damp(0.3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">derived</span>
<span class="go">nmbsegments(1)</span>
<span class="go">c1(0.230769)</span>
<span class="go">c3(0.230769)</span>
<span class="go">c2(0.538462)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">land</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">fc</span>
<span class="go">fc(100.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">land</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">percmax</span>
<span class="go">percmax(5.0)</span>
</pre></div>
</div>
<p>Optimisers, like those implemented in <a class="reference external" href="https://nlopt.readthedocs.io/en/latest/">NLopt</a>, often provide their new
parameter estimates via vectors.  Method
<a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.perform_calibrationstep" title="hydpy.auxs.calibtools.CalibrationInterface.perform_calibrationstep"><code class="xref py py-func docutils literal notranslate"><span class="pre">perform_calibrationstep()</span></code></a> accepts such vectors and
updates the handled <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects accordingly.  After that, it performs
the same steps as described for method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.apply_values" title="hydpy.auxs.calibtools.CalibrationInterface.apply_values"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_values()</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">round_</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">perform_calibrationstep</span><span class="p">([</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]))</span>
<span class="go">1.605136</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span>
<span class="go">lag(0.583)</span>
<span class="go">damp(0.3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">derived</span>
<span class="go">nmbsegments(1)</span>
<span class="go">c1(0.230769)</span>
<span class="go">c3(0.230769)</span>
<span class="go">c2(0.538462)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">land</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">fc</span>
<span class="go">fc(100.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">land</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">percmax</span>
<span class="go">percmax(5.0)</span>
</pre></div>
</div>
<p>Method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.perform_calibrationstep" title="hydpy.auxs.calibtools.CalibrationInterface.perform_calibrationstep"><code class="xref py py-func docutils literal notranslate"><span class="pre">perform_calibrationstep()</span></code></a> writes intermediate
results into a log file, if available.  Prepares it beforehand via method
<a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.prepare_logfile" title="hydpy.auxs.calibtools.CalibrationInterface.prepare_logfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">prepare_logfile()</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">ci</span><span class="o">.</span><span class="n">prepare_logfile</span><span class="p">(</span><span class="n">logfilepath</span><span class="o">=</span><span class="s2">&quot;example_calibration.log&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="n">objectivefunction</span><span class="o">=</span><span class="s2">&quot;NSE&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="n">documentation</span><span class="o">=</span><span class="s2">&quot;Just a doctest example.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To continue “manually”, we now can call method
<a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.update_logfile" title="hydpy.auxs.calibtools.CalibrationInterface.update_logfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">update_logfile()</span></code></a> to write the lastly calculated
efficiency and the corresponding calibration parameter values to the
log file:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">():</span>   
<span class="gp">... </span>    <span class="n">ci</span><span class="o">.</span><span class="n">update_logfile</span><span class="p">()</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;example_calibration.log&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go"># Just a doctest example.</span>

<span class="go">NSE           fc    percmax damp</span>
<span class="go">parameterstep None  1d      None</span>
<span class="go">1.605136      100.0 5.0     0.3</span>
</pre></div>
</div>
<p>For automatic calibration, one needs a calibration algorithm like the
following, which simply checks the lower and upper boundaries as well
as the initial values of all <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">find_max</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">lowers</span><span class="p">,</span> <span class="n">uppers</span><span class="p">,</span> <span class="n">inits</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">best_result</span> <span class="o">=</span> <span class="o">-</span><span class="mf">999.0</span>
<span class="gp">... </span>    <span class="n">best_parameters</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">values</span> <span class="ow">in</span> <span class="p">(</span><span class="n">lowers</span><span class="p">,</span> <span class="n">uppers</span><span class="p">,</span> <span class="n">inits</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">result</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="n">result</span> <span class="o">&gt;</span> <span class="n">best_result</span><span class="p">:</span>
<span class="gp">... </span>            <span class="n">best_result</span> <span class="o">=</span> <span class="n">result</span>
<span class="gp">... </span>            <span class="n">best_parameters</span> <span class="o">=</span> <span class="n">values</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">best_parameters</span>
</pre></div>
</div>
<p>Now we can assign method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.perform_calibrationstep" title="hydpy.auxs.calibtools.CalibrationInterface.perform_calibrationstep"><code class="xref py py-func docutils literal notranslate"><span class="pre">perform_calibrationstep()</span></code></a>
to this oversimplified optimiser, which then returns the best examined
calibration parameter values:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">find_max</span><span class="p">(</span><span class="n">function</span><span class="o">=</span><span class="n">ci</span><span class="o">.</span><span class="n">perform_calibrationstep</span><span class="p">,</span>
<span class="gp">... </span>             <span class="n">lowers</span><span class="o">=</span><span class="n">ci</span><span class="o">.</span><span class="n">lowers</span><span class="p">,</span>
<span class="gp">... </span>             <span class="n">uppers</span><span class="o">=</span><span class="n">ci</span><span class="o">.</span><span class="n">uppers</span><span class="p">,</span>
<span class="gp">... </span>             <span class="n">inits</span><span class="o">=</span><span class="n">ci</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="go">(200.0, 10.0, 0.5)</span>
</pre></div>
</div>
<p>The log file now contains one line for our old result and three lines
for the results of our optimiser:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">():</span>   
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;example_calibration.log&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go"># Just a doctest example.</span>

<span class="go">NSE           fc    percmax damp</span>
<span class="go">parameterstep None  1d      None</span>
<span class="go">1.605136      100.0 5.0     0.3</span>
<span class="go">-0.710211     50.0  1.0     0.0</span>
<span class="go">2.313934      200.0 10.0    0.5</span>
<span class="go">1.605136      100.0 5.0     0.3</span>
</pre></div>
</div>
<p>Class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> also provides method
<a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.read_logfile" title="hydpy.auxs.calibtools.CalibrationInterface.read_logfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_logfile()</span></code></a>, which automatically selects the
best calibration result.  Therefore, it needs to know that the highest
result is the best, which we indicate by setting argument <cite>maximisation</cite>
to <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">ci</span><span class="o">.</span><span class="n">read_logfile</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">logfilepath</span><span class="o">=</span><span class="s2">&quot;example_calibration.log&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">maximisation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">fc</span><span class="o">.</span><span class="n">value</span>
<span class="go">200.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">percmax</span><span class="o">.</span><span class="n">value</span>
<span class="go">10.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">damp</span><span class="o">.</span><span class="n">value</span>
<span class="go">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">round_</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>
<span class="go">2.313934</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">round_</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">apply_values</span><span class="p">())</span>
<span class="go">2.313934</span>
</pre></div>
</div>
<p>On the contrary, if we set argument <cite>maximisation</cite> to <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code>, method
<a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.read_logfile" title="hydpy.auxs.calibtools.CalibrationInterface.read_logfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_logfile()</span></code></a> returns the worst result in our
example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">ci</span><span class="o">.</span><span class="n">read_logfile</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">logfilepath</span><span class="o">=</span><span class="s2">&quot;example_calibration.log&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">maximisation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">fc</span><span class="o">.</span><span class="n">value</span>
<span class="go">50.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">percmax</span><span class="o">.</span><span class="n">value</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">damp</span><span class="o">.</span><span class="n">value</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">round_</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>
<span class="go">-0.710211</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">round_</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">apply_values</span><span class="p">())</span>
<span class="go">-0.710211</span>
</pre></div>
</div>
<p>To prevent errors due to different parameter step-sizes, method
<a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.read_logfile" title="hydpy.auxs.calibtools.CalibrationInterface.read_logfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_logfile()</span></code></a> raises the following error whenever
it detects inconsistencies:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">percmax</span><span class="o">.</span><span class="n">parameterstep</span> <span class="o">=</span> <span class="s2">&quot;2d&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">ci</span><span class="o">.</span><span class="n">read_logfile</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">logfilepath</span><span class="o">=</span><span class="s2">&quot;example_calibration.log&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">maximisation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">The current parameterstep of the `Replace` rule `percmax` (`2d`) does not agree with the one documentated in log file `example_calibration.log` (`1d`).</span>
</pre></div>
</div>
<p>Method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.read_logfile" title="hydpy.auxs.calibtools.CalibrationInterface.read_logfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_logfile()</span></code></a> reports inconsistent rule
names as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">remove_rules</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">percmax</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">ci</span><span class="o">.</span><span class="n">read_logfile</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">logfilepath</span><span class="o">=</span><span class="s2">&quot;example_calibration.log&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">maximisation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">The names of the rules handled by the actual calibration interface (damp and fc) do not agree with the names in the header of logfile `example_calibration.log` (damp, fc, and percmax).</span>
</pre></div>
</div>
<p>The last consistency check is optional.  Set argument <cite>check</cite> to <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code>
to force method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.read_logfile" title="hydpy.auxs.calibtools.CalibrationInterface.read_logfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_logfile()</span></code></a> to query all available
data instead of raising an error:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">add_rules</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;beta&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;beta&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">value</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">lower</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">upper</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">selections</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;complete&quot;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">fc</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">damp</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">ci</span><span class="o">.</span><span class="n">read_logfile</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">logfilepath</span><span class="o">=</span><span class="s2">&quot;example_calibration.log&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">maximisation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">check</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">value</span>
<span class="go">2.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">fc</span><span class="o">.</span><span class="n">value</span>
<span class="go">200.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">damp</span><span class="o">.</span><span class="n">value</span>
<span class="go">0.5</span>
</pre></div>
</div>
<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.conditions">
<code class="sig-name descname"><span class="pre">conditions</span></code><em class="property"><span class="pre">:</span> <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="typingtools.html#hydpy.core.typingtools.Vector" title="hydpy.core.typingtools.Vector"><span class="pre">hydpy.core.typingtools.Vector</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="typingtools.html#hydpy.core.typingtools.Matrix" title="hydpy.core.typingtools.Matrix"><span class="pre">hydpy.core.typingtools.Matrix</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.conditions" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="hydpytools.html#hydpy.core.hydpytools.HydPy.conditions" title="hydpy.core.hydpytools.HydPy.conditions"><code class="xref py py-const docutils literal notranslate"><span class="pre">conditions</span></code></a> of the given <a class="reference internal" href="hydpytools.html#hydpy.core.hydpytools.HydPy" title="hydpy.core.hydpytools.HydPy"><code class="xref py py-class docutils literal notranslate"><span class="pre">HydPy</span></code></a> object.</p>
<p><a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> queries the conditions during its initialisation 
and uses them later to reset all relevant conditions before each new 
simulation run.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.result">
<code class="sig-name descname"><span class="pre">result</span></code><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.result" title="Permalink to this definition">¶</a></dt>
<dd><p>The last result calculated by the target function.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.add_rules">
<code class="sig-name descname"><span class="pre">add_rules</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">rules</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">RuleType1</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibrationInterface.add_rules"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.add_rules" title="Permalink to this definition">¶</a></dt>
<dd><p>Add some <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects to the actual <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> object.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.examples</span> <span class="kn">import</span> <span class="n">prepare_full_example_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="p">,</span> <span class="n">pub</span><span class="p">,</span> <span class="n">TestIO</span> <span class="o">=</span> <span class="n">prepare_full_example_2</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">CalibrationInterface</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span> <span class="o">=</span> <span class="n">CalibrationInterface</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">hp</span><span class="o">=</span><span class="n">hp</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">targetfunction</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Replace</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">add_rules</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">value</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;percmax&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;percmax&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">value</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Note that method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.add_rules" title="hydpy.auxs.calibtools.CalibrationInterface.add_rules"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_rules()</span></code></a> might change the
number of <a class="reference internal" href="devicetools.html#hydpy.core.devicetools.Element" title="hydpy.core.devicetools.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> objects relevant for the <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a>
object:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">damp</span> <span class="o">=</span> <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;damp&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;damp&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hstream_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">_elements</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">add_rules</span><span class="p">(</span><span class="n">damp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">_elements</span><span class="p">)</span>
<span class="go">7</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.get_rule">
<code class="sig-name descname"><span class="pre">get_rule</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">RuleType2</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><span class="pre">hydpy.auxs.calibtools.Rule</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibrationInterface.get_rule"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.get_rule" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> object (of a specific type).</p>
<p>Method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.get_rule" title="hydpy.auxs.calibtools.CalibrationInterface.get_rule"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_rule()</span></code></a> is a more typesafe alternative to
simple keyword access. Besides the name of the required <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> object, pass
its subclass, to convince your IDE (and yourself) that the returned rule
follows this more specific type:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.examples</span> <span class="kn">import</span> <span class="n">prepare_full_example_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="p">,</span> <span class="n">pub</span><span class="p">,</span> <span class="n">TestIO</span> <span class="o">=</span> <span class="n">prepare_full_example_2</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Add</span><span class="p">,</span> <span class="n">CalibrationInterface</span><span class="p">,</span> <span class="n">nse</span><span class="p">,</span> <span class="n">Replace</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span> <span class="o">=</span> <span class="n">CalibrationInterface</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">hp</span><span class="o">=</span><span class="n">hp</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">targetfunction</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">nse</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="n">node</span><span class="p">)</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">hp</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">make_rules</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">rule</span><span class="o">=</span><span class="n">Replace</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span> <span class="s2">&quot;percmax&quot;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span> <span class="s2">&quot;percmax&quot;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">lowers</span><span class="o">=</span><span class="p">[</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">uppers</span><span class="o">=</span><span class="p">[</span><span class="mf">200.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">parametersteps</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">get_rule</span><span class="p">(</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span> <span class="n">Replace</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;fc&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">get_rule</span><span class="p">(</span><span class="s2">&quot;Fc&quot;</span><span class="p">,</span> <span class="n">Replace</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">The actual calibration interface does not handle a rule object named `Fc`.</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">get_rule</span><span class="p">(</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span> <span class="n">Replace</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;fc&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">get_rule</span><span class="p">(</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span> <span class="n">Add</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">The actual calibration interface does not handle a rule object named `fc` of type `Add`.</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.remove_rules">
<code class="sig-name descname"><span class="pre">remove_rules</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">rules</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">RuleType1</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibrationInterface.remove_rules"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.remove_rules" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove some <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects from the actual <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a>
object.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.examples</span> <span class="kn">import</span> <span class="n">prepare_full_example_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="p">,</span> <span class="n">pub</span><span class="p">,</span> <span class="n">TestIO</span> <span class="o">=</span> <span class="n">prepare_full_example_2</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">CalibrationInterface</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span> <span class="o">=</span> <span class="n">CalibrationInterface</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">hp</span><span class="o">=</span><span class="n">hp</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">targetfunction</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Replace</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">add_rules</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">value</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;percmax&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;percmax&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">value</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">Replace</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;damp&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;damp&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">value</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hstream_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>You can remove each rule either by passing itself or its name (note
that method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.remove_rules" title="hydpy.auxs.calibtools.CalibrationInterface.remove_rules"><code class="xref py py-func docutils literal notranslate"><span class="pre">remove_rules()</span></code></a> might change the
number of <a class="reference internal" href="devicetools.html#hydpy.core.devicetools.Element" title="hydpy.core.devicetools.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> objects relevant for the <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a>
object):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">_elements</span><span class="p">)</span>
<span class="go">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">fc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span> <span class="ow">in</span> <span class="n">ci</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;damp&quot;</span> <span class="ow">in</span> <span class="n">ci</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">remove_rules</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="s2">&quot;damp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span> <span class="ow">in</span> <span class="n">ci</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;damp&quot;</span> <span class="ow">in</span> <span class="n">ci</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">_elements</span><span class="p">)</span>
<span class="go">4</span>
</pre></div>
</div>
<p>Trying to remove a non-existing rule results in the following error:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">remove_rules</span><span class="p">(</span><span class="s2">&quot;fc&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">The actual calibration interface object does not handle a rule object named `fc`.</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.make_rules">
<code class="sig-name descname"><span class="pre">make_rules</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rule</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">RuleType1</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calibspecs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpecs" title="hydpy.auxs.calibtools.CalibSpecs"><span class="pre">CalibSpecs</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><span class="pre">hydpy.core.parametertools.Parameter</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lowers</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uppers</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parametersteps</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Period</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.9)"><span class="pre">datetime.timedelta</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Period</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.9)"><span class="pre">datetime.timedelta</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">module</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selections</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="selectiontools.html#hydpy.core.selectiontools.Selection" title="hydpy.core.selectiontools.Selection"><span class="pre">hydpy.core.selectiontools.Selection</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">product</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibrationInterface.make_rules"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.make_rules" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and store new <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects.</p>
<p>Please see the main documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> first,
from which we borrow the general setup:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.examples</span> <span class="kn">import</span> <span class="n">prepare_full_example_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="p">,</span> <span class="n">pub</span><span class="p">,</span> <span class="n">TestIO</span> <span class="o">=</span> <span class="n">prepare_full_example_2</span><span class="p">()</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">CalibrationInterface</span><span class="p">,</span> <span class="n">nse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span> <span class="o">=</span> <span class="n">CalibrationInterface</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">hp</span><span class="o">=</span><span class="n">hp</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">targetfunction</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">nse</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="n">node</span><span class="p">)</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">hp</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Here, we show only the supplemental features of method
<a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.make_rules" title="hydpy.auxs.calibtools.CalibrationInterface.make_rules"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_rules()</span></code></a> in some brevity.</p>
<p>Method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.make_rules" title="hydpy.auxs.calibtools.CalibrationInterface.make_rules"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_rules()</span></code></a> checks that all given
sequences have the same length:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Replace</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">make_rules</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">rule</span><span class="o">=</span><span class="n">Replace</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span> <span class="s2">&quot;percmax&quot;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span> <span class="s2">&quot;percmax&quot;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">lowers</span><span class="o">=</span><span class="p">[</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">uppers</span><span class="o">=</span><span class="p">[</span><span class="mf">200.0</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">parametersteps</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">When creating rules via method `make_rules`, all given sequences must be of equal length.</span>
</pre></div>
</div>
<p>The separate handling of the specifications of all calibration parameters
is error-prone.  For more safety and convenience, you can bundle all
specifications within a <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpecs" title="hydpy.auxs.calibtools.CalibSpecs"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpecs</span></code></a> object instead and pass them at once:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">CalibSpec</span><span class="p">,</span> <span class="n">CalibSpecs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span> <span class="o">=</span> <span class="n">CalibSpecs</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">200.0</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">CalibSpec</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;percmax&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">make_rules</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">rule</span><span class="o">=</span><span class="n">Replace</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">calibspecs</span><span class="o">=</span><span class="n">calibspecs</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parametersteps</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="p">[</span><span class="s2">&quot;percmax&quot;</span><span class="p">]</span>
<span class="go">Replace(</span>
<span class="go">    name=&quot;percmax&quot;,</span>
<span class="go">    parameter=&quot;percmax&quot;,</span>
<span class="go">    lower=1.0,</span>
<span class="go">    upper=10.0,</span>
<span class="go">    parameterstep=&quot;1d&quot;,</span>
<span class="go">    value=5.0,</span>
<span class="go">    model=&quot;hland_v1&quot;,</span>
<span class="go">    selections=(&quot;complete&quot;,),</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">remove_rules</span><span class="p">(</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span> <span class="s2">&quot;percmax&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>You are free also to use the individual arguments (e.g. <cite>names</cite>) to
override the related specifications defined by the <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpecs" title="hydpy.auxs.calibtools.CalibSpecs"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpecs</span></code></a> object:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">make_rules</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">rule</span><span class="o">=</span><span class="n">Replace</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">calibspecs</span><span class="o">=</span><span class="n">calibspecs</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">calibspecs</span><span class="o">.</span><span class="n">names</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">parametersteps</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="p">[</span><span class="s2">&quot;PERCMAX&quot;</span><span class="p">]</span>
<span class="go">Replace(</span>
<span class="go">    name=&quot;PERCMAX&quot;,</span>
<span class="go">    parameter=&quot;percmax&quot;,</span>
<span class="go">    lower=1.0,</span>
<span class="go">    upper=10.0,</span>
<span class="go">    parameterstep=&quot;1d&quot;,</span>
<span class="go">    value=5.0,</span>
<span class="go">    model=&quot;hland_v1&quot;,</span>
<span class="go">    selections=(&quot;complete&quot;,),</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">remove_rules</span><span class="p">(</span><span class="s2">&quot;FC&quot;</span><span class="p">,</span> <span class="s2">&quot;PERCMAX&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.make_rules" title="hydpy.auxs.calibtools.CalibrationInterface.make_rules"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_rules()</span></code></a> raises the following error if
you neither pass a <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpecs" title="hydpy.auxs.calibtools.CalibSpecs"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpecs</span></code></a> object nor the complete list of individual
calibration parameter specifications:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">make_rules</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">rule</span><span class="o">=</span><span class="n">Replace</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span> <span class="s2">&quot;percmax&quot;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span> <span class="s2">&quot;percmax&quot;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">lowers</span><span class="o">=</span><span class="p">[</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">parametersteps</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">When creating rules via method `make_rules`, you must pass a `CalibSpecs` object or provide complete information for the following arguments: names, parameters, values, lowers, and uppers.</span>
</pre></div>
</div>
<p>You can run method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.make_rules" title="hydpy.auxs.calibtools.CalibrationInterface.make_rules"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_rules()</span></code></a> in “product mode”,
meaning that its execution results in distinct <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects for all
combinations of the given calibration parameters and selections:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">make_rules</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">rule</span><span class="o">=</span><span class="n">Replace</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">calibspecs</span><span class="o">=</span><span class="n">calibspecs</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">selections</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;headwaters&quot;</span><span class="p">,</span> <span class="s2">&quot;nonheadwaters&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">product</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">tuple</span><span class="p">(</span><span class="n">par</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="n">par</span> <span class="ow">in</span> <span class="n">ci</span><span class="o">.</span><span class="n">parametertypes</span><span class="p">)</span>
<span class="go">(&#39;FC&#39;, &#39;PercMax&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">selections</span>
<span class="go">(&#39;headwaters&#39;, &#39;nonheadwaters&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="p">[</span><span class="s2">&quot;percmax_headwaters&quot;</span><span class="p">]</span>
<span class="go">Replace(</span>
<span class="go">    name=&quot;percmax_headwaters&quot;,</span>
<span class="go">    parameter=&quot;percmax&quot;,</span>
<span class="go">    lower=1.0,</span>
<span class="go">    upper=10.0,</span>
<span class="go">    parameterstep=&quot;1d&quot;,</span>
<span class="go">    value=5.0,</span>
<span class="go">    model=&quot;hland_v1&quot;,</span>
<span class="go">    selections=(&quot;headwaters&quot;,),</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="p">[</span><span class="s2">&quot;percmax_nonheadwaters&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">selections</span>
<span class="go">(&#39;nonheadwaters&#39;,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="p">[</span><span class="s2">&quot;fc_headwaters&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">selections</span>
<span class="go">(&#39;headwaters&#39;,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="p">[</span><span class="s2">&quot;fc_nonheadwaters&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">selections</span>
<span class="go">(&#39;nonheadwaters&#39;,)</span>
</pre></div>
</div>
<p>Trying to run in “product mode” without defining the target selections
results in the following error message:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">make_rules</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">rule</span><span class="o">=</span><span class="n">Replace</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">calibspecs</span><span class="o">=</span><span class="n">calibspecs</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parametersteps</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">product</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">When creating rules via method `make_rules` in &quot;product mode&quot; (with the argument `product` being `True`), you must supply all target selection objects via argument `selections`.</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.prepare_logfile">
<code class="sig-name descname"><span class="pre">prepare_logfile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logfilepath</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">objectivefunction</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'result'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">documentation</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibrationInterface.prepare_logfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.prepare_logfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare a log file.</p>
<p>Use argument <cite>objectivefunction</cite> to describe the <a class="reference internal" href="#hydpy.auxs.calibtools.TargetFunction" title="hydpy.auxs.calibtools.TargetFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TargetFunction</span></code></a> used
for calculating the efficiency and argument <cite>documentation</cite> to add
some information to the header of the logfile.</p>
<p>See the main documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> for
further information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.update_logfile">
<code class="sig-name descname"><span class="pre">update_logfile</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibrationInterface.update_logfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.update_logfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the current log file, if available.</p>
<p>See the main documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> for
further information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.read_logfile">
<code class="sig-name descname"><span class="pre">read_logfile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logfilepath</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximisation</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibrationInterface.read_logfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.read_logfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the log file with the given file path.</p>
<p>See the main documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> for
further information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.names">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">names</span></code><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.names" title="Permalink to this definition">¶</a></dt>
<dd><p>The names of all handled <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects.</p>
<p>See the main documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> for
further information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.values">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">values</span></code><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.values" title="Permalink to this definition">¶</a></dt>
<dd><p>The values of all handled <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects.</p>
<p>See the main documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> for
further information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.lowers">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">lowers</span></code><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.lowers" title="Permalink to this definition">¶</a></dt>
<dd><p>The lower boundaries of all handled <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects.</p>
<p>See the main documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> for
further information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.uppers">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">uppers</span></code><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.uppers" title="Permalink to this definition">¶</a></dt>
<dd><p>The upper boundaries of all handled <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects.</p>
<p>See the main documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> for
further information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.selections">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">selections</span></code><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.selections" title="Permalink to this definition">¶</a></dt>
<dd><p>The names of all <a class="reference internal" href="selectiontools.html#hydpy.core.selectiontools.Selection" title="hydpy.core.selectiontools.Selection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selection</span></code></a> objects addressed at least one of the
handled <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects.</p>
<p>See the documentation on method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.make_rules" title="hydpy.auxs.calibtools.CalibrationInterface.make_rules"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_rules()</span></code></a> for
further information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.parametertypes">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">parametertypes</span></code><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.parametertypes" title="Permalink to this definition">¶</a></dt>
<dd><p>The types of all <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> objects addressed by at least one of the
handled <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects.</p>
<p>See the documentation on method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.make_rules" title="hydpy.auxs.calibtools.CalibrationInterface.make_rules"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_rules()</span></code></a> for
further information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.apply_values">
<code class="sig-name descname"><span class="pre">apply_values</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">perform_simulation</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibrationInterface.apply_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.apply_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply all current calibration parameter values on all relevant
parameters.</p>
<p>Set argument <cite>perform_simulation</cite> to <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code> to only change the
actual parameter values and update the <a class="reference internal" href="hydpytools.html#hydpy.core.hydpytools.HydPy" title="hydpy.core.hydpytools.HydPy"><code class="xref py py-class docutils literal notranslate"><span class="pre">HydPy</span></code></a> object without
performing a simulation run.</p>
<p>See the main documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> for
further information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.reset_parameters">
<code class="sig-name descname"><span class="pre">reset_parameters</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibrationInterface.reset_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.reset_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all relevant parameters to their original states.</p>
<p>See the main documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> for
further information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.calculate_likelihood">
<code class="sig-name descname"><span class="pre">calculate_likelihood</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibrationInterface.calculate_likelihood"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.calculate_likelihood" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the defined <a class="reference internal" href="#hydpy.auxs.calibtools.TargetFunction" title="hydpy.auxs.calibtools.TargetFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TargetFunction</span></code></a> and return the result.</p>
<p>See the main documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> for
further information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.perform_calibrationstep">
<code class="sig-name descname"><span class="pre">perform_calibrationstep</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibrationInterface.perform_calibrationstep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.perform_calibrationstep" title="Permalink to this definition">¶</a></dt>
<dd><p>Update all calibration parameters with the given values, update
the <a class="reference internal" href="hydpytools.html#hydpy.core.hydpytools.HydPy" title="hydpy.core.hydpytools.HydPy"><code class="xref py py-class docutils literal notranslate"><span class="pre">HydPy</span></code></a> object, perform a simulation run, and calculate and
return the achieved efficiency.</p>
<p>See the main documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> for
further information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibrationInterface.print_table">
<code class="sig-name descname"><span class="pre">print_table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parametertypes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><span class="pre">hydpy.core.parametertools.Parameter</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selections</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">('lower',</span> <span class="pre">'upper')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fillvalue</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'\t'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">TextIO</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibrationInterface.print_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibrationInterface.print_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the current calibration parameter values in a table format.</p>
<p>Please see the documentation on method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.make_rules" title="hydpy.auxs.calibtools.CalibrationInterface.make_rules"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_rules()</span></code></a>
first, from which we borrow the general setup:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.examples</span> <span class="kn">import</span> <span class="n">prepare_full_example_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="p">,</span> <span class="n">pub</span><span class="p">,</span> <span class="n">TestIO</span> <span class="o">=</span> <span class="n">prepare_full_example_2</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">CalibSpec</span><span class="p">,</span> <span class="n">CalibSpecs</span><span class="p">,</span> <span class="n">CalibrationInterface</span><span class="p">,</span> <span class="n">nse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span> <span class="o">=</span> <span class="n">CalibrationInterface</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">hp</span><span class="o">=</span><span class="n">hp</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">targetfunction</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">nse</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="n">node</span><span class="p">)</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">hp</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span> <span class="o">=</span> <span class="n">CalibSpecs</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;fc&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">200.0</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">CalibSpec</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;percmax&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">make_rules</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">rule</span><span class="o">=</span><span class="n">Replace</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">calibspecs</span><span class="o">=</span><span class="n">calibspecs</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">selections</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;headwaters&quot;</span><span class="p">,</span> <span class="s2">&quot;nonheadwaters&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">product</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>First, we change the values of two <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects to clarify that all
values appear in the correct table cells:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="p">[</span><span class="s2">&quot;fc_headwaters&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">200.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="p">[</span><span class="s2">&quot;percmax_nonheadwaters&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">10.0</span>
</pre></div>
</div>
<p>By default, method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.print_table" title="hydpy.auxs.calibtools.CalibrationInterface.print_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">print_table()</span></code></a> prints the values
of all handled <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects.  We varies the target control parameters on
the first axis and the target selections on the second axis.  Row two and
three contain the (identical) lower and upper boundary values corresponding
to the respective control parameters:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">print_table</span><span class="p">()</span>  
<span class="go">         lower  upper  headwaters  nonheadwaters</span>
<span class="go">FC       50.0   200.0  200.0       100.0</span>
<span class="go">PercMax  1.0    10.0   5.0         10.0</span>
</pre></div>
</div>
<p>For non-identical boundary values, method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.print_table" title="hydpy.auxs.calibtools.CalibrationInterface.print_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">print_table()</span></code></a>
prints fill values in the relevant cells.  Besides this, the following
example shows how to define alternative titles for the boundary value columns:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="p">[</span><span class="s2">&quot;fc_headwaters&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span> <span class="o">=</span> <span class="mf">60.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="p">[</span><span class="s2">&quot;percmax_nonheadwaters&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span> <span class="o">=</span> <span class="mf">20.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">print_table</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">))</span>  
<span class="go">         min  max    headwaters  nonheadwaters</span>
<span class="go">FC       /    200.0  200.0       100.0</span>
<span class="go">PercMax  1.0  /      5.0         10.0</span>
</pre></div>
</div>
<p>Pass <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> to argument <cite>bounds</cite> to omit writing any boundary value column:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">print_table</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>  
<span class="go">         headwaters  nonheadwaters</span>
<span class="go">FC       200.0       100.0</span>
<span class="go">PercMax  5.0         10.0</span>
</pre></div>
</div>
<p>The next example shows how to change the tabulated target parameters
and selections.  Method <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface.print_table" title="hydpy.auxs.calibtools.CalibrationInterface.print_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">print_table()</span></code></a> uses the
(given alternative) fill value for each parameter-selection-combination
not met by any of the available <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models.hland.hland_control</span> <span class="kn">import</span> <span class="n">CFlux</span><span class="p">,</span> <span class="n">PercMax</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">print_table</span><span class="p">(</span>  
<span class="gp">... </span>    <span class="n">parametertypes</span><span class="o">=</span><span class="p">(</span><span class="n">PercMax</span><span class="p">,</span> <span class="n">CFlux</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">selections</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;streams&quot;</span><span class="p">,</span> <span class="s2">&quot;headwaters&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">bounds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">fillvalue</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
<span class="go">         streams  headwaters</span>
<span class="go">PercMax  -        5.0</span>
<span class="go">CFlux    -        -</span>
</pre></div>
</div>
<p>Note that the value of the same calibration parameter might appear
multiple times when targeting multiple <a class="reference internal" href="selectiontools.html#hydpy.core.selectiontools.Selection" title="hydpy.core.selectiontools.Selection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selection</span></code></a> objects:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="p">[</span><span class="s2">&quot;fc_headwaters&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">selections</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;headwaters&quot;</span><span class="p">,</span> <span class="s2">&quot;streams&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ci</span><span class="o">.</span><span class="n">print_table</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>  
<span class="go">         headwaters  nonheadwaters  streams</span>
<span class="go">FC       200.0       100.0              200.0</span>
<span class="go">PercMax  5.0         10.0               /</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hydpy.auxs.calibtools.ReplaceIUH">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.auxs.calibtools.</span></code><code class="sig-name descname"><span class="pre">ReplaceIUH</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><span class="pre">hydpy.core.parametertools.Parameter</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><span class="pre">hydpy.core.parametertools.Parameter</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">-</span> <span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameterstep</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Period</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.9)"><span class="pre">datetime.timedelta</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selections</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="selectiontools.html#hydpy.core.selectiontools.Selection" title="hydpy.core.selectiontools.Selection"><span class="pre">hydpy.core.selectiontools.Selection</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">module</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#ReplaceIUH"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.ReplaceIUH" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">hydpy.auxs.calibtools.Rule</span></code></a></p>
<p>A <a class="reference internal" href="#hydpy.auxs.calibtools.Rule" title="hydpy.auxs.calibtools.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> class specialised for <a class="reference internal" href="iuhtools.html#hydpy.auxs.iuhtools.IUH" title="hydpy.auxs.iuhtools.IUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">IUH</span></code></a> parameters.</p>
<p>Usually, it is not a good idea to calibrate the AR and MA coefficients
of parameters like <a class="reference internal" href="arma.html#hydpy.models.arma.arma_control.Responses" title="hydpy.models.arma.arma_control.Responses"><code class="xref py py-class docutils literal notranslate"><span class="pre">Responses</span></code></a> of model <a class="reference internal" href="arma_v1.html#module-hydpy.models.arma_v1" title="hydpy.models.arma_v1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">arma_v1</span></code></a> individually.
Instead, we need to calibrate the few coefficients of the underlying <a class="reference internal" href="iuhtools.html#hydpy.auxs.iuhtools.IUH" title="hydpy.auxs.iuhtools.IUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">IUH</span></code></a>
objects, which calculate the ARMA coefficients.  Class <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH" title="hydpy.auxs.calibtools.ReplaceIUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplaceIUH</span></code></a> helps
to accomplish this task.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Class <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH" title="hydpy.auxs.calibtools.ReplaceIUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplaceIUH</span></code></a> is still under development.  For example, it
does not address the possibility of different ARMA coefficients
related to different discharge thresholds.  Hence, the usage
of class <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH" title="hydpy.auxs.calibtools.ReplaceIUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplaceIUH</span></code></a> might change in the future.</p>
</div>
<p>So far, there is no example project containing <a class="reference internal" href="arma_v1.html#module-hydpy.models.arma_v1" title="hydpy.models.arma_v1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">arma_v1</span></code></a> models
instances.  Therefore, we generate a simple one consisting of two
<a class="reference internal" href="devicetools.html#hydpy.core.devicetools.Element" title="hydpy.core.devicetools.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> objects only:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Element</span><span class="p">,</span> <span class="n">prepare_model</span><span class="p">,</span> <span class="n">Selection</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element1</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;element1&quot;</span><span class="p">,</span> <span class="n">inlets</span><span class="o">=</span><span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">outlets</span><span class="o">=</span><span class="s2">&quot;out1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element2</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;element2&quot;</span><span class="p">,</span> <span class="n">inlets</span><span class="o">=</span><span class="s2">&quot;in2&quot;</span><span class="p">,</span> <span class="n">outlets</span><span class="o">=</span><span class="s2">&quot;out2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">complete</span> <span class="o">=</span> <span class="n">Selection</span><span class="p">(</span><span class="s2">&quot;complete&quot;</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="p">[</span><span class="n">element1</span><span class="p">,</span> <span class="n">element2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element1</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">prepare_model</span><span class="p">(</span><span class="s2">&quot;arma_v1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element2</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">prepare_model</span><span class="p">(</span><span class="s2">&quot;arma_v1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We focus on class <a class="reference internal" href="iuhtools.html#hydpy.auxs.iuhtools.TranslationDiffusionEquation" title="hydpy.auxs.iuhtools.TranslationDiffusionEquation"><code class="xref py py-class docutils literal notranslate"><span class="pre">TranslationDiffusionEquation</span></code></a> in the following.
We create two separate instances and use to calculate the response
coefficients of both <a class="reference internal" href="arma_v1.html#module-hydpy.models.arma_v1" title="hydpy.models.arma_v1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">arma_v1</span></code></a> instances:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">TranslationDiffusionEquation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tde1</span> <span class="o">=</span> <span class="n">TranslationDiffusionEquation</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mf">15.0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tde2</span> <span class="o">=</span> <span class="n">TranslationDiffusionEquation</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mf">15.0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">responses</span><span class="p">(</span><span class="n">tde1</span><span class="o">.</span><span class="n">arma</span><span class="o">.</span><span class="n">coefs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">responses</span>
<span class="go">responses(th_0_0=((0.906536, -0.197555, 0.002128, 0.000276),</span>
<span class="go">                  (0.842788, -0.631499, 0.061685, 0.015639, 0.0, 0.0, 0.0,</span>
<span class="go">                   -0.000001, 0.0, 0.0, 0.0, 0.0)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element2</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">responses</span><span class="p">(</span><span class="n">tde2</span><span class="o">.</span><span class="n">arma</span><span class="o">.</span><span class="n">coefs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element2</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">responses</span>
<span class="go">responses(th_0_0=((1.298097, -0.536702, 0.072903, -0.001207, -0.00004),</span>
<span class="go">                  (0.699212, -0.663835, 0.093935, 0.046177, -0.00854)))</span>
</pre></div>
</div>
<p>Next, we define one <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH" title="hydpy.auxs.calibtools.ReplaceIUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplaceIUH</span></code></a> for modifying parameter
<a class="reference internal" href="iuhtools.html#hydpy.auxs.iuhtools.TranslationDiffusionEquation.u" title="hydpy.auxs.iuhtools.TranslationDiffusionEquation.u"><code class="xref py py-const docutils literal notranslate"><span class="pre">u</span></code></a> and another one for changing
<a class="reference internal" href="iuhtools.html#hydpy.auxs.iuhtools.TranslationDiffusionEquation.d" title="hydpy.auxs.iuhtools.TranslationDiffusionEquation.d"><code class="xref py py-const docutils literal notranslate"><span class="pre">d</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">ReplaceIUH</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">ReplaceIUH</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;u&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;responses&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">lower</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">upper</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">selections</span><span class="o">=</span><span class="p">[</span><span class="n">complete</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">ReplaceIUH</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;responses&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">value</span><span class="o">=</span><span class="mf">15.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">lower</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">upper</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">selections</span><span class="o">=</span><span class="p">[</span><span class="n">complete</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>We add and thereby connect the <a class="reference internal" href="devicetools.html#hydpy.core.devicetools.Element" title="hydpy.core.devicetools.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> and <a class="reference internal" href="iuhtools.html#hydpy.auxs.iuhtools.TranslationDiffusionEquation" title="hydpy.auxs.iuhtools.TranslationDiffusionEquation"><code class="xref py py-class docutils literal notranslate"><span class="pre">TranslationDiffusionEquation</span></code></a>
objects to both <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH" title="hydpy.auxs.calibtools.ReplaceIUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplaceIUH</span></code></a> objects via method <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH.add_iuhs" title="hydpy.auxs.calibtools.ReplaceIUH.add_iuhs"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_iuhs()</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">add_iuhs</span><span class="p">(</span><span class="n">element1</span><span class="o">=</span><span class="n">tde1</span><span class="p">,</span> <span class="n">element2</span><span class="o">=</span><span class="n">tde2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">add_iuhs</span><span class="p">(</span><span class="n">element1</span><span class="o">=</span><span class="n">tde1</span><span class="p">,</span> <span class="n">element2</span><span class="o">=</span><span class="n">tde2</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that method <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH.add_iuhs" title="hydpy.auxs.calibtools.ReplaceIUH.add_iuhs"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_iuhs()</span></code></a> enforces to add all <a class="reference internal" href="iuhtools.html#hydpy.auxs.iuhtools.IUH" title="hydpy.auxs.iuhtools.IUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">IUH</span></code></a> objects
at ones to avoid inconsistencies that might be hard to track later:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">add_iuhs</span><span class="p">(</span><span class="n">element1</span><span class="o">=</span><span class="n">tde1</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">While trying to add `IUH` objects to the `ReplaceIUH` rule `d`, the following error occurred: The given elements (element1) do not agree with the complete set of relevant elements (element1 and element2).</span>
</pre></div>
</div>
<p>By default, each <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH" title="hydpy.auxs.calibtools.ReplaceIUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplaceIUH</span></code></a> objects triggers the calculation of the ARMA
coefficients during the execution of its method <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH.apply_value" title="hydpy.auxs.calibtools.ReplaceIUH.apply_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_value()</span></code></a>,
which can be a waste of computation time if we want to calibrate multiple
<a class="reference internal" href="iuhtools.html#hydpy.auxs.iuhtools.IUH" title="hydpy.auxs.iuhtools.IUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">IUH</span></code></a> coefficients.  To save computation time in such cases, set option
<a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH.update_parameters" title="hydpy.auxs.calibtools.ReplaceIUH.update_parameters"><code class="xref py py-attr docutils literal notranslate"><span class="pre">update_parameters</span></code></a> to <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code> for all except the lastly
executed <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH" title="hydpy.auxs.calibtools.ReplaceIUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplaceIUH</span></code></a> objects:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">update_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p>Now, changing the value of rule <cite>u</cite> and calling method
<a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH.apply_value" title="hydpy.auxs.calibtools.ReplaceIUH.apply_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_value()</span></code></a> does not affect the coefficients of both
<a class="reference internal" href="arma.html#hydpy.models.arma.arma_control.Responses" title="hydpy.models.arma.arma_control.Responses"><code class="xref py py-class docutils literal notranslate"><span class="pre">Responses</span></code></a> parameters:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">apply_value</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tde1</span>
<span class="go">TranslationDiffusionEquation(d=15.0, u=10.0, x=1.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">responses</span>
<span class="go">responses(th_0_0=((0.906536, -0.197555, 0.002128, 0.000276),</span>
<span class="go">                  (0.842788, -0.631499, 0.061685, 0.015639, 0.0, 0.0, 0.0,</span>
<span class="go">                   -0.000001, 0.0, 0.0, 0.0, 0.0)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tde2</span>
<span class="go">TranslationDiffusionEquation(d=15.0, u=10.0, x=2.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element2</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">responses</span>
<span class="go">responses(th_0_0=((1.298097, -0.536702, 0.072903, -0.001207, -0.00004),</span>
<span class="go">                  (0.699212, -0.663835, 0.093935, 0.046177, -0.00854)))</span>
</pre></div>
</div>
<p>On the other side, calling method <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH.apply_value" title="hydpy.auxs.calibtools.ReplaceIUH.apply_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_value()</span></code></a> of rule <cite>d</cite>
does activate the freshly set value of rule <cite>d</cite> and the previously set
value of rule <cite>u</cite>, as well:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">50.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">apply_value</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tde1</span>
<span class="go">TranslationDiffusionEquation(d=50.0, u=10.0, x=1.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">responses</span>
<span class="go">responses(th_0_0=((0.811473, -0.15234, -0.000256, 0.000177),</span>
<span class="go">                  (0.916619, -0.670781, 0.087185, 0.007923)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tde2</span>
<span class="go">TranslationDiffusionEquation(d=50.0, u=10.0, x=2.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element2</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">responses</span>
<span class="go">responses(th_0_0=((0.832237, -0.167205, 0.002007, 0.000184),</span>
<span class="go">                  (0.836513, -0.555399, 0.037628, 0.014035)))</span>
</pre></div>
</div>
<p>Use method <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH.reset_parameters" title="hydpy.auxs.calibtools.ReplaceIUH.reset_parameters"><code class="xref py py-func docutils literal notranslate"><span class="pre">reset_parameters()</span></code></a> to restore the original
ARMA coefficients:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">reset_parameters</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">responses</span>
<span class="go">responses(th_0_0=((0.906536, -0.197555, 0.002128, 0.000276),</span>
<span class="go">                  (0.842788, -0.631499, 0.061685, 0.015639, 0.0, 0.0, 0.0,</span>
<span class="go">                   -0.000001, 0.0, 0.0, 0.0, 0.0)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element2</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">responses</span>
<span class="go">responses(th_0_0=((1.298097, -0.536702, 0.072903, -0.001207, -0.00004),</span>
<span class="go">                  (0.699212, -0.663835, 0.093935, 0.046177, -0.00854)))</span>
</pre></div>
</div>
<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.ReplaceIUH.update_parameters">
<code class="sig-name descname"><span class="pre">update_parameters</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a></em><em class="property"> <span class="pre">=</span> <span class="pre">True</span></em><a class="headerlink" href="#hydpy.auxs.calibtools.ReplaceIUH.update_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag indicating whether method <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH.apply_value" title="hydpy.auxs.calibtools.ReplaceIUH.apply_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_value()</span></code></a> should 
calculate the <a class="reference internal" href="armatools.html#hydpy.auxs.armatools.ARMA.coefs" title="hydpy.auxs.armatools.ARMA.coefs"><code class="xref py py-const docutils literal notranslate"><span class="pre">coefs</span></code></a> and pass them to the relevant model parameter
or not.</p>
<p>Set this flag to <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code> for the first <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH" title="hydpy.auxs.calibtools.ReplaceIUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplaceIUH</span></code></a> object when another
one handles the same elements and is applied afterwards.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.ReplaceIUH.add_iuhs">
<code class="sig-name descname"><span class="pre">add_iuhs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">iuhs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="iuhtools.html#hydpy.auxs.iuhtools.IUH" title="hydpy.auxs.iuhtools.IUH"><span class="pre">hydpy.auxs.iuhtools.IUH</span></a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#ReplaceIUH.add_iuhs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.ReplaceIUH.add_iuhs" title="Permalink to this definition">¶</a></dt>
<dd><p>Add one <a class="reference internal" href="iuhtools.html#hydpy.auxs.iuhtools.IUH" title="hydpy.auxs.iuhtools.IUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">IUH</span></code></a> object for each relevant <a class="reference internal" href="devicetools.html#hydpy.core.devicetools.Element" title="hydpy.core.devicetools.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> objects.</p>
<p>See the main documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH" title="hydpy.auxs.calibtools.ReplaceIUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplaceIUH</span></code></a> for further
information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.ReplaceIUH.apply_value">
<code class="sig-name descname"><span class="pre">apply_value</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#ReplaceIUH.apply_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.ReplaceIUH.apply_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply all current calibration parameter values on all relevant
<a class="reference internal" href="iuhtools.html#hydpy.auxs.iuhtools.IUH" title="hydpy.auxs.iuhtools.IUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">IUH</span></code></a> objects and eventually update the ARMA coefficients of the
related parameter.</p>
<p>See the main documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibrationInterface" title="hydpy.auxs.calibtools.CalibrationInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationInterface</span></code></a> for
further information.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.ReplaceIUH.reset_parameters">
<code class="sig-name descname"><span class="pre">reset_parameters</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#ReplaceIUH.reset_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.ReplaceIUH.reset_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all relevant parameter objects to their original states.</p>
<p>See the main documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.ReplaceIUH" title="hydpy.auxs.calibtools.ReplaceIUH"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReplaceIUH</span></code></a> for further
information.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hydpy.auxs.calibtools.CalibSpec">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.auxs.calibtools.</span></code><code class="sig-name descname"><span class="pre">CalibSpec</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">-</span> <span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameterstep</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Period</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.9)"><span class="pre">datetime.timedelta</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibSpec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibSpec" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Helper class for specifying the properties of a single calibration parameter.</p>
<p>So far, class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpec</span></code></a> does not provide much functionality, besides checking
upon initialisation that the given default and boundary values are consistent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">CalibSpec</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CalibSpec</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;par1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">CalibSpec(name=&quot;par1&quot;, default=1.0)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CalibSpec</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;par1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">lower</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">The following values given for calibration parameter `par1` are not consistent: default=1.0, lower=2.0, upper=inf.</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CalibSpec</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;par1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">upper</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">The following values given for calibration parameter `par1` are not consistent: default=1.0, lower=-inf, upper=0.5.</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CalibSpec</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;par1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">lower</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">upper</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">CalibSpec(name=&quot;par1&quot;, default=1.0, lower=0.0, upper=2.0)</span>
</pre></div>
</div>
<p>Use the <cite>parameterstep</cite> argument for time-dependent calibration parameters:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CalibSpec</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;par1&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">3.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">lower</span><span class="o">=</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">3.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">upper</span><span class="o">=</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">3.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">CalibSpec(</span>
<span class="go">    name=&quot;par1&quot;, default=0.333333, lower=0.333333, upper=0.333333, parameterstep=&quot;1d&quot;</span>
<span class="go">)</span>
</pre></div>
</div>
<p>See the documentation on class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpecs" title="hydpy.auxs.calibtools.CalibSpecs"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpecs</span></code></a> for further information.</p>
<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.CalibSpec.name">
<code class="sig-name descname"><span class="pre">name</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.CalibSpec.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the calibration parameter.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.CalibSpec.default">
<code class="sig-name descname"><span class="pre">default</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.CalibSpec.default" title="Permalink to this definition">¶</a></dt>
<dd><p>The default value of the calibration parameter.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.CalibSpec.lower">
<code class="sig-name descname"><span class="pre">lower</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.CalibSpec.lower" title="Permalink to this definition">¶</a></dt>
<dd><p>Lower bound of the allowed calibration parameter value.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.CalibSpec.upper">
<code class="sig-name descname"><span class="pre">upper</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></em><a class="headerlink" href="#hydpy.auxs.calibtools.CalibSpec.upper" title="Permalink to this definition">¶</a></dt>
<dd><p>Upper bound of the allowed calibration parameter value.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.auxs.calibtools.CalibSpec.parameterstep">
<code class="sig-name descname"><span class="pre">parameterstep</span></code><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="timetools.html#hydpy.core.timetools.Period" title="hydpy.core.timetools.Period"><span class="pre">hydpy.core.timetools.Period</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#hydpy.auxs.calibtools.CalibSpec.parameterstep" title="Permalink to this definition">¶</a></dt>
<dd><p>The parameter step size to be set before applying the defined 
calibration parameter values.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hydpy.auxs.calibtools.CalibSpecs">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.auxs.calibtools.</span></code><code class="sig-name descname"><span class="pre">CalibSpecs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">parspecs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><span class="pre">hydpy.auxs.calibtools.CalibSpec</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibSpecs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibSpecs" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Collection class for handling <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpec</span></code></a> objects.</p>
<p>The primary purpose of class <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpecs" title="hydpy.auxs.calibtools.CalibSpecs"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpecs</span></code></a> is to handle multiple <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpec</span></code></a>
objects and to make all their attributes accessible in the same order. See
property <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpecs.names" title="hydpy.auxs.calibtools.CalibSpecs.names"><code class="xref py py-const docutils literal notranslate"><span class="pre">names</span></code></a> as one example.  Note that all such properties are
sorted in the order or the attachment of the different <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpec</span></code></a> objects:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">CalibSpec</span><span class="p">,</span> <span class="n">CalibSpecs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span> <span class="o">=</span> <span class="n">CalibSpecs</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">CalibSpec</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;third&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=-</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;second&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mf">0.0</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;first&quot;</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">2.0</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span>
<span class="go">CalibSpecs(</span>
<span class="go">    CalibSpec(name=&quot;third&quot;, default=3.0, lower=-10.0, upper=10.0, parameterstep=&quot;1d&quot;),</span>
<span class="go">    CalibSpec(name=&quot;second&quot;, default=1.0, lower=0.0),</span>
<span class="go">    CalibSpec(name=&quot;first&quot;, default=2.0, upper=2.0),</span>
<span class="go">)</span>
</pre></div>
</div>
<p>You can query and remove <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpec</span></code></a> objects via keyword and attribute access:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">calibspecs</span><span class="p">)</span>
<span class="go">CalibSpecs(&quot;third&quot;, &quot;second&quot;, &quot;first&quot;)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">third</span> <span class="o">=</span> <span class="n">calibspecs</span><span class="p">[</span><span class="s2">&quot;third&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">third</span> <span class="ow">in</span> <span class="n">calibspecs</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">calibspecs</span><span class="p">[</span><span class="s2">&quot;third&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">third</span> <span class="ow">in</span> <span class="n">calibspecs</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span><span class="p">[</span><span class="s2">&quot;third&quot;</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">KeyError</span>: <span class="n">&#39;The current `CalibSpecs` object does not handle a `CalibSpec` object named `third`.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">calibspecs</span><span class="p">[</span><span class="s2">&quot;third&quot;</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">KeyError</span>: <span class="n">&#39;The current `CalibSpecs` object does not handle a `CalibSpec` object named `third`.&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">second</span> <span class="o">=</span> <span class="n">calibspecs</span><span class="o">.</span><span class="n">second</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;second&quot;</span> <span class="ow">in</span> <span class="n">calibspecs</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">calibspecs</span><span class="o">.</span><span class="n">second</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;second&quot;</span> <span class="ow">in</span> <span class="n">calibspecs</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span><span class="o">.</span><span class="n">second</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">AttributeError</span>: <span class="n">The current `CalibSpecs` object does neither handle a `CalibSpec` object nor a normal attribute named `second`.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">calibspecs</span><span class="o">.</span><span class="n">second</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">AttributeError</span>: <span class="n">The current `CalibSpecs` object does not handle a `CalibSpec` object named `second`.</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">calibspecs</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
<p>Now we can re-append the previously removed <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpec</span></code></a> objects (and thereby
bring the order of attachment in agreement with the <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpec</span></code></a> names):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">second</span><span class="p">,</span> <span class="n">third</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">calibspec</span> <span class="ow">in</span> <span class="n">calibspecs</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">calibspec</span><span class="p">)</span>
<span class="go">first</span>
<span class="go">second</span>
<span class="go">third</span>
</pre></div>
</div>
<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibSpecs.append">
<code class="sig-name descname"><span class="pre">append</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">calibspecs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><span class="pre">hydpy.auxs.calibtools.CalibSpec</span></a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/auxs/calibtools.html#CalibSpecs.append"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.auxs.calibtools.CalibSpecs.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Append one or more <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpec</span></code></a> objects.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">CalibSpec</span><span class="p">,</span> <span class="n">CalibSpecs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">third</span> <span class="o">=</span> <span class="n">CalibSpec</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;third&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=-</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first</span> <span class="o">=</span> <span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">second</span> <span class="o">=</span> <span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;second&quot;</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span> <span class="o">=</span> <span class="n">CalibSpecs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">first</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">second</span><span class="p">,</span> <span class="n">third</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span>
<span class="go">CalibSpecs(</span>
<span class="go">    CalibSpec(name=&quot;first&quot;, default=1.0, lower=0.0),</span>
<span class="go">    CalibSpec(name=&quot;second&quot;, default=2.0, upper=2.0),</span>
<span class="go">    CalibSpec(name=&quot;third&quot;, default=3.0, lower=-10.0, upper=10.0, parameterstep=&quot;1d&quot;),</span>
<span class="go">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibSpecs.names">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">names</span></code><a class="headerlink" href="#hydpy.auxs.calibtools.CalibSpecs.names" title="Permalink to this definition">¶</a></dt>
<dd><p>The names of all <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpec</span></code></a> objects in the order of attachment.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">CalibSpec</span><span class="p">,</span> <span class="n">CalibSpecs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">third</span> <span class="o">=</span> <span class="n">CalibSpec</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;third&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=-</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span> <span class="o">=</span> <span class="n">CalibSpecs</span><span class="p">(</span><span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mf">0.0</span><span class="p">),</span>
<span class="gp">... </span>                        <span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;second&quot;</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">2.0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">third</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span><span class="o">.</span><span class="n">names</span>
<span class="go">(&#39;first&#39;, &#39;second&#39;, &#39;third&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibSpecs.defaults">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">defaults</span></code><a class="headerlink" href="#hydpy.auxs.calibtools.CalibSpecs.defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>The default values of all <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpec</span></code></a> objects in the order of attachment.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">CalibSpec</span><span class="p">,</span> <span class="n">CalibSpecs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">third</span> <span class="o">=</span> <span class="n">CalibSpec</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;third&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=-</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span> <span class="o">=</span> <span class="n">CalibSpecs</span><span class="p">(</span><span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mf">0.0</span><span class="p">),</span>
<span class="gp">... </span>                        <span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;second&quot;</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">2.0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">third</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span><span class="o">.</span><span class="n">defaults</span>
<span class="go">(1.0, 2.0, 3.0)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibSpecs.lowers">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">lowers</span></code><a class="headerlink" href="#hydpy.auxs.calibtools.CalibSpecs.lowers" title="Permalink to this definition">¶</a></dt>
<dd><p>The lower boundary values of all <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpec</span></code></a> objects in the order of
attachment.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">CalibSpec</span><span class="p">,</span> <span class="n">CalibSpecs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">third</span> <span class="o">=</span> <span class="n">CalibSpec</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;third&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=-</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span> <span class="o">=</span> <span class="n">CalibSpecs</span><span class="p">(</span><span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mf">0.0</span><span class="p">),</span>
<span class="gp">... </span>                        <span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;second&quot;</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">2.0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">third</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span><span class="o">.</span><span class="n">lowers</span>
<span class="go">(0.0, -inf, -10.0)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibSpecs.uppers">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">uppers</span></code><a class="headerlink" href="#hydpy.auxs.calibtools.CalibSpecs.uppers" title="Permalink to this definition">¶</a></dt>
<dd><p>The upper boundary values of all <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpec</span></code></a> objects in the order of
attachment.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">CalibSpec</span><span class="p">,</span> <span class="n">CalibSpecs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">third</span> <span class="o">=</span> <span class="n">CalibSpec</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;third&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=-</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span> <span class="o">=</span> <span class="n">CalibSpecs</span><span class="p">(</span><span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mf">0.0</span><span class="p">),</span>
<span class="gp">... </span>                        <span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;second&quot;</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">2.0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">third</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span><span class="o">.</span><span class="n">uppers</span>
<span class="go">(inf, 2.0, 10.0)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="hydpy.auxs.calibtools.CalibSpecs.parametersteps">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">parametersteps</span></code><a class="headerlink" href="#hydpy.auxs.calibtools.CalibSpecs.parametersteps" title="Permalink to this definition">¶</a></dt>
<dd><p>The parameter steps of all <a class="reference internal" href="#hydpy.auxs.calibtools.CalibSpec" title="hydpy.auxs.calibtools.CalibSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibSpec</span></code></a> objects in the order of attachment.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">CalibSpec</span><span class="p">,</span> <span class="n">CalibSpecs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">third</span> <span class="o">=</span> <span class="n">CalibSpec</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;third&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=-</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">parameterstep</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span> <span class="o">=</span> <span class="n">CalibSpecs</span><span class="p">(</span><span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mf">0.0</span><span class="p">),</span>
<span class="gp">... </span>                        <span class="n">CalibSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;second&quot;</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">2.0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">third</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibspecs</span><span class="o">.</span><span class="n">parametersteps</span>
<span class="go">(None, None, Period(&quot;1d&quot;))</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/HydPy_Logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="how_to.html">How to…</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="framework.html">Framework Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="core.html">Core Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution.html">Execution Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="cythons.html">Cython Tools</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="auxiliaries.html">Auxiliary Tools</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="anntools.html">anntools</a></li>
<li class="toctree-l3"><a class="reference internal" href="armatools.html">armatools</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">calibtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="iuhtools.html">iuhtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="networktools.html">networktools</a></li>
<li class="toctree-l3"><a class="reference internal" href="quadtools.html">quadtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="roottools.html">roottools</a></li>
<li class="toctree-l3"><a class="reference internal" href="smoothtools.html">smoothtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="statstools.html">statstools</a></li>
<li class="toctree-l3"><a class="reference internal" href="validtools.html">validtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="xmltools.html">xmltools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Configuration Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modelcollection.html">Model Collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Example Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="zbibliography.html">Bibliography</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="armatools.html"
                        title="previous chapter">armatools</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="iuhtools.html"
                        title="next chapter">iuhtools</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/calibtools.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="iuhtools.html" title="iuhtools"
             >next</a> |</li>
        <li class="right" >
          <a href="armatools.html" title="armatools"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HydPy 4.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="framework.html" >Framework Tools</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="auxiliaries.html" >Auxiliary Tools</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">calibtools</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, HydPy Developers.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.2.
    </div>
  </body>
</html>