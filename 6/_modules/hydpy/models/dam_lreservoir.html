<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>hydpy.models.dam_lreservoir &#8212; HydPy 6.2.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../_static/classic.css?v=127cebf3" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=4ae1632d" />
    
    <script src="../../../_static/documentation_options.js?v=f13f159b"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">HydPy 6.2.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">hydpy.models.dam_lreservoir</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/HydPy_Logo.png" alt="Logo"/>
            </a></p>
  <div>
    <h3><a href="../../../index.html">Table of Contents</a></h3>
    <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../example_projects.html">Example Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference_manual.html">Reference Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zbibliography.html">Bibliography</a></li>
</ul>

  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for hydpy.models.dam_lreservoir</h1><div class="highlight"><pre>
<span></span><span class="c1"># pylint: disable=line-too-long, unused-wildcard-import</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">.. _`LARSIM`: http://www.larsim.de/en/the-model/</span>

<span class="sd">|dam_lreservoir| is a relatively simple reservoir model, similar to the &quot;TALS&quot; model of</span>
<span class="sd">`LARSIM`_.  It combines the features of |dam_llake| (&quot;controlled lake&quot;) and</span>
<span class="sd">|dam_lretention| (&quot;retention basin&quot;).  Additionally, it allows controlling the stored</span>
<span class="sd">water volume via defining target values that can vary seasonally.</span>

<span class="sd">Like |dam_lretention|, |dam_lreservoir| allows for combining controlled, &quot;harmless</span>
<span class="sd">outflow&quot; (via parameter |AllowedRelease|) and uncontrolled, &quot;spillway outflow&quot; (via</span>
<span class="sd">parameter |WaterLevel2FloodDischarge|), and like |dam_llake|, it allows restricting the</span>
<span class="sd">speed of the water level decrease during periods with little inflow via parameter</span>
<span class="sd">|AllowedWaterLevelDrop| (only through reducing the controlled outflow, of course).</span>
<span class="sd">Before continuing, please first read the documentation on these two application models.</span>

<span class="sd">The additional feature of |dam_lreservoir| is its ability to track seasonal target</span>
<span class="sd">volumes.  We define these target volumes via parameter |TargetVolume|.  The parameters</span>
<span class="sd">|VolumeTolerance|, |TargetRangeAbsolute|, and |TargetRangeRelative| serve to yield more</span>
<span class="sd">smooth and realistic reservoir responses for slight deviations from the given target</span>
<span class="sd">values.  Setting |TargetRangeRelative| to 0.2 and both other parameters to zero</span>
<span class="sd">corresponds to selecting the &quot;TALSPERRE SOLLRANGE&quot; option in `LARSIM`_.  Please see the</span>
<span class="sd">following examples and the documentation on method |Calc_ActualRelease_V3| for more</span>
<span class="sd">information on setting and combining the individual parameter values for different use</span>
<span class="sd">cases.</span>

<span class="sd">Integration tests</span>
<span class="sd">=================</span>

<span class="sd">.. how_to_understand_integration_tests::</span>

<span class="sd">We prepare a test set similar to the ones for application models |dam_llake| and</span>
<span class="sd">|dam_lretention|, including an identical inflow series and an identical relationship</span>
<span class="sd">between stage and volume:</span>

<span class="sd">&gt;&gt;&gt; from hydpy import IntegrationTest, Element, pub</span>
<span class="sd">&gt;&gt;&gt; pub.timegrids = &quot;01.01.2000&quot;, &quot;21.01.2000&quot;, &quot;1d&quot;</span>
<span class="sd">&gt;&gt;&gt; from hydpy.models.dam_lreservoir import *</span>
<span class="sd">&gt;&gt;&gt; parameterstep(&quot;1d&quot;)</span>
<span class="sd">&gt;&gt;&gt; element = Element(&quot;element&quot;, inlets=&quot;input_&quot;, outlets=&quot;output&quot;)</span>
<span class="sd">&gt;&gt;&gt; element.model = model</span>
<span class="sd">&gt;&gt;&gt; test = IntegrationTest(element)</span>
<span class="sd">&gt;&gt;&gt; test.dateformat = &quot;%d.%m.&quot;</span>
<span class="sd">&gt;&gt;&gt; test.plotting_options.axis1 = fluxes.inflow, fluxes.outflow</span>
<span class="sd">&gt;&gt;&gt; test.plotting_options.axis2 = states.watervolume</span>
<span class="sd">&gt;&gt;&gt; test.inits = [</span>
<span class="sd">...     (states.watervolume, 0.0),</span>
<span class="sd">...     (logs.loggedadjustedevaporation, 0.0)]</span>
<span class="sd">&gt;&gt;&gt; test.reset_inits()</span>
<span class="sd">&gt;&gt;&gt; conditions = model.conditions</span>
<span class="sd">&gt;&gt;&gt; watervolume2waterlevel(PPoly.from_data(xs=[0.0, 1.0], ys=[0.0, 1.0]))</span>
<span class="sd">&gt;&gt;&gt; surfacearea(1.44)</span>
<span class="sd">&gt;&gt;&gt; catchmentarea(86.4)</span>
<span class="sd">&gt;&gt;&gt; correctionprecipitation(1.2)</span>
<span class="sd">&gt;&gt;&gt; correctionevaporation(1.2)</span>
<span class="sd">&gt;&gt;&gt; weightevaporation(0.8)</span>
<span class="sd">&gt;&gt;&gt; thresholdevaporation(0.0)</span>
<span class="sd">&gt;&gt;&gt; toleranceevaporation(0.001)</span>
<span class="sd">&gt;&gt;&gt; commission(&quot;1900-01-01&quot;)</span>
<span class="sd">&gt;&gt;&gt; with model.add_precipmodel_v2(&quot;meteo_precip_io&quot;) as precipmodel:</span>
<span class="sd">...     precipitationfactor(1.0)</span>
<span class="sd">&gt;&gt;&gt; precipmodel.prepare_inputseries()</span>
<span class="sd">&gt;&gt;&gt; precipmodel.sequences.inputs.precipitation.series = [</span>
<span class="sd">...     0.0, 50.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,</span>
<span class="sd">...     0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]</span>
<span class="sd">&gt;&gt;&gt; element.inlets.input_.sequences.sim.series = [</span>
<span class="sd">...     0.0, 0.0, 6.0, 12.0, 10.0, 6.0, 3.0, 2.0, 1.0, 0.0,</span>
<span class="sd">...     0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]</span>

<span class="sd">.. _dam_lreservoir_base_scenario:</span>

<span class="sd">base scenario</span>
<span class="sd">_____________</span>

<span class="sd">First, we again use the linear relation between discharge and stage used</span>
<span class="sd">throughout the integration tests of |dam_llake| and in the :ref:`base example</span>
<span class="sd">&lt;dam_lretention_base_scenario&gt;` of |dam_lretention|:</span>

<span class="sd">&gt;&gt;&gt; waterlevel2flooddischarge(PPoly.from_data(xs=[0.0, 1.0], ys=[0.0, 10.0]))</span>

<span class="sd">Additionally, we set some of the remaining parameter values extremely high or low to</span>
<span class="sd">ensure the reservoir stores all water except the one activating the spillway, which</span>
<span class="sd">becomes &quot;flood discharge&quot;:</span>

<span class="sd">&gt;&gt;&gt; targetvolume(100.0)</span>
<span class="sd">&gt;&gt;&gt; neardischargeminimumthreshold.shape = 1</span>
<span class="sd">&gt;&gt;&gt; neardischargeminimumthreshold.values = -100.0</span>
<span class="sd">&gt;&gt;&gt; targetrangeabsolute(0.1)</span>
<span class="sd">&gt;&gt;&gt; targetrangerelative(0.2)</span>
<span class="sd">&gt;&gt;&gt; watervolumeminimumthreshold(0.0)</span>
<span class="sd">&gt;&gt;&gt; volumetolerance(0.1)</span>
<span class="sd">&gt;&gt;&gt; dischargetolerance(0.1)</span>
<span class="sd">&gt;&gt;&gt; allowedrelease(100.0)</span>
<span class="sd">&gt;&gt;&gt; allowedwaterleveldrop(100.0)</span>

<span class="sd">Due to the same the neural network configuration, the results are identical to the ones</span>
<span class="sd">of the :ref:`base example &lt;dam_llake_base_scenario&gt;` of |dam_llake| and the</span>
<span class="sd">:ref:`base example &lt;dam_lretention_base_scenario&gt;` of |dam_lretention|:</span>

<span class="sd">.. integration-test::</span>

<span class="sd">    &gt;&gt;&gt; test(&quot;dam_lreservoir_base_scenario&quot;)</span>
<span class="sd">    |   date | waterlevel | precipitation | adjustedprecipitation | potentialevaporation | adjustedevaporation | actualevaporation | inflow | actualrelease | flooddischarge |  outflow | watervolume | input_ |   output |</span>
<span class="sd">    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="sd">    | 01.01. |        0.0 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |            0.0 |      0.0 |         0.0 |    0.0 |      0.0 |</span>
<span class="sd">    | 02.01. |   0.057853 |          50.0 |                   1.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |         0.3304 |   0.3304 |    0.057853 |    0.0 |   0.3304 |</span>
<span class="sd">    | 03.01. |     0.3715 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    6.0 |           0.0 |       2.369831 | 2.369831 |      0.3715 |    6.0 | 2.369831 |</span>
<span class="sd">    | 04.01. |    0.85081 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |   12.0 |           0.0 |       6.452432 | 6.452432 |     0.85081 |   12.0 | 6.452432 |</span>
<span class="sd">    | 05.01. |    0.93712 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |   10.0 |           0.0 |       9.001037 | 9.001037 |     0.93712 |   10.0 | 9.001037 |</span>
<span class="sd">    | 06.01. |   0.742087 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    6.0 |           0.0 |       8.257327 | 8.257327 |    0.742087 |    6.0 | 8.257327 |</span>
<span class="sd">    | 07.01. |   0.486328 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    3.0 |           0.0 |       5.960176 | 5.960176 |    0.486328 |    3.0 | 5.960176 |</span>
<span class="sd">    | 08.01. |    0.32068 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    2.0 |           0.0 |       3.917227 | 3.917227 |     0.32068 |    2.0 | 3.917227 |</span>
<span class="sd">    | 09.01. |   0.193011 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    1.0 |           0.0 |       2.477651 | 2.477651 |    0.193011 |    1.0 | 2.477651 |</span>
<span class="sd">    | 10.01. |   0.081349 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       1.292382 | 1.292382 |    0.081349 |    0.0 | 1.292382 |</span>
<span class="sd">    | 11.01. |   0.034286 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.544712 | 0.544712 |    0.034286 |    0.0 | 0.544712 |</span>
<span class="sd">    | 12.01. |    0.01445 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.229577 | 0.229577 |     0.01445 |    0.0 | 0.229577 |</span>
<span class="sd">    | 13.01. |   0.006091 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.096747 | 0.096747 |    0.006091 |    0.0 | 0.096747 |</span>
<span class="sd">    | 14.01. |   0.002568 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.040782 | 0.040782 |    0.002568 |    0.0 | 0.040782 |</span>
<span class="sd">    | 15.01. |   0.001082 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.017191 | 0.017191 |    0.001082 |    0.0 | 0.017191 |</span>
<span class="sd">    | 16.01. |   0.000456 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.007254 | 0.007254 |    0.000456 |    0.0 | 0.007254 |</span>
<span class="sd">    | 17.01. |   0.000192 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.003054 | 0.003054 |    0.000192 |    0.0 | 0.003054 |</span>
<span class="sd">    | 18.01. |   0.000082 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.001277 | 0.001277 |    0.000082 |    0.0 | 0.001277 |</span>
<span class="sd">    | 19.01. |   0.000035 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.000542 | 0.000542 |    0.000035 |    0.0 | 0.000542 |</span>
<span class="sd">    | 20.01. |   0.000014 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |        0.00024 |  0.00024 |    0.000014 |    0.0 |  0.00024 |</span>

<span class="sd">There is no indication of an error in the water balance:</span>

<span class="sd">&gt;&gt;&gt; from hydpy import round_</span>
<span class="sd">&gt;&gt;&gt; round_(model.check_waterbalance(conditions))</span>
<span class="sd">0.0</span>

<span class="sd">.. _dam_lreservoir_spillway:</span>

<span class="sd">spillway</span>
<span class="sd">________</span>

<span class="sd">When we reuse the more realistic relationship between flood discharge and stage of the</span>
<span class="sd">:ref:`spillway example &lt;dam_lretention_spillway&gt;` on |dam_lretention|, we again get the</span>
<span class="sd">same flood discharge time series:</span>

<span class="sd">.. integration-test::</span>

<span class="sd">    &gt;&gt;&gt; waterlevel2flooddischarge(ANN(weights_input=10.0, weights_output=50.0,</span>
<span class="sd">    ...                               intercepts_hidden=-20.0, intercepts_output=0.0))</span>
<span class="sd">    &gt;&gt;&gt; test(&quot;dam_lreservoir_spillway&quot;)</span>
<span class="sd">    |   date | waterlevel | precipitation | adjustedprecipitation | potentialevaporation | adjustedevaporation | actualevaporation | inflow | actualrelease | flooddischarge |  outflow | watervolume | input_ |   output |</span>
<span class="sd">    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="sd">    | 01.01. |        0.0 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |            0.0 |      0.0 |         0.0 |    0.0 |      0.0 |</span>
<span class="sd">    | 02.01. |     0.0864 |          50.0 |                   1.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |            0.0 |      0.0 |      0.0864 |    0.0 |      0.0 |</span>
<span class="sd">    | 03.01. |   0.604798 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    6.0 |           0.0 |       0.000022 | 0.000022 |    0.604798 |    6.0 | 0.000022 |</span>
<span class="sd">    | 04.01. |   1.630781 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |   12.0 |           0.0 |       0.125198 | 0.125198 |    1.630781 |   12.0 | 0.125198 |</span>
<span class="sd">    | 05.01. |   1.860804 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |   10.0 |           0.0 |       7.337699 | 7.337699 |    1.860804 |   10.0 | 7.337699 |</span>
<span class="sd">    | 06.01. |   1.801264 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    6.0 |           0.0 |       6.689121 | 6.689121 |    1.801264 |    6.0 | 6.689121 |</span>
<span class="sd">    | 07.01. |   1.729848 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    3.0 |           0.0 |       3.826574 | 3.826574 |    1.729848 |    3.0 | 3.826574 |</span>
<span class="sd">    | 08.01. |   1.689809 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    2.0 |           0.0 |       2.463407 | 2.463407 |    1.689809 |    2.0 | 2.463407 |</span>
<span class="sd">    | 09.01. |    1.63782 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    1.0 |           0.0 |       1.601733 | 1.601733 |     1.63782 |    1.0 | 1.601733 |</span>
<span class="sd">    | 10.01. |   1.561989 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.877667 | 0.877667 |    1.561989 |    0.0 | 0.877667 |</span>
<span class="sd">    | 11.01. |   1.519092 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.496492 | 0.496492 |    1.519092 |    0.0 | 0.496492 |</span>
<span class="sd">    | 12.01. |   1.489092 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.347228 | 0.347228 |    1.489092 |    0.0 | 0.347228 |</span>
<span class="sd">    | 13.01. |   1.466012 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.267126 | 0.267126 |    1.466012 |    0.0 | 0.267126 |</span>
<span class="sd">    | 14.01. |   1.447256 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.217087 | 0.217087 |    1.447256 |    0.0 | 0.217087 |</span>
<span class="sd">    | 15.01. |   1.431458 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.182846 | 0.182846 |    1.431458 |    0.0 | 0.182846 |</span>
<span class="sd">    | 16.01. |   1.417812 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.157936 | 0.157936 |    1.417812 |    0.0 | 0.157936 |</span>
<span class="sd">    | 17.01. |   1.405803 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.138999 | 0.138999 |    1.405803 |    0.0 | 0.138999 |</span>
<span class="sd">    | 18.01. |   1.395079 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.124117 | 0.124117 |    1.395079 |    0.0 | 0.124117 |</span>
<span class="sd">    | 19.01. |   1.385393 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.112112 | 0.112112 |    1.385393 |    0.0 | 0.112112 |</span>
<span class="sd">    | 20.01. |    1.37656 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.102224 | 0.102224 |     1.37656 |    0.0 | 0.102224 |</span>

<span class="sd">There is no indication of an error in the water balance:</span>

<span class="sd">&gt;&gt;&gt; round_(model.check_waterbalance(conditions))</span>
<span class="sd">0.0</span>

<span class="sd">.. _dam_lreservoir_target_volume:</span>

<span class="sd">target volume</span>
<span class="sd">_____________</span>

<span class="sd">During dry periods, application model |dam_lretention| generally releases all its water</span>
<span class="sd">until the basin runs dry, as long as |AllowedRelease| is larger than zero.  Application</span>
<span class="sd">model |dam_lreservoir| instead allows fo defining target volumes.  |dam_lreservoir|</span>
<span class="sd">tries to control its outflow so that the actual volume approximately equals the</span>
<span class="sd">(potentially seasonally varying) target volume.  However, it cannot release arbitrary</span>
<span class="sd">amounts of water to fulfil this task due to its priority to release a predefined</span>
<span class="sd">minimum amount of water (for ecological reasons) and its second priority to not release</span>
<span class="sd">too much water (for flood protection).  In this example, we activate these mechanisms</span>
<span class="sd">by changing some corresponding parameter values (see the documentation on method</span>
<span class="sd">|Calc_ActualRelease_V3| for more detailed examples, including the numerous corner</span>
<span class="sd">cases):</span>

<span class="sd">&gt;&gt;&gt; targetvolume(0.5)</span>
<span class="sd">&gt;&gt;&gt; neardischargeminimumthreshold(0.1)</span>
<span class="sd">&gt;&gt;&gt; allowedrelease(4.0)</span>
<span class="sd">&gt;&gt;&gt; allowedwaterleveldrop(1.0)</span>

<span class="sd">Compared with the :ref:`dam_lretention_allowed_release` results of |dam_lretention|,</span>
<span class="sd">|dam_lreservoir| dampens the given flood event less efficiently.  |dam_lretention|</span>
<span class="sd">releases all initial inflow, while |dam_lreservoir| stores most of it until it reaches</span>
<span class="sd">the  target volume of 0.5 million m³. After peak flow, |dam_lreservoir| first releases</span>
<span class="sd">its water as fast as allowed but then tries  to meet the target volume again.  The slow</span>
<span class="sd">negative trend away from the target value at the end of the simulation period results</span>
<span class="sd">from the lack of inflow while still needing to release at least 0.1 m³/s:</span>

<span class="sd">.. integration-test::</span>

<span class="sd">    &gt;&gt;&gt; test(&quot;dam_lreservoir_target_volume&quot;)</span>
<span class="sd">    |   date | waterlevel | precipitation | adjustedprecipitation | potentialevaporation | adjustedevaporation | actualevaporation | inflow | actualrelease | flooddischarge |  outflow | watervolume | input_ |   output |</span>
<span class="sd">    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="sd">    | 01.01. |  -0.004502 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.052109 |            0.0 | 0.052109 |   -0.004502 |    0.0 | 0.052109 |</span>
<span class="sd">    | 02.01. |   0.074385 |          50.0 |                   1.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.086952 |            0.0 | 0.086952 |    0.074385 |    0.0 | 0.086952 |</span>
<span class="sd">    | 03.01. |   0.501715 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    6.0 |      1.054045 |       0.000005 |  1.05405 |    0.501715 |    6.0 |  1.05405 |</span>
<span class="sd">    | 04.01. |   1.192722 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |   12.0 |      3.999981 |       0.002258 | 4.002239 |    1.192722 |   12.0 | 4.002239 |</span>
<span class="sd">    | 05.01. |    1.67387 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |   10.0 |           4.0 |       0.431153 | 4.431153 |     1.67387 |   10.0 | 4.431153 |</span>
<span class="sd">    | 06.01. |    1.68056 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    6.0 |           4.0 |       1.922574 | 5.922574 |     1.68056 |    6.0 | 5.922574 |</span>
<span class="sd">    | 07.01. |   1.516996 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    3.0 |           4.0 |       0.893095 | 4.893095 |    1.516996 |    3.0 | 4.893095 |</span>
<span class="sd">    | 08.01. |   1.329056 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    2.0 |           4.0 |       0.175235 | 4.175235 |    1.329056 |    2.0 | 4.175235 |</span>
<span class="sd">    | 09.01. |   1.067995 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    1.0 |           4.0 |       0.021544 | 4.021544 |    1.067995 |    1.0 | 4.021544 |</span>
<span class="sd">    | 10.01. |   0.722287 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      3.999987 |       0.001256 | 4.001243 |    0.722287 |    0.0 | 4.001243 |</span>
<span class="sd">    | 11.01. |    0.51737 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |       2.37168 |       0.000045 | 2.371724 |     0.51737 |    0.0 | 2.371724 |</span>
<span class="sd">    | 12.01. |   0.502797 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.168652 |       0.000017 | 0.168669 |    0.502797 |    0.0 | 0.168669 |</span>
<span class="sd">    | 13.01. |   0.492469 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.119528 |       0.000015 | 0.119543 |    0.492469 |    0.0 | 0.119543 |</span>
<span class="sd">    | 14.01. |   0.482061 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.120443 |       0.000013 | 0.120457 |    0.482061 |    0.0 | 0.120457 |</span>
<span class="sd">    | 15.01. |   0.471841 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.118275 |       0.000012 | 0.118287 |    0.471841 |    0.0 | 0.118287 |</span>
<span class="sd">    | 16.01. |    0.46177 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.116561 |       0.000011 | 0.116572 |     0.46177 |    0.0 | 0.116572 |</span>
<span class="sd">    | 17.01. |   0.451801 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.115362 |        0.00001 | 0.115372 |    0.451801 |    0.0 | 0.115372 |</span>
<span class="sd">    | 18.01. |    0.44192 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.114359 |       0.000009 | 0.114368 |     0.44192 |    0.0 | 0.114368 |</span>
<span class="sd">    | 19.01. |   0.432119 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.113425 |       0.000008 | 0.113434 |    0.432119 |    0.0 | 0.113434 |</span>
<span class="sd">    | 20.01. |   0.422396 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.112527 |       0.000007 | 0.112534 |    0.422396 |    0.0 | 0.112534 |</span>

<span class="sd">There is no indication of an error in the water balance:</span>

<span class="sd">&gt;&gt;&gt; round_(model.check_waterbalance(conditions))</span>
<span class="sd">0.0</span>

<span class="sd">.. _dam_lreservoir_sharp_transitions:</span>

<span class="sd">sharp transitions</span>
<span class="sd">_________________</span>

<span class="sd">Due to smoothing, the above results deviate from the ones one would expect from</span>
<span class="sd">`LARSIM`_ simulations to some degree.  However, if we set both &quot;target range&quot;</span>
<span class="sd">parameters to zero (like one does not select the `LARSIM`_ option &quot;TALSPERRE</span>
<span class="sd">SOLLRANGE&quot;) and both &quot;tolerance&quot; parameters to zero (to turn off any smoothing), we get</span>
<span class="sd">more similar results:</span>

<span class="sd">.. integration-test::</span>

<span class="sd">    &gt;&gt;&gt; targetrangeabsolute(0.0)</span>
<span class="sd">    &gt;&gt;&gt; targetrangerelative(0.0)</span>
<span class="sd">    &gt;&gt;&gt; volumetolerance(0.0)</span>
<span class="sd">    &gt;&gt;&gt; dischargetolerance(0.0)</span>
<span class="sd">    &gt;&gt;&gt; test(&quot;dam_lreservoir_sharp_transitions&quot;)</span>
<span class="sd">    |   date | waterlevel | precipitation | adjustedprecipitation | potentialevaporation | adjustedevaporation | actualevaporation | inflow | actualrelease | flooddischarge |  outflow | watervolume | input_ |   output |</span>
<span class="sd">    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="sd">    | 01.01. |  -0.000014 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.000167 |            0.0 | 0.000167 |   -0.000014 |    0.0 | 0.000167 |</span>
<span class="sd">    | 02.01. |   0.077753 |          50.0 |                   1.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.099917 |            0.0 | 0.099917 |    0.077753 |    0.0 | 0.099917 |</span>
<span class="sd">    | 03.01. |   0.529668 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    6.0 |      0.769489 |       0.000006 | 0.769495 |    0.529668 |    6.0 | 0.769495 |</span>
<span class="sd">    | 04.01. |    1.22061 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |   12.0 |           4.0 |       0.002985 | 4.002985 |     1.22061 |   12.0 | 4.002985 |</span>
<span class="sd">    | 05.01. |   1.692409 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |   10.0 |           4.0 |       0.539367 | 4.539367 |    1.692409 |   10.0 | 4.539367 |</span>
<span class="sd">    | 06.01. |   1.684067 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    6.0 |           4.0 |       2.096553 | 6.096553 |    1.684067 |    6.0 | 6.096553 |</span>
<span class="sd">    | 07.01. |   1.518626 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    3.0 |           4.0 |       0.914827 | 4.914827 |    1.518626 |    3.0 | 4.914827 |</span>
<span class="sd">    | 08.01. |   1.330456 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    2.0 |           4.0 |       0.177892 | 4.177892 |    1.330456 |    2.0 | 4.177892 |</span>
<span class="sd">    | 09.01. |   1.069369 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    1.0 |           4.0 |       0.021845 | 4.021845 |    1.069369 |    1.0 | 4.021845 |</span>
<span class="sd">    | 10.01. |   0.723659 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           4.0 |       0.001273 | 4.001273 |    0.723659 |    0.0 | 4.001273 |</span>
<span class="sd">    | 11.01. |    0.49691 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |       2.62436 |       0.000043 | 2.624403 |     0.49691 |    0.0 | 2.624403 |</span>
<span class="sd">    | 12.01. |   0.488269 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000014 | 0.100014 |    0.488269 |    0.0 | 0.100014 |</span>
<span class="sd">    | 13.01. |   0.479628 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000013 | 0.100013 |    0.479628 |    0.0 | 0.100013 |</span>
<span class="sd">    | 14.01. |   0.470987 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000012 | 0.100012 |    0.470987 |    0.0 | 0.100012 |</span>
<span class="sd">    | 15.01. |   0.462346 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000011 | 0.100011 |    0.462346 |    0.0 | 0.100011 |</span>
<span class="sd">    | 16.01. |   0.453705 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |        0.00001 |  0.10001 |    0.453705 |    0.0 |  0.10001 |</span>
<span class="sd">    | 17.01. |   0.445064 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000009 | 0.100009 |    0.445064 |    0.0 | 0.100009 |</span>
<span class="sd">    | 18.01. |   0.436423 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000008 | 0.100008 |    0.436423 |    0.0 | 0.100008 |</span>
<span class="sd">    | 19.01. |   0.427783 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000008 | 0.100008 |    0.427783 |    0.0 | 0.100008 |</span>
<span class="sd">    | 20.01. |   0.419142 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000007 | 0.100007 |    0.419142 |    0.0 | 0.100007 |</span>

<span class="sd">There is no indication of an error in the water balance:</span>

<span class="sd">&gt;&gt;&gt; round_(model.check_waterbalance(conditions))</span>
<span class="sd">0.0</span>

<span class="sd">.. _dam_lreservoir_higher_accuracy:</span>

<span class="sd">higher accuracy</span>
<span class="sd">_______________</span>

<span class="sd">The first water volume calculated in the :ref:`sharp transitions example</span>
<span class="sd">&lt;dam_lreservoir_sharp_transitions&gt;` is negative, resulting from the limited numerical</span>
<span class="sd">accuracy of the underlying integration algorithm.  We can decrease such errors by</span>
<span class="sd">defining smaller error tolerances but at the risk of relevant increases in computation</span>
<span class="sd">times (especially in case one applies zero smoothing values):</span>

<span class="sd">.. integration-test::</span>

<span class="sd">    &gt;&gt;&gt; solver.abserrormax(1e-6)</span>
<span class="sd">    &gt;&gt;&gt; test(&quot;dam_lreservoir_higher_accuracy&quot;)</span>
<span class="sd">    |   date | waterlevel | precipitation | adjustedprecipitation | potentialevaporation | adjustedevaporation | actualevaporation | inflow | actualrelease | flooddischarge |  outflow | watervolume | input_ |   output |</span>
<span class="sd">    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="sd">    | 01.01. |        0.0 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.000002 |            0.0 | 0.000002 |         0.0 |    0.0 | 0.000002 |</span>
<span class="sd">    | 02.01. |    0.07776 |          50.0 |                   1.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.099998 |            0.0 | 0.099998 |     0.07776 |    0.0 | 0.099998 |</span>
<span class="sd">    | 03.01. |   0.529676 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    6.0 |      0.769489 |       0.000006 | 0.769495 |    0.529676 |    6.0 | 0.769495 |</span>
<span class="sd">    | 04.01. |   1.220618 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |   12.0 |           4.0 |       0.002983 | 4.002983 |    1.220618 |   12.0 | 4.002983 |</span>
<span class="sd">    | 05.01. |   1.692414 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |   10.0 |           4.0 |       0.539399 | 4.539399 |    1.692414 |   10.0 | 4.539399 |</span>
<span class="sd">    | 06.01. |   1.684067 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    6.0 |           4.0 |       2.096604 | 6.096604 |    1.684067 |    6.0 | 6.096604 |</span>
<span class="sd">    | 07.01. |   1.518685 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    3.0 |           4.0 |       0.914146 | 4.914146 |    1.518685 |    3.0 | 4.914146 |</span>
<span class="sd">    | 08.01. |   1.330507 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    2.0 |           4.0 |       0.177989 | 4.177989 |    1.330507 |    2.0 | 4.177989 |</span>
<span class="sd">    | 09.01. |   1.069419 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    1.0 |           4.0 |       0.021856 | 4.021856 |    1.069419 |    1.0 | 4.021856 |</span>
<span class="sd">    | 10.01. |   0.723709 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           4.0 |       0.001273 | 4.001273 |    0.723709 |    0.0 | 4.001273 |</span>
<span class="sd">    | 11.01. |   0.496812 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      2.626076 |       0.000042 | 2.626118 |    0.496812 |    0.0 | 2.626118 |</span>
<span class="sd">    | 12.01. |   0.488171 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000014 | 0.100014 |    0.488171 |    0.0 | 0.100014 |</span>
<span class="sd">    | 13.01. |    0.47953 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000013 | 0.100013 |     0.47953 |    0.0 | 0.100013 |</span>
<span class="sd">    | 14.01. |   0.470889 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000012 | 0.100012 |    0.470889 |    0.0 | 0.100012 |</span>
<span class="sd">    | 15.01. |   0.462248 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000011 | 0.100011 |    0.462248 |    0.0 | 0.100011 |</span>
<span class="sd">    | 16.01. |   0.453607 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |        0.00001 |  0.10001 |    0.453607 |    0.0 |  0.10001 |</span>
<span class="sd">    | 17.01. |   0.444966 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000009 | 0.100009 |    0.444966 |    0.0 | 0.100009 |</span>
<span class="sd">    | 18.01. |   0.436325 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000008 | 0.100008 |    0.436325 |    0.0 | 0.100008 |</span>
<span class="sd">    | 19.01. |   0.427685 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000008 | 0.100008 |    0.427685 |    0.0 | 0.100008 |</span>
<span class="sd">    | 20.01. |   0.419044 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000007 | 0.100007 |    0.419044 |    0.0 | 0.100007 |</span>

<span class="sd">There is no indication of an error in the water balance:</span>

<span class="sd">&gt;&gt;&gt; round_(model.check_waterbalance(conditions))</span>
<span class="sd">0.0</span>

<span class="sd">.. _dam_lreservoir_target_range:</span>

<span class="sd">target range</span>
<span class="sd">____________</span>

<span class="sd">In the last example, the reservoir behaviour changes abruptly when the actual volume</span>
<span class="sd">transcends the target volume. According to its documentation, `LARSIM`_ predicts</span>
<span class="sd">unrealistic jumps in discharge in such cases.  To solve this issue, `LARSIM`_ offers</span>
<span class="sd">the &quot;TALSPERRE SOLLRANGE&quot; option, which ensures smoother transitions between 80 % and</span>
<span class="sd">120 % of the target volume, accomplished by linear interpolation.  |dam_lreservoir|</span>
<span class="sd">should never output similar jumps as it controls the correctness of its results.  As a</span>
<span class="sd">drawback, correcting these jumps (which still occur &quot;unseeable&quot; and possibly multiple</span>
<span class="sd">times within each affected simulation time step) costs computation time.  Hence, at</span>
<span class="sd">least for small smoothing parameter values, |dam_lreservoir| can also benefit from this</span>
<span class="sd">approach.  You can define the interpolation range freely via |TargetRangeAbsolute| and</span>
<span class="sd">|TargetRangeRelative|, depending on your specific needs.  Setting the latter to 0.2</span>
<span class="sd">corresponds to the original &quot;TALSPERRE SOLLRANGE&quot;-configuration:</span>

<span class="sd">.. integration-test::</span>

<span class="sd">    &gt;&gt;&gt; targetrangerelative(0.2)</span>
<span class="sd">    &gt;&gt;&gt; test(&quot;dam_lreservoir_target_range&quot;)</span>
<span class="sd">    |   date | waterlevel | precipitation | adjustedprecipitation | potentialevaporation | adjustedevaporation | actualevaporation | inflow | actualrelease | flooddischarge |  outflow | watervolume | input_ |   output |</span>
<span class="sd">    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="sd">    | 01.01. |        0.0 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.000002 |            0.0 | 0.000002 |         0.0 |    0.0 | 0.000002 |</span>
<span class="sd">    | 02.01. |    0.07776 |          50.0 |                   1.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.099998 |            0.0 | 0.099998 |     0.07776 |    0.0 | 0.099998 |</span>
<span class="sd">    | 03.01. |   0.508089 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    6.0 |       1.01934 |       0.000005 | 1.019345 |    0.508089 |    6.0 | 1.019345 |</span>
<span class="sd">    | 04.01. |   1.199081 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |   12.0 |           4.0 |       0.002404 | 4.002404 |    1.199081 |   12.0 | 4.002404 |</span>
<span class="sd">    | 05.01. |   1.678243 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |   10.0 |           4.0 |       0.454147 | 4.454147 |    1.678243 |   10.0 | 4.454147 |</span>
<span class="sd">    | 06.01. |   1.681431 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    6.0 |           4.0 |       1.963095 | 5.963095 |    1.681431 |    6.0 | 5.963095 |</span>
<span class="sd">    | 07.01. |   1.517459 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    3.0 |           4.0 |       0.897827 | 4.897827 |    1.517459 |    3.0 | 4.897827 |</span>
<span class="sd">    | 08.01. |   1.329454 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    2.0 |           4.0 |       0.175985 | 4.175985 |    1.329454 |    2.0 | 4.175985 |</span>
<span class="sd">    | 09.01. |   1.068385 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    1.0 |           4.0 |       0.021629 | 4.021629 |    1.068385 |    1.0 | 4.021629 |</span>
<span class="sd">    | 10.01. |   0.722676 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           4.0 |        0.00126 |  4.00126 |    0.722676 |    0.0 |  4.00126 |</span>
<span class="sd">    | 11.01. |   0.509105 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      2.471849 |       0.000044 | 2.471893 |    0.509105 |    0.0 | 2.471893 |</span>
<span class="sd">    | 12.01. |   0.495244 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.160404 |       0.000015 |  0.16042 |    0.495244 |    0.0 |  0.16042 |</span>
<span class="sd">    | 13.01. |   0.486603 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000014 | 0.100014 |    0.486603 |    0.0 | 0.100014 |</span>
<span class="sd">    | 14.01. |   0.477962 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000013 | 0.100013 |    0.477962 |    0.0 | 0.100013 |</span>
<span class="sd">    | 15.01. |   0.469321 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000012 | 0.100012 |    0.469321 |    0.0 | 0.100012 |</span>
<span class="sd">    | 16.01. |    0.46068 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000011 | 0.100011 |     0.46068 |    0.0 | 0.100011 |</span>
<span class="sd">    | 17.01. |   0.452039 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |        0.00001 |  0.10001 |    0.452039 |    0.0 |  0.10001 |</span>
<span class="sd">    | 18.01. |   0.443399 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000009 | 0.100009 |    0.443399 |    0.0 | 0.100009 |</span>
<span class="sd">    | 19.01. |   0.434758 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000008 | 0.100008 |    0.434758 |    0.0 | 0.100008 |</span>
<span class="sd">    | 20.01. |   0.426117 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000008 | 0.100008 |    0.426117 |    0.0 | 0.100008 |</span>

<span class="sd">There is no indication of an error in the water balance:</span>

<span class="sd">&gt;&gt;&gt; round_(model.check_waterbalance(conditions))</span>
<span class="sd">0.0</span>

<span class="sd">minimum volume</span>
<span class="sd">______________</span>

<span class="sd">In all the examples above, the dam would run dry entirely after a certain time to</span>
<span class="sd">fulfil the downstream demand defined by parameter |NearDischargeMinimumThreshold|.</span>
<span class="sd">Usually, this is neither desired nor technically possible.  The following example shows</span>
<span class="sd">that the parameter |WaterVolumeMinimumThreshold| allows setting a minimum amount of</span>
<span class="sd">water below which no release occurs:</span>

<span class="sd">.. integration-test::</span>

<span class="sd">    &gt;&gt;&gt; watervolumeminimumthreshold(0.45)</span>
<span class="sd">    &gt;&gt;&gt; test(&quot;dam_lreservoir_minimum_volume&quot;)</span>
<span class="sd">    |   date | waterlevel | precipitation | adjustedprecipitation | potentialevaporation | adjustedevaporation | actualevaporation | inflow | actualrelease | flooddischarge |  outflow | watervolume | input_ |   output |</span>
<span class="sd">    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="sd">    | 01.01. |        0.0 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |            0.0 |      0.0 |         0.0 |    0.0 |      0.0 |</span>
<span class="sd">    | 02.01. |     0.0864 |          50.0 |                   1.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |            0.0 |      0.0 |      0.0864 |    0.0 |      0.0 |</span>
<span class="sd">    | 03.01. |   0.516694 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    6.0 |      1.019739 |       0.000006 | 1.019745 |    0.516694 |    6.0 | 1.019745 |</span>
<span class="sd">    | 04.01. |   1.207668 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |   12.0 |           4.0 |        0.00262 |  4.00262 |    1.207668 |   12.0 |  4.00262 |</span>
<span class="sd">    | 05.01. |   1.684012 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |   10.0 |           4.0 |       0.486752 | 4.486752 |    1.684012 |   10.0 | 4.486752 |</span>
<span class="sd">    | 06.01. |   1.682538 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    6.0 |           4.0 |        2.01706 |  6.01706 |    1.682538 |    6.0 |  6.01706 |</span>
<span class="sd">    | 07.01. |   1.517976 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    3.0 |           4.0 |       0.904657 | 4.904657 |    1.517976 |    3.0 | 4.904657 |</span>
<span class="sd">    | 08.01. |   1.329898 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    2.0 |           4.0 |       0.176827 | 4.176827 |    1.329898 |    2.0 | 4.176827 |</span>
<span class="sd">    | 09.01. |   1.068821 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    1.0 |           4.0 |       0.021725 | 4.021725 |    1.068821 |    1.0 | 4.021725 |</span>
<span class="sd">    | 10.01. |   0.723112 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           4.0 |       0.001265 | 4.001265 |    0.723112 |    0.0 | 4.001265 |</span>
<span class="sd">    | 11.01. |   0.509154 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      2.476314 |       0.000044 | 2.476358 |    0.509154 |    0.0 | 2.476358 |</span>
<span class="sd">    | 12.01. |   0.495255 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.160853 |       0.000015 | 0.160869 |    0.495255 |    0.0 | 0.160869 |</span>
<span class="sd">    | 13.01. |   0.486614 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000014 | 0.100014 |    0.486614 |    0.0 | 0.100014 |</span>
<span class="sd">    | 14.01. |   0.477973 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000013 | 0.100013 |    0.477973 |    0.0 | 0.100013 |</span>
<span class="sd">    | 15.01. |   0.469332 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000012 | 0.100012 |    0.469332 |    0.0 | 0.100012 |</span>
<span class="sd">    | 16.01. |   0.460691 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |       0.000011 | 0.100011 |    0.460691 |    0.0 | 0.100011 |</span>
<span class="sd">    | 17.01. |    0.45205 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.1 |        0.00001 |  0.10001 |     0.45205 |    0.0 |  0.10001 |</span>
<span class="sd">    | 18.01. |   0.449999 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |      0.023728 |       0.000009 | 0.023737 |    0.449999 |    0.0 | 0.023737 |</span>
<span class="sd">    | 19.01. |   0.449998 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.000009 | 0.000009 |    0.449998 |    0.0 | 0.000009 |</span>
<span class="sd">    | 20.01. |   0.449998 |           0.0 |                   0.0 |                  0.0 |                 0.0 |               0.0 |    0.0 |           0.0 |       0.000009 | 0.000009 |    0.449998 |    0.0 | 0.000009 |</span>

<span class="sd">There is no indication of an error in the water balance:</span>

<span class="sd">&gt;&gt;&gt; round_(model.check_waterbalance(conditions))</span>
<span class="sd">0.0</span>

<span class="sd">.. _dam_lreservoir_evaporation:</span>

<span class="sd">evaporation</span>
<span class="sd">___________</span>

<span class="sd">This example takes up the :ref:`evaporation example &lt;dam_llake_evaporation&gt;` of</span>
<span class="sd">application model |dam_llake|.  The reservoir can no longer maintain the target water</span>
<span class="sd">level at the end of the simulation period due to missing precipitation or inflow for</span>
<span class="sd">compensating evaporation:</span>

<span class="sd">.. integration-test::</span>

<span class="sd">    &gt;&gt;&gt; with model.add_pemodel_v1(&quot;evap_ret_io&quot;) as pemodel:</span>
<span class="sd">    ...     evapotranspirationfactor(1.0)</span>
<span class="sd">    &gt;&gt;&gt; pemodel.prepare_inputseries()</span>
<span class="sd">    &gt;&gt;&gt; pemodel.sequences.inputs.referenceevapotranspiration.series = 10 * [1.0] + 10 * [5.0]</span>
<span class="sd">    &gt;&gt;&gt; test(&quot;dam_lreservoir_evaporation&quot;)</span>
<span class="sd">    |   date | waterlevel | precipitation | adjustedprecipitation | potentialevaporation | adjustedevaporation | actualevaporation | inflow | actualrelease | flooddischarge |  outflow | watervolume | input_ |   output |</span>
<span class="sd">    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="sd">    | 01.01. |  -0.000376 |           0.0 |                   0.0 |                  1.0 |               0.016 |           0.00435 |    0.0 |           0.0 |            0.0 |      0.0 |   -0.000376 |    0.0 |      0.0 |</span>
<span class="sd">    | 02.01. |   0.084373 |          50.0 |                   1.0 |                  1.0 |              0.0192 |          0.019108 |    0.0 |           0.0 |            0.0 |      0.0 |    0.084373 |    0.0 |      0.0 |</span>
<span class="sd">    | 03.01. |   0.515216 |           0.0 |                   0.0 |                  1.0 |             0.01984 |           0.01984 |    6.0 |      0.993553 |       0.000006 | 0.993558 |    0.515216 |    6.0 | 0.993558 |</span>
<span class="sd">    | 04.01. |   1.204471 |           0.0 |                   0.0 |                  1.0 |            0.019968 |          0.019968 |   12.0 |           4.0 |       0.002544 | 4.002544 |    1.204471 |   12.0 | 4.002544 |</span>
<span class="sd">    | 05.01. |   1.680614 |           0.0 |                   0.0 |                  1.0 |            0.019994 |          0.019994 |   10.0 |           4.0 |       0.469085 | 4.469085 |    1.680614 |   10.0 | 4.469085 |</span>
<span class="sd">    | 06.01. |   1.681045 |           0.0 |                   0.0 |                  1.0 |            0.019999 |          0.019999 |    6.0 |           4.0 |        1.97502 |  5.97502 |    1.681045 |    6.0 |  5.97502 |</span>
<span class="sd">    | 07.01. |   1.515945 |           0.0 |                   0.0 |                  1.0 |                0.02 |              0.02 |    3.0 |           4.0 |       0.890873 | 4.890873 |    1.515945 |    3.0 | 4.890873 |</span>
<span class="sd">    | 08.01. |    1.32651 |           0.0 |                   0.0 |                  1.0 |                0.02 |              0.02 |    2.0 |           4.0 |       0.172536 | 4.172536 |     1.32651 |    2.0 | 4.172536 |</span>
<span class="sd">    | 09.01. |   1.063776 |           0.0 |                   0.0 |                  1.0 |                0.02 |              0.02 |    1.0 |           4.0 |       0.020899 | 4.020899 |    1.063776 |    1.0 | 4.020899 |</span>
<span class="sd">    | 10.01. |   0.716345 |           0.0 |                   0.0 |                  1.0 |                0.02 |              0.02 |    0.0 |           4.0 |       0.001198 | 4.001198 |    0.716345 |    0.0 | 4.001198 |</span>
<span class="sd">    | 11.01. |   0.506224 |           0.0 |                   0.0 |                  5.0 |               0.084 |             0.084 |    0.0 |      2.347909 |       0.000041 | 2.347951 |    0.506224 |    0.0 | 2.347951 |</span>
<span class="sd">    | 12.01. |    0.48705 |           0.0 |                   0.0 |                  5.0 |              0.0968 |            0.0968 |    0.0 |       0.12511 |       0.000015 | 0.125124 |     0.48705 |    0.0 | 0.125124 |</span>
<span class="sd">    | 13.01. |   0.469824 |           0.0 |                   0.0 |                  5.0 |             0.09936 |           0.09936 |    0.0 |           0.1 |       0.000012 | 0.100012 |    0.469824 |    0.0 | 0.100012 |</span>
<span class="sd">    | 14.01. |   0.452555 |           0.0 |                   0.0 |                  5.0 |            0.099872 |          0.099872 |    0.0 |           0.1 |        0.00001 |  0.10001 |    0.452555 |    0.0 |  0.10001 |</span>
<span class="sd">    | 15.01. |   0.442639 |           0.0 |                   0.0 |                  5.0 |            0.099974 |          0.099974 |    0.0 |      0.014785 |       0.000009 | 0.014794 |    0.442639 |    0.0 | 0.014794 |</span>
<span class="sd">    | 16.01. |   0.433998 |           0.0 |                   0.0 |                  5.0 |            0.099995 |          0.099995 |    0.0 |           0.0 |       0.000008 | 0.000008 |    0.433998 |    0.0 | 0.000008 |</span>
<span class="sd">    | 17.01. |   0.425358 |           0.0 |                   0.0 |                  5.0 |            0.099999 |          0.099999 |    0.0 |           0.0 |       0.000008 | 0.000008 |    0.425358 |    0.0 | 0.000008 |</span>
<span class="sd">    | 18.01. |   0.416717 |           0.0 |                   0.0 |                  5.0 |                 0.1 |               0.1 |    0.0 |           0.0 |       0.000007 | 0.000007 |    0.416717 |    0.0 | 0.000007 |</span>
<span class="sd">    | 19.01. |   0.408077 |           0.0 |                   0.0 |                  5.0 |                 0.1 |               0.1 |    0.0 |           0.0 |       0.000006 | 0.000006 |    0.408077 |    0.0 | 0.000006 |</span>
<span class="sd">    | 20.01. |   0.399436 |           0.0 |                   0.0 |                  5.0 |                 0.1 |               0.1 |    0.0 |           0.0 |       0.000006 | 0.000006 |    0.399436 |    0.0 | 0.000006 |</span>

<span class="sd">There is no indication of an error in the water balance:</span>

<span class="sd">&gt;&gt;&gt; round_(model.check_waterbalance(conditions))</span>
<span class="sd">0.0</span>

<span class="sd">.. _dam_lreservoir_commissioning:</span>

<span class="sd">commissioning</span>
<span class="sd">_____________</span>

<span class="sd">This example extends the previous one with the commissioning mechanism shown and</span>
<span class="sd">discussed in the :ref:`analogue example &lt;dam_llake_commissioning&gt;` of application model</span>
<span class="sd">|dam_llake|:</span>

<span class="sd">.. integration-test::</span>

<span class="sd">    &gt;&gt;&gt; commission(&quot;2000-01-04&quot;)</span>
<span class="sd">    &gt;&gt;&gt; pemodel.sequences.inputs.referenceevapotranspiration.series = 50.0</span>
<span class="sd">    &gt;&gt;&gt; test(&quot;dam_lreservoir_commissioning&quot;)</span>
<span class="sd">    |   date | waterlevel | precipitation | adjustedprecipitation | potentialevaporation | adjustedevaporation | actualevaporation | inflow | actualrelease | flooddischarge |  outflow | watervolume | input_ |   output |</span>
<span class="sd">    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="sd">    | 01.01. |        0.0 |           0.0 |                   0.0 |                 50.0 |                 0.8 |               0.0 |    0.0 |           0.0 |            0.0 |      0.0 |         0.0 |    0.0 |      0.0 |</span>
<span class="sd">    | 02.01. |        0.0 |          50.0 |                   1.0 |                 50.0 |                0.96 |              0.96 |    0.0 |           0.0 |            0.0 |     0.04 |         0.0 |    0.0 |     0.04 |</span>
<span class="sd">    | 03.01. |        0.0 |           0.0 |                   0.0 |                 50.0 |               0.992 |             0.992 |    6.0 |           0.0 |            0.0 |    5.008 |         0.0 |    6.0 |    5.008 |</span>
<span class="sd">    | 04.01. |   0.774444 |           0.0 |                   0.0 |                 50.0 |              0.9984 |          0.998245 |   12.0 |      2.038238 |       0.000039 | 2.038277 |    0.774444 |   12.0 | 2.038277 |</span>
<span class="sd">    | 05.01. |    1.20612 |           0.0 |                   0.0 |                 50.0 |             0.99968 |           0.99968 |   10.0 |           4.0 |       0.004079 | 4.004079 |     1.20612 |   10.0 | 4.004079 |</span>
<span class="sd">    | 06.01. |   1.290108 |           0.0 |                   0.0 |                 50.0 |            0.999936 |          0.999936 |    6.0 |           4.0 |       0.027972 | 4.027972 |    1.290108 |    6.0 | 4.027972 |</span>
<span class="sd">    | 07.01. |   1.115626 |           0.0 |                   0.0 |                 50.0 |            0.999987 |          0.999987 |    3.0 |           4.0 |       0.019481 | 4.019481 |    1.115626 |    3.0 | 4.019481 |</span>
<span class="sd">    | 08.01. |   0.856204 |           0.0 |                   0.0 |                 50.0 |            0.999997 |          0.999997 |    2.0 |           4.0 |       0.002572 | 4.002572 |    0.856204 |    2.0 | 4.002572 |</span>
<span class="sd">    | 09.01. |   0.534856 |           0.0 |                   0.0 |                 50.0 |            0.999999 |          0.999999 |    1.0 |      3.719161 |       0.000152 | 3.719313 |    0.534856 |    1.0 | 3.719313 |</span>
<span class="sd">    | 10.01. |   0.429684 |           0.0 |                   0.0 |                 50.0 |                 1.0 |               1.0 |    0.0 |      0.217251 |       0.000013 | 0.217263 |    0.429684 |    0.0 | 0.217263 |</span>
<span class="sd">    | 11.01. |   0.343284 |           0.0 |                   0.0 |                 50.0 |                 1.0 |               1.0 |    0.0 |           0.0 |       0.000005 | 0.000005 |    0.343284 |    0.0 | 0.000005 |</span>
<span class="sd">    | 12.01. |   0.256884 |           0.0 |                   0.0 |                 50.0 |                 1.0 |               1.0 |    0.0 |           0.0 |       0.000002 | 0.000002 |    0.256884 |    0.0 | 0.000002 |</span>
<span class="sd">    | 13.01. |   0.170484 |           0.0 |                   0.0 |                 50.0 |                 1.0 |               1.0 |    0.0 |           0.0 |       0.000001 | 0.000001 |    0.170484 |    0.0 | 0.000001 |</span>
<span class="sd">    | 14.01. |   0.084084 |           0.0 |                   0.0 |                 50.0 |                 1.0 |               1.0 |    0.0 |           0.0 |            0.0 |      0.0 |    0.084084 |    0.0 |      0.0 |</span>
<span class="sd">    | 15.01. |  -0.000466 |           0.0 |                   0.0 |                 50.0 |                 1.0 |           0.97858 |    0.0 |           0.0 |            0.0 |      0.0 |   -0.000466 |    0.0 |      0.0 |</span>
<span class="sd">    | 16.01. |  -0.001305 |           0.0 |                   0.0 |                 50.0 |                 1.0 |           0.00971 |    0.0 |           0.0 |            0.0 |      0.0 |   -0.001305 |    0.0 |      0.0 |</span>
<span class="sd">    | 17.01. |  -0.001454 |           0.0 |                   0.0 |                 50.0 |                 1.0 |          0.001729 |    0.0 |           0.0 |            0.0 |      0.0 |   -0.001454 |    0.0 |      0.0 |</span>
<span class="sd">    | 18.01. |  -0.001542 |           0.0 |                   0.0 |                 50.0 |                 1.0 |          0.001016 |    0.0 |           0.0 |            0.0 |      0.0 |   -0.001542 |    0.0 |      0.0 |</span>
<span class="sd">    | 19.01. |  -0.001604 |           0.0 |                   0.0 |                 50.0 |                 1.0 |          0.000722 |    0.0 |           0.0 |            0.0 |      0.0 |   -0.001604 |    0.0 |      0.0 |</span>
<span class="sd">    | 20.01. |  -0.001653 |           0.0 |                   0.0 |                 50.0 |                 1.0 |          0.000561 |    0.0 |           0.0 |            0.0 |      0.0 |   -0.001653 |    0.0 |      0.0 |</span>

<span class="sd">&gt;&gt;&gt; round_(model.check_waterbalance(conditions))</span>
<span class="sd">0.0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># import...</span>
<span class="c1"># ...from HydPy</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hydpy.auxs.anntools</span><span class="w"> </span><span class="kn">import</span> <span class="n">ANN</span>  <span class="c1"># pylint: disable=unused-import</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hydpy.auxs.ppolytools</span><span class="w"> </span><span class="kn">import</span> <span class="n">Poly</span><span class="p">,</span> <span class="n">PPoly</span>  <span class="c1"># pylint: disable=unused-import</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hydpy.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">modeltools</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hydpy.core.typingtools</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hydpy.interfaces</span><span class="w"> </span><span class="kn">import</span> <span class="n">petinterfaces</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hydpy.interfaces</span><span class="w"> </span><span class="kn">import</span> <span class="n">precipinterfaces</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hydpy.exe.modelimports</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>

<span class="c1"># ...from dam</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hydpy.models.dam</span><span class="w"> </span><span class="kn">import</span> <span class="n">dam_model</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hydpy.models.dam</span><span class="w"> </span><span class="kn">import</span> <span class="n">dam_solver</span>


<div class="viewcode-block" id="Model">
<a class="viewcode-back" href="../../../dam_lreservoir.html#hydpy.models.dam_lreservoir.Model">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Model</span><span class="p">(</span>
    <span class="n">dam_model</span><span class="o">.</span><span class="n">ELSIEModel</span><span class="p">,</span>
    <span class="n">dam_model</span><span class="o">.</span><span class="n">MixinSimpleWaterBalance</span><span class="p">,</span>
    <span class="n">dam_model</span><span class="o">.</span><span class="n">Main_PrecipModel_V2</span><span class="p">,</span>
    <span class="n">dam_model</span><span class="o">.</span><span class="n">Main_PEModel_V1</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;|dam_lreservoir.DOCNAME.complete|.&quot;&quot;&quot;</span>

    <span class="n">DOCNAME</span> <span class="o">=</span> <span class="n">modeltools</span><span class="o">.</span><span class="n">DocName</span><span class="p">(</span>
        <span class="n">short</span><span class="o">=</span><span class="s2">&quot;Dam-L-Res&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;reservoir model adopted from LARSIM&quot;</span>
    <span class="p">)</span>
    <span class="n">__HYDPY_ROOTMODEL__</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">SOLVERPARAMETERS</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">dam_solver</span><span class="o">.</span><span class="n">AbsErrorMax</span><span class="p">,</span>
        <span class="n">dam_solver</span><span class="o">.</span><span class="n">RelErrorMax</span><span class="p">,</span>
        <span class="n">dam_solver</span><span class="o">.</span><span class="n">RelDTMin</span><span class="p">,</span>
        <span class="n">dam_solver</span><span class="o">.</span><span class="n">RelDTMax</span><span class="p">,</span>
        <span class="n">dam_solver</span><span class="o">.</span><span class="n">MaxEval</span><span class="p">,</span>
        <span class="n">dam_solver</span><span class="o">.</span><span class="n">MaxCFL</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">SOLVERSEQUENCES</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">INLET_METHODS</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">dam_model</span><span class="o">.</span><span class="n">Calc_Precipitation_V1</span><span class="p">,</span>
        <span class="n">dam_model</span><span class="o">.</span><span class="n">Calc_PotentialEvaporation_V1</span><span class="p">,</span>
        <span class="n">dam_model</span><span class="o">.</span><span class="n">Calc_AdjustedEvaporation_V1</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">OBSERVER_METHODS</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">RECEIVER_METHODS</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">ADD_METHODS</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">PART_ODE_METHODS</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">dam_model</span><span class="o">.</span><span class="n">Calc_AdjustedPrecipitation_V1</span><span class="p">,</span>
        <span class="n">dam_model</span><span class="o">.</span><span class="n">Pick_Inflow_V1</span><span class="p">,</span>
        <span class="n">dam_model</span><span class="o">.</span><span class="n">Calc_WaterLevel_V1</span><span class="p">,</span>
        <span class="n">dam_model</span><span class="o">.</span><span class="n">Calc_ActualEvaporation_V3</span><span class="p">,</span>
        <span class="n">dam_model</span><span class="o">.</span><span class="n">Calc_SurfaceArea_V1</span><span class="p">,</span>
        <span class="n">dam_model</span><span class="o">.</span><span class="n">Calc_AllowedDischarge_V2</span><span class="p">,</span>
        <span class="n">dam_model</span><span class="o">.</span><span class="n">Calc_ActualRelease_V3</span><span class="p">,</span>
        <span class="n">dam_model</span><span class="o">.</span><span class="n">Calc_FloodDischarge_V1</span><span class="p">,</span>
        <span class="n">dam_model</span><span class="o">.</span><span class="n">Calc_Outflow_V7</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">FULL_ODE_METHODS</span> <span class="o">=</span> <span class="p">(</span><span class="n">dam_model</span><span class="o">.</span><span class="n">Update_WaterVolume_V1</span><span class="p">,)</span>
    <span class="n">OUTLET_METHODS</span> <span class="o">=</span> <span class="p">(</span><span class="n">dam_model</span><span class="o">.</span><span class="n">Calc_WaterLevel_V1</span><span class="p">,</span> <span class="n">dam_model</span><span class="o">.</span><span class="n">Pass_Outflow_V1</span><span class="p">)</span>
    <span class="n">SENDER_METHODS</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">SUBMODELINTERFACES</span> <span class="o">=</span> <span class="p">(</span><span class="n">precipinterfaces</span><span class="o">.</span><span class="n">PrecipModel_V2</span><span class="p">,</span> <span class="n">petinterfaces</span><span class="o">.</span><span class="n">PETModel_V1</span><span class="p">)</span>
    <span class="n">SUBMODELS</span> <span class="o">=</span> <span class="p">()</span>

    <span class="n">precipmodel</span> <span class="o">=</span> <span class="n">modeltools</span><span class="o">.</span><span class="n">SubmodelProperty</span><span class="p">(</span>
        <span class="n">precipinterfaces</span><span class="o">.</span><span class="n">PrecipModel_V2</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="n">pemodel</span> <span class="o">=</span> <span class="n">modeltools</span><span class="o">.</span><span class="n">SubmodelProperty</span><span class="p">(</span><span class="n">petinterfaces</span><span class="o">.</span><span class="n">PETModel_V1</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>



<span class="n">tester</span> <span class="o">=</span> <span class="n">Tester</span><span class="p">()</span>
<span class="n">cythonizer</span> <span class="o">=</span> <span class="n">Cythonizer</span><span class="p">()</span>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">HydPy 6.2.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">hydpy.models.dam_lreservoir</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2013-2025, HydPy Developers.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 9.0.4.
    </div>
  </body>
</html>