
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>testtools &#8212; HydPy 4.0.1 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="timetools" href="timetools.html" />
    <link rel="prev" title="seriestools" href="seriestools.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="timetools.html" title="timetools"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="seriestools.html" title="seriestools"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HydPy 4.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="framework.html" >Framework Tools</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="core.html" accesskey="U">Core Tools</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">testtools</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="testtools">
<span id="id1"></span><h1>testtools<a class="headerlink" href="#testtools" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-hydpy.core.testtools"></span><p>This module implements tools for testing <em>HydPy</em> and its models.</p>
<p>Module <a class="reference internal" href="#module-hydpy.core.testtools" title="hydpy.core.testtools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">testtools</span></code></a> implements the following members:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#hydpy.core.testtools.StdOutErr" title="hydpy.core.testtools.StdOutErr"><code class="xref py py-class docutils literal notranslate"><span class="pre">StdOutErr</span></code></a> Replaces <cite>sys.stdout</cite> and <cite>sys.stderr</cite> temporarily when calling method <a class="reference internal" href="#hydpy.core.testtools.Tester.perform_tests" title="hydpy.core.testtools.Tester.perform_tests"><code class="xref py py-func docutils literal notranslate"><span class="pre">perform_tests()</span></code></a> of class <a class="reference internal" href="#hydpy.core.testtools.Tester" title="hydpy.core.testtools.Tester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tester</span></code></a>.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.Tester" title="hydpy.core.testtools.Tester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tester</span></code></a> Tests either a base or an application model.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.mock_datetime_now" title="hydpy.core.testtools.mock_datetime_now"><code class="xref py py-func docutils literal notranslate"><span class="pre">mock_datetime_now()</span></code></a> Let class method <code class="xref py py-func docutils literal notranslate"><span class="pre">now()</span></code> of class <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> of module <a class="reference external" href="https://docs.python.org/3/library/datetime.html#module-datetime" title="(in Python v3.9)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">datetime</span></code></a> return the given date for testing purposes within a “with-block”.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.Array" title="hydpy.core.testtools.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a> Assures that attributes are <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.20)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a> objects.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.ArrayDescriptor" title="hydpy.core.testtools.ArrayDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayDescriptor</span></code></a> A descriptor for handling values of <a class="reference internal" href="#hydpy.core.testtools.Array" title="hydpy.core.testtools.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a> objects.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.Test" title="hydpy.core.testtools.Test"><code class="xref py py-class docutils literal notranslate"><span class="pre">Test</span></code></a> Base class for <a class="reference internal" href="#hydpy.core.testtools.IntegrationTest" title="hydpy.core.testtools.IntegrationTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegrationTest</span></code></a> and <a class="reference internal" href="#hydpy.core.testtools.UnitTest" title="hydpy.core.testtools.UnitTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnitTest</span></code></a>.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.PlottingOptions" title="hydpy.core.testtools.PlottingOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlottingOptions</span></code></a> Plotting options of class <a class="reference internal" href="#hydpy.core.testtools.IntegrationTest" title="hydpy.core.testtools.IntegrationTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegrationTest</span></code></a>.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.IntegrationTest" title="hydpy.core.testtools.IntegrationTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegrationTest</span></code></a> Defines model integration doctests.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.UnitTest" title="hydpy.core.testtools.UnitTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnitTest</span></code></a> Defines unit doctests for a single model method.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.Open" title="hydpy.core.testtools.Open"><code class="xref py py-class docutils literal notranslate"><span class="pre">Open</span></code></a> Replace <a class="reference internal" href="#hydpy.core.testtools.Open" title="hydpy.core.testtools.Open"><code class="xref py py-class docutils literal notranslate"><span class="pre">Open</span></code></a> in doctests temporarily.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.TestIO" title="hydpy.core.testtools.TestIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestIO</span></code></a> Prepare an environment for testing IO functionalities.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.make_abc_testable" title="hydpy.core.testtools.make_abc_testable"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_abc_testable()</span></code></a> Return a concrete version of the given abstract base class for testing purposes.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.NumericalDifferentiator" title="hydpy.core.testtools.NumericalDifferentiator"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumericalDifferentiator</span></code></a> Approximate the derivatives of <a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.ModelSequence" title="hydpy.core.sequencetools.ModelSequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelSequence</span></code></a> values based on the finite difference approach.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.update_integrationtests" title="hydpy.core.testtools.update_integrationtests"><code class="xref py py-func docutils literal notranslate"><span class="pre">update_integrationtests()</span></code></a> Write the docstring of the given application model, updated with the current simulation results, to file.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.check_methodorder" title="hydpy.core.testtools.check_methodorder"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_methodorder()</span></code></a> Check that <em>HydPy</em> calls the methods of the given application model in the correct order for each simulation step.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.check_selectedvariables" title="hydpy.core.testtools.check_selectedvariables"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_selectedvariables()</span></code></a> Perform consistency checks regarding the <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> and <a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.Sequence_" title="hydpy.core.sequencetools.Sequence_"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence_</span></code></a> subclasses selected by the given <a class="reference internal" href="modeltools.html#hydpy.core.modeltools.Method" title="hydpy.core.modeltools.Method"><code class="xref py py-class docutils literal notranslate"><span class="pre">Method</span></code></a> subclass.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.perform_consistencychecks" title="hydpy.core.testtools.perform_consistencychecks"><code class="xref py py-func docutils literal notranslate"><span class="pre">perform_consistencychecks()</span></code></a> Perform all available consistency checks for the given application model.</p></li>
<li><p><a class="reference internal" href="#hydpy.core.testtools.save_autofig" title="hydpy.core.testtools.save_autofig"><code class="xref py py-func docutils literal notranslate"><span class="pre">save_autofig()</span></code></a> Save a figure automatically generated during testing in the special <cite>autofig</cite> sub-package so that Sphinx can include it into the documentation later.</p></li>
</ul>
</div></blockquote>
<hr class="docutils" />
<dl class="py class">
<dt id="hydpy.core.testtools.StdOutErr">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">StdOutErr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#StdOutErr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.StdOutErr" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Replaces <cite>sys.stdout</cite> and <cite>sys.stderr</cite> temporarily when calling
method <a class="reference internal" href="#hydpy.core.testtools.Tester.perform_tests" title="hydpy.core.testtools.Tester.perform_tests"><code class="xref py py-func docutils literal notranslate"><span class="pre">perform_tests()</span></code></a> of class <a class="reference internal" href="#hydpy.core.testtools.Tester" title="hydpy.core.testtools.Tester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tester</span></code></a>.</p>
<dl class="py attribute">
<dt id="hydpy.core.testtools.StdOutErr.indent">
<code class="sig-name descname"><span class="pre">indent</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></em><a class="headerlink" href="#hydpy.core.testtools.StdOutErr.indent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="hydpy.core.testtools.StdOutErr.texts">
<code class="sig-name descname"><span class="pre">texts</span></code><em class="property"><span class="pre">:</span> <span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#hydpy.core.testtools.StdOutErr.texts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.StdOutErr.write">
<code class="sig-name descname"><span class="pre">write</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/core/testtools.html#StdOutErr.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.StdOutErr.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Memorise the given text for later writing.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.StdOutErr.print_">
<code class="sig-name descname"><span class="pre">print_</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/core/testtools.html#StdOutErr.print_"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.StdOutErr.print_" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the memorised text to the original <cite>sys.stdout</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.StdOutErr.flush">
<code class="sig-name descname"><span class="pre">flush</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/core/testtools.html#StdOutErr.flush"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.StdOutErr.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Do nothing.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hydpy.core.testtools.Tester">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">Tester</span></code><a class="reference internal" href="_modules/hydpy/core/testtools.html#Tester"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.Tester" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Tests either a base or an application model.</p>
<p>Usually, a <a class="reference internal" href="#hydpy.core.testtools.Tester" title="hydpy.core.testtools.Tester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tester</span></code></a> object is initialised at the end of the <cite>__init__</cite>
file of its base model or the end of the module of an application model.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models</span> <span class="kn">import</span> <span class="n">hland</span><span class="p">,</span> <span class="n">hland_v1</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hland</span><span class="o">.</span><span class="n">tester</span><span class="o">.</span><span class="n">package</span>
<span class="go">&#39;hydpy.models.hland&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hland_v1</span><span class="o">.</span><span class="n">tester</span><span class="o">.</span><span class="n">package</span>
<span class="go">&#39;hydpy.models&#39;</span>
</pre></div>
</div>
<dl class="py attribute">
<dt id="hydpy.core.testtools.Tester.filepath">
<code class="sig-name descname"><span class="pre">filepath</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></em><a class="headerlink" href="#hydpy.core.testtools.Tester.filepath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="hydpy.core.testtools.Tester.package">
<code class="sig-name descname"><span class="pre">package</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></em><a class="headerlink" href="#hydpy.core.testtools.Tester.package" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="hydpy.core.testtools.Tester.ispackage">
<code class="sig-name descname"><span class="pre">ispackage</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a></em><a class="headerlink" href="#hydpy.core.testtools.Tester.ispackage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.Tester.filenames">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">filenames</span></code><a class="headerlink" href="#hydpy.core.testtools.Tester.filenames" title="Permalink to this definition">¶</a></dt>
<dd><p>The filenames which define the considered base or application model.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models</span> <span class="kn">import</span> <span class="n">hland</span><span class="p">,</span> <span class="n">hland_v1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">hland</span><span class="o">.</span><span class="n">tester</span><span class="o">.</span><span class="n">filenames</span><span class="p">)</span>
<span class="go">[&#39;__init__.py&#39;,</span>
<span class="go"> &#39;hland_constants.py&#39;,</span>
<span class="go"> &#39;hland_control.py&#39;,</span>
<span class="go"> &#39;hland_derived.py&#39;,</span>
<span class="go"> &#39;hland_fluxes.py&#39;,</span>
<span class="go"> &#39;hland_inputs.py&#39;,</span>
<span class="go"> &#39;hland_logs.py&#39;,</span>
<span class="go"> &#39;hland_masks.py&#39;,</span>
<span class="go"> &#39;hland_model.py&#39;,</span>
<span class="go"> &#39;hland_outlets.py&#39;,</span>
<span class="go"> &#39;hland_parameters.py&#39;,</span>
<span class="go"> &#39;hland_sequences.py&#39;,</span>
<span class="go"> &#39;hland_states.py&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hland_v1</span><span class="o">.</span><span class="n">tester</span><span class="o">.</span><span class="n">filenames</span>
<span class="go">[&#39;hland_v1.py&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.Tester.modulenames">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">modulenames</span></code><a class="headerlink" href="#hydpy.core.testtools.Tester.modulenames" title="Permalink to this definition">¶</a></dt>
<dd><p>The module names to be taken into account for testing.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models</span> <span class="kn">import</span> <span class="n">hland</span><span class="p">,</span> <span class="n">hland_v1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">hland</span><span class="o">.</span><span class="n">tester</span><span class="o">.</span><span class="n">modulenames</span><span class="p">)</span>
<span class="go">[&#39;hland_constants&#39;,</span>
<span class="go"> &#39;hland_control&#39;,</span>
<span class="go"> &#39;hland_derived&#39;,</span>
<span class="go"> &#39;hland_fluxes&#39;,</span>
<span class="go"> &#39;hland_inputs&#39;,</span>
<span class="go"> &#39;hland_logs&#39;,</span>
<span class="go"> &#39;hland_masks&#39;,</span>
<span class="go"> &#39;hland_model&#39;,</span>
<span class="go"> &#39;hland_outlets&#39;,</span>
<span class="go"> &#39;hland_parameters&#39;,</span>
<span class="go"> &#39;hland_sequences&#39;,</span>
<span class="go"> &#39;hland_states&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hland_v1</span><span class="o">.</span><span class="n">tester</span><span class="o">.</span><span class="n">modulenames</span>
<span class="go">[&#39;hland_v1&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.Tester.perform_tests">
<code class="sig-name descname"><span class="pre">perform_tests</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/core/testtools.html#Tester.perform_tests"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.Tester.perform_tests" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform all doctests either in Python or in Cython mode depending
on the state of <a class="reference internal" href="optiontools.html#hydpy.core.optiontools.Options.usecython" title="hydpy.core.optiontools.Options.usecython"><code class="xref py py-const docutils literal notranslate"><span class="pre">usecython</span></code></a> set in module <code class="xref py py-mod docutils literal notranslate"><span class="pre">pub</span></code>.</p>
<p>Usually, <a class="reference internal" href="#hydpy.core.testtools.Tester.perform_tests" title="hydpy.core.testtools.Tester.perform_tests"><code class="xref py py-func docutils literal notranslate"><span class="pre">perform_tests()</span></code></a> is triggered automatically by a <a class="reference internal" href="modelutils.html#hydpy.cythons.modelutils.Cythonizer" title="hydpy.cythons.modelutils.Cythonizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cythonizer</span></code></a>
object assigned to the same base or application model as a <a class="reference internal" href="#hydpy.core.testtools.Tester" title="hydpy.core.testtools.Tester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tester</span></code></a> object.
However, you are free to call it any time when in doubt of the functionality
of a particular base or application model.  Doing so might change some of the
states of your current configuration, but only temporarily (besides
“projectname” we pick the <a class="reference internal" href="timetools.html#hydpy.core.timetools.Timegrids" title="hydpy.core.timetools.Timegrids"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timegrids</span></code></a> object of module <code class="xref py py-mod docutils literal notranslate"><span class="pre">pub</span></code> as an example,
which is changed multiple times during testing but finally reset to the
original value):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">pub</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pub</span><span class="o">.</span><span class="n">projectname</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pub</span><span class="o">.</span><span class="n">timegrids</span> <span class="o">=</span> <span class="s2">&quot;2000-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2001-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;1d&quot;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models</span> <span class="kn">import</span> <span class="n">hland</span><span class="p">,</span> <span class="n">hland_v1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hland</span><span class="o">.</span><span class="n">tester</span><span class="o">.</span><span class="n">perform_tests</span><span class="p">()</span>   
<span class="go">Test package hydpy.models.hland in ...ython mode.</span>
<span class="go">    * hland_constants:</span>
<span class="go">        no failures occurred</span>
<span class="go">    * hland_control:</span>
<span class="go">        no failures occurred</span>
<span class="go">    * hland_derived:</span>
<span class="go">        no failures occurred</span>
<span class="go">    * hland_fluxes:</span>
<span class="go">        no failures occurred</span>
<span class="go">    * hland_inputs:</span>
<span class="go">        no failures occurred</span>
<span class="go">    * hland_logs:</span>
<span class="go">        no failures occurred</span>
<span class="go">    * hland_masks:</span>
<span class="go">        no failures occurred</span>
<span class="go">    * hland_model:</span>
<span class="go">        no failures occurred</span>
<span class="go">    * hland_outlets:</span>
<span class="go">        no failures occurred</span>
<span class="go">    * hland_parameters:</span>
<span class="go">        no failures occurred</span>
<span class="go">    * hland_sequences:</span>
<span class="go">        no failures occurred</span>
<span class="go">    * hland_states:</span>
<span class="go">        no failures occurred</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hland_v1</span><span class="o">.</span><span class="n">tester</span><span class="o">.</span><span class="n">perform_tests</span><span class="p">()</span>   
<span class="go">Test module hland_v1 in ...ython mode.</span>
<span class="go">    * hland_v1:</span>
<span class="go">        no failures occurred</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pub</span><span class="o">.</span><span class="n">projectname</span>
<span class="go">&#39;test&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pub</span><span class="o">.</span><span class="n">timegrids</span>
<span class="go">Timegrids(&quot;2000-01-01 00:00:00&quot;,</span>
<span class="go">          &quot;2001-01-01 00:00:00&quot;,</span>
<span class="go">          &quot;1d&quot;)</span>
</pre></div>
</div>
<p>To show the reporting of possible errors, we change the
string representation of parameter <a class="reference internal" href="hland.html#hydpy.models.hland.hland_control.ZoneType" title="hydpy.models.hland.hland_control.ZoneType"><code class="xref py py-class docutils literal notranslate"><span class="pre">ZoneType</span></code></a>
temporarily.  Again, the <a class="reference internal" href="timetools.html#hydpy.core.timetools.Timegrids" title="hydpy.core.timetools.Timegrids"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timegrids</span></code></a> object is reset to its
initial state after testing:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">unittest</span> <span class="kn">import</span> <span class="n">mock</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;hydpy.models.hland.hland_control.ZoneType.__repr__&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">return_value</span><span class="o">=</span><span class="s2">&quot;damaged&quot;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">hland</span><span class="o">.</span><span class="n">tester</span><span class="o">.</span><span class="n">perform_tests</span><span class="p">()</span>   
<span class="go">Test package hydpy.models.hland in ...ython mode.</span>
<span class="go">    * hland_constants:</span>
<span class="go">        no failures occurred</span>
<span class="go">    * hland_control:</span>
<span class="go">        ******...hland_control.py&quot;, line ..., in hydpy.models.hland.hland_control.ZoneType</span>
<span class="go">        Failed example:</span>
<span class="go">            zonetype</span>
<span class="go">        Expected:</span>
<span class="go">            zonetype(FIELD, FOREST, GLACIER, ILAKE, ILAKE, FIELD)</span>
<span class="go">        Got:</span>
<span class="go">            damaged</span>
<span class="go">        **********************************************************************</span>
<span class="go">        1</span>
<span class="go">        items had failures:</span>
<span class="go">           1 of   6 in hydpy.models.hland.hland_control.ZoneType</span>
<span class="go">        ***Test Failed***</span>
<span class="go">        1</span>
<span class="go">        failures.</span>
<span class="go">    * hland_derived:</span>
<span class="go">        no failures occurred</span>
<span class="go">    ...</span>
<span class="go">    * hland_states:</span>
<span class="go">        no failures occurred</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pub</span><span class="o">.</span><span class="n">projectname</span>
<span class="go">&#39;test&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pub</span><span class="o">.</span><span class="n">timegrids</span>
<span class="go">Timegrids(&quot;2000-01-01 00:00:00&quot;,</span>
<span class="go">          &quot;2001-01-01 00:00:00&quot;,</span>
<span class="go">          &quot;1d&quot;)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hydpy.core.testtools.Array">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">Array</span></code><a class="reference internal" href="_modules/hydpy/core/testtools.html#Array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.Array" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Assures that attributes are <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.20)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a> objects.</p>
</dd></dl>

<dl class="py class">
<dt id="hydpy.core.testtools.ArrayDescriptor">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">ArrayDescriptor</span></code><a class="reference internal" href="_modules/hydpy/core/testtools.html#ArrayDescriptor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.ArrayDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A descriptor for handling values of <a class="reference internal" href="#hydpy.core.testtools.Array" title="hydpy.core.testtools.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a> objects.</p>
</dd></dl>

<dl class="py class">
<dt id="hydpy.core.testtools.Test">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">Test</span></code><a class="reference internal" href="_modules/hydpy/core/testtools.html#Test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.Test" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class for <a class="reference internal" href="#hydpy.core.testtools.IntegrationTest" title="hydpy.core.testtools.IntegrationTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegrationTest</span></code></a> and <a class="reference internal" href="#hydpy.core.testtools.UnitTest" title="hydpy.core.testtools.UnitTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnitTest</span></code></a>.</p>
<p>This base class defines the printing of the test results primarily.
How the tests shall be prepared and performed is to be defined in
its subclasses.</p>
<dl class="py attribute">
<dt id="hydpy.core.testtools.Test.parseqs">
<code class="sig-name descname"><span class="pre">parseqs</span></code><em class="property"><span class="pre">:</span> <span class="pre">Any</span></em><a class="headerlink" href="#hydpy.core.testtools.Test.parseqs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="hydpy.core.testtools.Test.HEADER_OF_FIRST_COL">
<code class="sig-name descname"><span class="pre">HEADER_OF_FIRST_COL</span></code><em class="property"><span class="pre">:</span> <span class="pre">Any</span></em><a class="headerlink" href="#hydpy.core.testtools.Test.HEADER_OF_FIRST_COL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="hydpy.core.testtools.Test.inits">
<code class="sig-name descname"><span class="pre">inits</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;hydpy.core.testtools.Array</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#hydpy.core.testtools.Test.inits" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores arrays for setting the same values of parameters and/or
sequences before each new experiment.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.Test.raw_first_col_strings">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">raw_first_col_strings</span></code><a class="headerlink" href="#hydpy.core.testtools.Test.raw_first_col_strings" title="Permalink to this definition">¶</a></dt>
<dd><p>To be implemented by the subclasses of <a class="reference internal" href="#hydpy.core.testtools.Test" title="hydpy.core.testtools.Test"><code class="xref py py-class docutils literal notranslate"><span class="pre">Test</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.Test.get_output_array">
<em class="property"><span class="pre">abstract</span> <span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">get_output_array</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parseqs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#Test.get_output_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.Test.get_output_array" title="Permalink to this definition">¶</a></dt>
<dd><p>To be implemented by the subclasses of <a class="reference internal" href="#hydpy.core.testtools.Test" title="hydpy.core.testtools.Test"><code class="xref py py-class docutils literal notranslate"><span class="pre">Test</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.Test.nmb_rows">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">nmb_rows</span></code><a class="headerlink" href="#hydpy.core.testtools.Test.nmb_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of rows of the table.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.Test.nmb_cols">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">nmb_cols</span></code><a class="headerlink" href="#hydpy.core.testtools.Test.nmb_cols" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of columns in the table.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.Test.raw_header_strings">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">raw_header_strings</span></code><a class="headerlink" href="#hydpy.core.testtools.Test.raw_header_strings" title="Permalink to this definition">¶</a></dt>
<dd><p>All raw strings for the tables header.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.Test.raw_body_strings">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">raw_body_strings</span></code><a class="headerlink" href="#hydpy.core.testtools.Test.raw_body_strings" title="Permalink to this definition">¶</a></dt>
<dd><p>All raw strings for the body of the table.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.Test.raw_strings">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">raw_strings</span></code><a class="headerlink" href="#hydpy.core.testtools.Test.raw_strings" title="Permalink to this definition">¶</a></dt>
<dd><p>All raw strings for the complete table.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.Test.col_widths">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">col_widths</span></code><a class="headerlink" href="#hydpy.core.testtools.Test.col_widths" title="Permalink to this definition">¶</a></dt>
<dd><p>The widths of all columns of the table.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.Test.col_separators">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">col_separators</span></code><a class="headerlink" href="#hydpy.core.testtools.Test.col_separators" title="Permalink to this definition">¶</a></dt>
<dd><p>The separators for adjacent columns.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.Test.row_nmb_characters">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">row_nmb_characters</span></code><a class="headerlink" href="#hydpy.core.testtools.Test.row_nmb_characters" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of characters of a single row of the table.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.Test.make_table">
<code class="sig-name descname"><span class="pre">make_table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx2</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><a class="reference internal" href="_modules/hydpy/core/testtools.html#Test.make_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.Test.make_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the result table between the given indices.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.Test.print_table">
<code class="sig-name descname"><span class="pre">print_table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx2</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/core/testtools.html#Test.print_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.Test.print_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the result table between the given indices.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hydpy.core.testtools.PlottingOptions">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">PlottingOptions</span></code><a class="reference internal" href="_modules/hydpy/core/testtools.html#PlottingOptions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.PlottingOptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Plotting options of class <a class="reference internal" href="#hydpy.core.testtools.IntegrationTest" title="hydpy.core.testtools.IntegrationTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegrationTest</span></code></a>.</p>
<dl class="py attribute">
<dt id="hydpy.core.testtools.PlottingOptions.width">
<code class="sig-name descname"><span class="pre">width</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></em><a class="headerlink" href="#hydpy.core.testtools.PlottingOptions.width" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="hydpy.core.testtools.PlottingOptions.height">
<code class="sig-name descname"><span class="pre">height</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></em><a class="headerlink" href="#hydpy.core.testtools.PlottingOptions.height" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="hydpy.core.testtools.PlottingOptions.axis1">
<code class="sig-name descname"><span class="pre">axis1</span></code><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.IOSequence" title="hydpy.core.sequencetools.IOSequence"><span class="pre">hydpy.core.sequencetools.IOSequence</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.IOSequence" title="hydpy.core.sequencetools.IOSequence"><span class="pre">hydpy.core.sequencetools.IOSequence</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#hydpy.core.testtools.PlottingOptions.axis1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="hydpy.core.testtools.PlottingOptions.axis2">
<code class="sig-name descname"><span class="pre">axis2</span></code><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.IOSequence" title="hydpy.core.sequencetools.IOSequence"><span class="pre">hydpy.core.sequencetools.IOSequence</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.IOSequence" title="hydpy.core.sequencetools.IOSequence"><span class="pre">hydpy.core.sequencetools.IOSequence</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#hydpy.core.testtools.PlottingOptions.axis2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hydpy.core.testtools.IntegrationTest">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">IntegrationTest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="devicetools.html#hydpy.core.devicetools.Element" title="hydpy.core.devicetools.Element"><span class="pre">hydpy.core.devicetools.Element</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">seqs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#IntegrationTest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.IntegrationTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#hydpy.core.testtools.Test" title="hydpy.core.testtools.Test"><code class="xref py py-class docutils literal notranslate"><span class="pre">hydpy.core.testtools.Test</span></code></a></p>
<p>Defines model integration doctests.</p>
<p>The functionality of <a class="reference internal" href="#hydpy.core.testtools.IntegrationTest" title="hydpy.core.testtools.IntegrationTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegrationTest</span></code></a> is easiest to understand by
inspecting doctests like the ones of modules <a class="reference internal" href="llake_v1.html#module-hydpy.models.llake_v1" title="hydpy.models.llake_v1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">llake_v1</span></code></a> or <a class="reference internal" href="arma_v1.html#module-hydpy.models.arma_v1" title="hydpy.models.arma_v1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">arma_v1</span></code></a>.</p>
<p>Note that all condition sequences (state and logging sequences) are
initialised in accordance with the values are given as <cite>inits</cite> values.
The values of the simulation sequences of outlet and sender nodes are
always set to zero before each test run.  All other parameter and
sequence values can be changed between different test runs.</p>
<dl class="py attribute">
<dt id="hydpy.core.testtools.IntegrationTest.HEADER_OF_FIRST_COL">
<code class="sig-name descname"><span class="pre">HEADER_OF_FIRST_COL</span></code><em class="property"><span class="pre">:</span> <span class="pre">Any</span></em><em class="property"> <span class="pre">=</span> <span class="pre">'date'</span></em><a class="headerlink" href="#hydpy.core.testtools.IntegrationTest.HEADER_OF_FIRST_COL" title="Permalink to this definition">¶</a></dt>
<dd><p>The header of the first column containing dates.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.core.testtools.IntegrationTest.plotting_options">
<code class="sig-name descname"><span class="pre">plotting_options</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;hydpy.core.testtools.PlottingOptions</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#hydpy.core.testtools.IntegrationTest.plotting_options" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="hydpy.core.testtools.IntegrationTest.parseqs">
<code class="sig-name descname"><span class="pre">parseqs</span></code><em class="property"><span class="pre">:</span> <span class="pre">Any</span></em><a class="headerlink" href="#hydpy.core.testtools.IntegrationTest.parseqs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.IntegrationTest.raw_first_col_strings">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">raw_first_col_strings</span></code><a class="headerlink" href="#hydpy.core.testtools.IntegrationTest.raw_first_col_strings" title="Permalink to this definition">¶</a></dt>
<dd><p>The raw date strings of the first column, except the header.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.IntegrationTest.dateformat">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">dateformat</span></code><a class="headerlink" href="#hydpy.core.testtools.IntegrationTest.dateformat" title="Permalink to this definition">¶</a></dt>
<dd><p>Format string for printing dates in the first column of the table.</p>
<p>See the documentation on module <a class="reference external" href="https://docs.python.org/3/library/datetime.html#module-datetime" title="(in Python v3.9)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">datetime</span></code></a> for the format strings
allowed.</p>
<p>You can query and change property <a class="reference internal" href="#hydpy.core.testtools.IntegrationTest.dateformat" title="hydpy.core.testtools.IntegrationTest.dateformat"><code class="xref py py-const docutils literal notranslate"><span class="pre">dateformat</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Element</span><span class="p">,</span> <span class="n">IntegrationTest</span><span class="p">,</span> <span class="n">prepare_model</span><span class="p">,</span> <span class="n">pub</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pub</span><span class="o">.</span><span class="n">timegrids</span> <span class="o">=</span> <span class="s2">&quot;2000-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2001-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;1d&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;element&quot;</span><span class="p">,</span> <span class="n">outlets</span><span class="o">=</span><span class="s2">&quot;node&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">element</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">prepare_model</span><span class="p">(</span><span class="s2">&quot;hland_v1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">__package__</span> <span class="o">=</span> <span class="s2">&quot;testpackage&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tester</span> <span class="o">=</span> <span class="n">IntegrationTest</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tester</span><span class="o">.</span><span class="n">dateformat</span>
<span class="go">&#39;%Y-%m-%d %H:%M:%S&#39;</span>
</pre></div>
</div>
<p>Passing an ill-defined format string leads to the following error:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tester</span><span class="o">.</span><span class="n">dateformat</span> <span class="o">=</span> <span class="mi">999</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">The given date format `999` is not a valid format string for `datetime` objects.  Please read the documentation on module datetime of the Python standard library for for further information.</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tester</span><span class="o">.</span><span class="n">dateformat</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%x</span><span class="s2">&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tester</span><span class="o">.</span><span class="n">dateformat</span>
<span class="go">&#39;%x&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.IntegrationTest.get_output_array">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">get_output_array</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parseqs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#IntegrationTest.get_output_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.IntegrationTest.get_output_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array containing the output results of the given
sequence.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.IntegrationTest.prepare_node_sequences">
<code class="sig-name descname"><span class="pre">prepare_node_sequences</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#IntegrationTest.prepare_node_sequences"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.IntegrationTest.prepare_node_sequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare the simulations sequences of all nodes in.</p>
<p>This preparation might not be suitable for all types of integration
tests.  Prepare those node sequences manually, for which this method
does not result in the desired outcome.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.IntegrationTest.prepare_input_model_sequences">
<code class="sig-name descname"><span class="pre">prepare_input_model_sequences</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#IntegrationTest.prepare_input_model_sequences"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.IntegrationTest.prepare_input_model_sequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the input sequences of the model in a manner that allows
for applying their time-series data in integration tests.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.IntegrationTest.extract_print_sequences">
<code class="sig-name descname"><span class="pre">extract_print_sequences</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#IntegrationTest.extract_print_sequences"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.IntegrationTest.extract_print_sequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all input, flux and state sequences of the model
as well as the simulation sequences of all nodes.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.IntegrationTest.prepare_model">
<code class="sig-name descname"><span class="pre">prepare_model</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update_parameters</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_conditions</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Date</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.9)"><span class="pre">datetime.datetime</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/core/testtools.html#IntegrationTest.prepare_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.IntegrationTest.prepare_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Derive the secondary parameter values, prepare all required time
series and set the initial conditions.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.IntegrationTest.reset_outputs">
<code class="sig-name descname"><span class="pre">reset_outputs</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#IntegrationTest.reset_outputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.IntegrationTest.reset_outputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the values of the simulation sequences of all outlet nodes to
zero.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.IntegrationTest.reset_inits">
<code class="sig-name descname"><span class="pre">reset_inits</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#IntegrationTest.reset_inits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.IntegrationTest.reset_inits" title="Permalink to this definition">¶</a></dt>
<dd><p>Set all initial conditions of all models.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.IntegrationTest.plot">
<code class="sig-name descname"><span class="pre">plot</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.IOSequence" title="hydpy.core.sequencetools.IOSequence"><span class="pre">hydpy.core.sequencetools.IOSequence</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.IOSequence" title="hydpy.core.sequencetools.IOSequence"><span class="pre">hydpy.core.sequencetools.IOSequence</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis2</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.IOSequence" title="hydpy.core.sequencetools.IOSequence"><span class="pre">hydpy.core.sequencetools.IOSequence</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.IOSequence" title="hydpy.core.sequencetools.IOSequence"><span class="pre">hydpy.core.sequencetools.IOSequence</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#IntegrationTest.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.IntegrationTest.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a plotly HTML file plotting the current test results.</p>
<dl class="simple">
<dt>(Optional) arguments:</dt><dd><ul class="simple">
<li><p>filename: Name of the file.  If necessary, the file ending
<cite>html</cite> is added automatically.  The file is stored in the
<cite>html_</cite> folder of subpackage <cite>docs</cite>.</p></li>
<li><p>act_sequences: List of the sequences to be shown initially
(deprecated).</p></li>
<li><p>axis1: sequences to be shown initially on the first axis.</p></li>
<li><p>axis2: sequences to be shown initially on the second axis.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hydpy.core.testtools.UnitTest">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">UnitTest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first_example</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_example</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parseqs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#UnitTest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.UnitTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#hydpy.core.testtools.Test" title="hydpy.core.testtools.Test"><code class="xref py py-class docutils literal notranslate"><span class="pre">hydpy.core.testtools.Test</span></code></a></p>
<p>Defines unit doctests for a single model method.</p>
<dl class="py attribute">
<dt id="hydpy.core.testtools.UnitTest.HEADER_OF_FIRST_COL">
<code class="sig-name descname"><span class="pre">HEADER_OF_FIRST_COL</span></code><em class="property"><span class="pre">:</span> <span class="pre">Any</span></em><em class="property"> <span class="pre">=</span> <span class="pre">'ex.'</span></em><a class="headerlink" href="#hydpy.core.testtools.UnitTest.HEADER_OF_FIRST_COL" title="Permalink to this definition">¶</a></dt>
<dd><p>The header of the first column containing sequential numbers.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.core.testtools.UnitTest.nexts">
<code class="sig-name descname"><span class="pre">nexts</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;hydpy.core.testtools.Array</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#hydpy.core.testtools.UnitTest.nexts" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores arrays for setting different values of parameters and/or
sequences before each new experiment.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.core.testtools.UnitTest.results">
<code class="sig-name descname"><span class="pre">results</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;hydpy.core.testtools.Array</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#hydpy.core.testtools.UnitTest.results" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores arrays with the resulting values of parameters and/or
sequences of each new experiment.</p>
</dd></dl>

<dl class="py attribute">
<dt id="hydpy.core.testtools.UnitTest.parseqs">
<code class="sig-name descname"><span class="pre">parseqs</span></code><em class="property"><span class="pre">:</span> <span class="pre">Any</span></em><a class="headerlink" href="#hydpy.core.testtools.UnitTest.parseqs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.UnitTest.nmb_examples">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">nmb_examples</span></code><a class="headerlink" href="#hydpy.core.testtools.UnitTest.nmb_examples" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of examples to be calculated.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.UnitTest.idx0">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">idx0</span></code><a class="headerlink" href="#hydpy.core.testtools.UnitTest.idx0" title="Permalink to this definition">¶</a></dt>
<dd><p>The first index of the examples selected for printing.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.UnitTest.idx1">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">idx1</span></code><a class="headerlink" href="#hydpy.core.testtools.UnitTest.idx1" title="Permalink to this definition">¶</a></dt>
<dd><p>The last index of the examples selected for printing.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.UnitTest.get_output_array">
<code class="sig-name descname"><span class="pre">get_output_array</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parseqs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#UnitTest.get_output_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.UnitTest.get_output_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array containing the output results of the given
parameter or sequence.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.UnitTest.raw_first_col_strings">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">raw_first_col_strings</span></code><a class="headerlink" href="#hydpy.core.testtools.UnitTest.raw_first_col_strings" title="Permalink to this definition">¶</a></dt>
<dd><p>The raw integer strings of the first column, except the header.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.UnitTest.memorise_inits">
<code class="sig-name descname"><span class="pre">memorise_inits</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#UnitTest.memorise_inits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.UnitTest.memorise_inits" title="Permalink to this definition">¶</a></dt>
<dd><p>Memorise all initial conditions.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.UnitTest.prepare_output_arrays">
<code class="sig-name descname"><span class="pre">prepare_output_arrays</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#UnitTest.prepare_output_arrays"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.UnitTest.prepare_output_arrays" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare arrays for storing the calculated results for the
respective parameters and/or sequences.</p>
</dd></dl>

<dl class="py method">
<dt id="hydpy.core.testtools.UnitTest.reset_inits">
<code class="sig-name descname"><span class="pre">reset_inits</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#UnitTest.reset_inits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.UnitTest.reset_inits" title="Permalink to this definition">¶</a></dt>
<dd><p>Set all initial conditions.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hydpy.core.testtools.Open">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">Open</span></code><a class="reference internal" href="_modules/hydpy/core/testtools.html#Open"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.Open" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Replace <a class="reference internal" href="#hydpy.core.testtools.Open" title="hydpy.core.testtools.Open"><code class="xref py py-class docutils literal notranslate"><span class="pre">Open</span></code></a> in doctests temporarily.</p>
<p>Class <a class="reference internal" href="#hydpy.core.testtools.Open" title="hydpy.core.testtools.Open"><code class="xref py py-class docutils literal notranslate"><span class="pre">Open</span></code></a> to intended to make writing to files visible and testable
in docstrings.  Therefore, Python’s built-in function <a class="reference internal" href="#hydpy.core.testtools.Open" title="hydpy.core.testtools.Open"><code class="xref py py-class docutils literal notranslate"><span class="pre">Open</span></code></a> is
temporarily replaced by another object, printing the filename and the
file content, as shown in the following example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;folder&quot;</span><span class="p">,</span> <span class="s2">&quot;test.py&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Open</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">Open</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">file_</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;first line</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">file_</span><span class="o">.</span><span class="n">writelines</span><span class="p">([</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;third line</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">])</span>
<span class="go">~~~~~~~~~~~~~~</span>
<span class="go">folder/test.py</span>
<span class="go">--------------</span>
<span class="go">first line</span>

<span class="go">third line</span>

<span class="go">~~~~~~~~~~~~~~</span>
</pre></div>
</div>
<p>Note that, for simplicity, the UNIX style path separator <cite>/</cite> is used
to print the file path on all systems.</p>
<p>Class <a class="reference internal" href="#hydpy.core.testtools.Open" title="hydpy.core.testtools.Open"><code class="xref py py-class docutils literal notranslate"><span class="pre">Open</span></code></a> is rather restricted at the moment.  Functionalities
like reading are not supported so far:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">Open</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">file_</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">NotImplementedError</span>: <span class="n">Reading is not possible at the moment.  Please see the documentation on class `Open` of module `testtools` for further information.</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">Open</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">file_</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">NotImplementedError</span>: <span class="n">Reading is not possible at the moment.  Please see the documentation on class `Open` of module `testtools` for further information.</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">Open</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">file_</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">NotImplementedError</span>: <span class="n">Reading is not possible at the moment.  Please see the documentation on class `Open` of module `testtools` for further information.</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="hydpy.core.testtools.TestIO">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">TestIO</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">clear_own</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#TestIO"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.TestIO" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Prepare an environment for testing IO functionalities.</p>
<p>Primarily, <a class="reference internal" href="#hydpy.core.testtools.TestIO" title="hydpy.core.testtools.TestIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestIO</span></code></a> changes the current working during the
execution of with| blocks.  Inspecting your current working
directory, <a class="reference external" href="https://docs.python.org/3/library/os.html#module-os" title="(in Python v3.9)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> will likely find no file called <cite>testfile.txt</cite>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;testfile.txt&quot;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>If some tests require writing such a file, this should be done
within HydPy’s <cite>iotesting</cite> folder in subpackage <cite>tests</cite>, which
is achieved by applying the <cite>with</cite> statement on <a class="reference internal" href="#hydpy.core.testtools.TestIO" title="hydpy.core.testtools.TestIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestIO</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">TestIO</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;testfile.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;testfile.txt&quot;</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<p>After the <cite>with</cite> block, the working directory is reset automatically:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;testfile.txt&quot;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Nevertheless, <cite>testfile.txt</cite> still exists in folder <cite>iotesting</cite>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;testfile.txt&quot;</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Optionally, files and folders created within the current <cite>with</cite> block
can be removed automatically by setting <cite>clear_own</cite> to <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>
(modified files and folders are not affected):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">(</span><span class="n">clear_own</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;testfile.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s2">&quot;testfolder&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;testfile.txt&quot;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;testfolder&quot;</span><span class="p">))</span>
<span class="go">True True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">(</span><span class="n">clear_own</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;testfile.txt&quot;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;testfolder&quot;</span><span class="p">))</span>
<span class="go">True False</span>
</pre></div>
</div>
<p>Alternatively, all files and folders contained in folder <cite>iotesting</cite>
can be removed after leaving the <cite>with</cite> block:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">(</span><span class="n">clear_all</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s2">&quot;testfolder&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;testfile.txt&quot;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;testfolder&quot;</span><span class="p">))</span>
<span class="go">True True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">(</span><span class="n">clear_own</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;testfile.txt&quot;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;testfolder&quot;</span><span class="p">))</span>
<span class="go">False False</span>
</pre></div>
</div>
<p>For just clearing the <cite>iofolder</cite>, one can call method <a class="reference internal" href="#hydpy.core.testtools.TestIO.clear" title="hydpy.core.testtools.TestIO.clear"><code class="xref py py-func docutils literal notranslate"><span class="pre">clear()</span></code></a>
alternatively:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;testfile.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;testfile.txt&quot;</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TestIO</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;testfile.txt&quot;</span><span class="p">))</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Note that class <a class="reference internal" href="#hydpy.core.testtools.TestIO" title="hydpy.core.testtools.TestIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestIO</span></code></a> copies all eventually generated <cite>.coverage</cite>
files into the <cite>test</cite> subpackage to assure no covered lines are
reported as uncovered.</p>
<dl class="py method">
<dt id="hydpy.core.testtools.TestIO.clear">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">clear</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#TestIO.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.TestIO.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all files from the <cite>iotesting</cite> folder.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="hydpy.core.testtools.make_abc_testable">
<code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">make_abc_testable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abstract</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Type</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Type</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#make_abc_testable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.make_abc_testable" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a concrete version of the given abstract base class for
testing purposes.</p>
<p>Abstract base classes cannot be (and, at least in production code,
should not be) instantiated:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.core.netcdftools</span> <span class="kn">import</span> <span class="n">NetCDFVariableBase</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ncvar</span> <span class="o">=</span> <span class="n">NetCDFVariableBase</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">Can&#39;t instantiate abstract class NetCDFVariableBase with abstract methods array, dimensions, read, subdevicenames, write</span>
</pre></div>
</div>
<p>However, it is convenient to do so for testing (partly) abstract
base classes in doctests.  The derived class returned by function
<a class="reference internal" href="#hydpy.core.testtools.make_abc_testable" title="hydpy.core.testtools.make_abc_testable"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_abc_testable()</span></code></a> is identical with the original one, except that
its protection against initialisation is disabled:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">make_abc_testable</span><span class="p">,</span> <span class="n">classname</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ncvar</span> <span class="o">=</span> <span class="n">make_abc_testable</span><span class="p">(</span><span class="n">NetCDFVariableBase</span><span class="p">)(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>To avoid confusion, <a class="reference internal" href="#hydpy.core.testtools.make_abc_testable" title="hydpy.core.testtools.make_abc_testable"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_abc_testable()</span></code></a> appends an underscore the
original class-name:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">classname</span><span class="p">(</span><span class="n">ncvar</span><span class="p">)</span>
<span class="go">&#39;NetCDFVariableBase_&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="hydpy.core.testtools.mock_datetime_now">
<code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">mock_datetime_now</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">testdatetime</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#mock_datetime_now"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.mock_datetime_now" title="Permalink to this definition">¶</a></dt>
<dd><p>Let class method <code class="xref py py-func docutils literal notranslate"><span class="pre">now()</span></code> of class <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a>
of module <a class="reference external" href="https://docs.python.org/3/library/datetime.html#module-datetime" title="(in Python v3.9)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">datetime</span></code></a> return the given date for testing purposes within
a “with-block”.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testdate</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">999</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testdate</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">classname</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">classname</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">)</span>
<span class="go">&#39;datetime&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.core.testtools</span> <span class="kn">import</span> <span class="n">mock_datetime_now</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">mock_datetime_now</span><span class="p">(</span><span class="n">testdate</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">testdate</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">classname</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">)</span>
<span class="go">True</span>
<span class="go">&#39;_DateTime&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testdate</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">classname</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">)</span>
<span class="go">&#39;datetime&#39;</span>
</pre></div>
</div>
<p>The following test shows that mocking <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> does not
interfere with initialising <a class="reference internal" href="timetools.html#hydpy.core.timetools.Date" title="hydpy.core.timetools.Date"><code class="xref py py-class docutils literal notranslate"><span class="pre">Date</span></code></a> objects and that the relevant
exceptions are properly handled:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">Date</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">mock_datetime_now</span><span class="p">(</span><span class="n">testdate</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">Date</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">999</span><span class="p">))</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">While trying to initialise a `Date` object based on argument `2000-10-01 12:30:00.000999`, the following error occurred: For `Date` instances, the microsecond must be zero, but for the given `datetime` object it is `999` instead.</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">classname</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">)</span>
<span class="go">&#39;datetime&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="hydpy.core.testtools.NumericalDifferentiator">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">NumericalDifferentiator</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xsequence</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.ModelSequence" title="hydpy.core.sequencetools.ModelSequence"><span class="pre">hydpy.core.sequencetools.ModelSequence</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ysequences</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.ModelSequence" title="hydpy.core.sequencetools.ModelSequence"><span class="pre">hydpy.core.sequencetools.ModelSequence</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">methods</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">modeltools.Method</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dx</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1e-06</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">typing_extensions.Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">forward</span><span class="p"><span class="pre">,</span> </span><span class="pre">central</span><span class="p"><span class="pre">,</span> </span><span class="pre">backward</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'forward'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/core/testtools.html#NumericalDifferentiator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.NumericalDifferentiator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Approximate the derivatives of <a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.ModelSequence" title="hydpy.core.sequencetools.ModelSequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelSequence</span></code></a> values based on
the finite difference approach.</p>
<p>Class <a class="reference internal" href="#hydpy.core.testtools.NumericalDifferentiator" title="hydpy.core.testtools.NumericalDifferentiator"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumericalDifferentiator</span></code></a> is thought for testing purposes only.
See, for example, the documentation on method <a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_model.Calc_RHMDH_V1" title="hydpy.models.lstream.lstream_model.Calc_RHMDH_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_RHMDH_V1</span></code></a>,
which uses a <a class="reference internal" href="#hydpy.core.testtools.NumericalDifferentiator" title="hydpy.core.testtools.NumericalDifferentiator"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumericalDifferentiator</span></code></a> object to validate that this method
calculates the derivative of sequence <a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_aides.RHM" title="hydpy.models.lstream.lstream_aides.RHM"><code class="xref py py-class docutils literal notranslate"><span class="pre">RHM</span></code></a> (<cite>ysequence</cite>)
with respect to sequence <a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_states.H" title="hydpy.models.lstream.lstream_states.H"><code class="xref py py-class docutils literal notranslate"><span class="pre">H</span></code></a> (<cite>xsequence</cite>) correctly.
Therefore, it must know the relationship between <a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_aides.RHM" title="hydpy.models.lstream.lstream_aides.RHM"><code class="xref py py-class docutils literal notranslate"><span class="pre">RHM</span></code></a> and
<a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_states.H" title="hydpy.models.lstream.lstream_states.H"><code class="xref py py-class docutils literal notranslate"><span class="pre">H</span></code></a>, being defined by method <a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_model.Calc_RHM_V1" title="hydpy.models.lstream.lstream_model.Calc_RHM_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_RHM_V1</span></code></a>.</p>
<p>See also the documentation on method <a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_model.Calc_AMDH_UMDH_V1" title="hydpy.models.lstream.lstream_model.Calc_AMDH_UMDH_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_AMDH_UMDH_V1</span></code></a>
which how to apply class <a class="reference internal" href="#hydpy.core.testtools.NumericalDifferentiator" title="hydpy.core.testtools.NumericalDifferentiator"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumericalDifferentiator</span></code></a> on multiple target
sequences (<cite>ysequences</cite>).  Note that, in order to calculate the correct
derivatives of sequences <a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_aides.AM" title="hydpy.models.lstream.lstream_aides.AM"><code class="xref py py-class docutils literal notranslate"><span class="pre">AM</span></code></a> and <a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_aides.UM" title="hydpy.models.lstream.lstream_aides.UM"><code class="xref py py-class docutils literal notranslate"><span class="pre">UM</span></code></a>, we
need not only to pass <a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_model.Calc_AM_UM_V1" title="hydpy.models.lstream.lstream_model.Calc_AM_UM_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_AM_UM_V1</span></code></a>, but also methods
<a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_model.Calc_RHM_V1" title="hydpy.models.lstream.lstream_model.Calc_RHM_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_RHM_V1</span></code></a> and <a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_model.Calc_RHV_V1" title="hydpy.models.lstream.lstream_model.Calc_RHV_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_RHV_V1</span></code></a>, as sequences
<a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_aides.RHM" title="hydpy.models.lstream.lstream_aides.RHM"><code class="xref py py-class docutils literal notranslate"><span class="pre">RHM</span></code></a> and <a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_aides.RHV" title="hydpy.models.lstream.lstream_aides.RHV"><code class="xref py py-class docutils literal notranslate"><span class="pre">RHV</span></code></a>, which are required for
calculating <a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_aides.AM" title="hydpy.models.lstream.lstream_aides.AM"><code class="xref py py-class docutils literal notranslate"><span class="pre">AM</span></code></a> and <a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_aides.UM" title="hydpy.models.lstream.lstream_aides.UM"><code class="xref py py-class docutils literal notranslate"><span class="pre">UM</span></code></a>, depend on
<a class="reference internal" href="lstream.html#hydpy.models.lstream.lstream_states.H" title="hydpy.models.lstream.lstream_states.H"><code class="xref py py-class docutils literal notranslate"><span class="pre">H</span></code></a> themselves.</p>
<p>Numerical approximations of derivatives are of limited precision.
<a class="reference internal" href="#hydpy.core.testtools.NumericalDifferentiator" title="hydpy.core.testtools.NumericalDifferentiator"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumericalDifferentiator</span></code></a> achieves the second order of accuracy, due to
using the coefficients given <a class="reference external" href="https://en.wikipedia.org/wiki/Finite_difference_coefficient">here</a>.  If results are too inaccurate,
you might improve them by changing the finite difference method
(<cite>backward</cite> or <cite>central</cite> instead of <cite>forward</cite>) or by changing the
default interval width <cite>dx</cite>.</p>
</dd></dl>

<dl class="py function">
<dt id="hydpy.core.testtools.update_integrationtests">
<code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">update_integrationtests</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applicationmodel</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">module</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resultfilepath</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/core/testtools.html#update_integrationtests"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.update_integrationtests" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the docstring of the given application model, updated with
the current simulation results, to file.</p>
<p>Sometimes, even tiny model-related changes bring a great deal of work
concerning <em>HydPy’s</em> integration test strategy.  For example, if you
modify the value of a fixed parameter, the results of possibly dozens
of integration tests of your application model might become wrong.
In such situations, function <a class="reference internal" href="#hydpy.core.testtools.update_integrationtests" title="hydpy.core.testtools.update_integrationtests"><code class="xref py py-func docutils literal notranslate"><span class="pre">update_integrationtests()</span></code></a> helps you in
replacing all integration tests results at ones.  Therefore, it
calculates the new results, updates the old module docstring and
writes it.  You only need to copy-paste the printed result into the
affected module.  But be aware that function <a class="reference internal" href="#hydpy.core.testtools.update_integrationtests" title="hydpy.core.testtools.update_integrationtests"><code class="xref py py-func docutils literal notranslate"><span class="pre">update_integrationtests()</span></code></a>
cannot guarantee the correctness of the new results.  Whenever in doubt
if the new results are really correct under all possible conditions,
you should inspect and replace each integration test result manually.</p>
<p>The following example, we disable method <a class="reference internal" href="conv.html#hydpy.models.conv.conv_model.Pass_Outputs_V1" title="hydpy.models.conv.conv_model.Pass_Outputs_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pass_Outputs_V1</span></code></a>
temporarily.  Accordingly, application model <a class="reference internal" href="conv_v001.html#module-hydpy.models.conv_v001" title="hydpy.models.conv_v001"><code class="xref py py-mod docutils literal notranslate"><span class="pre">conv_v001</span></code></a> does not pass
any output to its outlet nodes, which is why the last four columns of
both integration test tables now contain zero value only (we can perform
this mocking-based test in Python-mode only):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="kn">import</span> <span class="n">pub</span><span class="p">,</span> <span class="n">TestIO</span><span class="p">,</span> <span class="n">update_integrationtests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">unittest</span> <span class="kn">import</span> <span class="n">mock</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pass_output</span> <span class="o">=</span> <span class="s2">&quot;hydpy.models.conv.conv_model.Pass_Outputs_V1.__call__&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">TestIO</span><span class="p">(),</span> <span class="n">pub</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">usecython</span><span class="p">(</span><span class="kc">False</span><span class="p">),</span> <span class="n">mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="n">pass_output</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">update_integrationtests</span><span class="p">(</span><span class="s2">&quot;conv_v001&quot;</span><span class="p">,</span> <span class="s2">&quot;temp.txt&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;temp.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">resultfile</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="n">resultfile</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>   
<span class="go">Number of replacements: 2</span>

<span class="go">Nearest-neighbour interpolation.</span>
<span class="gp">... </span><span class="n">test</span><span class="p">()</span>
<span class="go">|       date |      inputs |                outputs | in1 | in2 | out1 | out2 | out3 | out4 |</span>
<span class="go">---------------------------------------------------------------------------------------------</span>
<span class="go">| 2000-01-01 | 1.0     4.0 | 1.0  4.0  1.0      1.0 | 1.0 | 4.0 |  0.0 |  0.0 |  0.0 |  0.0 |</span>
<span class="go">| 2000-01-02 | 2.0     nan | 2.0  nan  2.0      2.0 | 2.0 | nan |  0.0 |  0.0 |  0.0 |  0.0 |</span>
<span class="go">| 2000-01-03 | nan     nan | nan  nan  nan      nan | nan | nan |  0.0 |  0.0 |  0.0 |  0.0 |</span>

<span class="gp">... </span><span class="n">test</span><span class="p">()</span>
<span class="go">|       date |      inputs |                outputs | in1 | in2 | out1 | out2 | out3 | out4 |</span>
<span class="go">---------------------------------------------------------------------------------------------</span>
<span class="go">| 2000-01-01 | 1.0     4.0 | 1.0  4.0  1.0      1.0 | 1.0 | 4.0 |  0.0 |  0.0 |  0.0 |  0.0 |</span>
<span class="go">| 2000-01-02 | 2.0     nan | 2.0  2.0  2.0      2.0 | 2.0 | nan |  0.0 |  0.0 |  0.0 |  0.0 |</span>
<span class="go">| 2000-01-03 | nan     nan | nan  nan  nan      nan | nan | nan |  0.0 |  0.0 |  0.0 |  0.0 |</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="hydpy.core.testtools.check_methodorder">
<code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">check_methodorder</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">modeltools.Model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><a class="reference internal" href="_modules/hydpy/core/testtools.html#check_methodorder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.check_methodorder" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that <em>HydPy</em> calls the methods of the given application model
in the correct order for each simulation step.</p>
<p>The purpose of this function is to help model developers to ensure
that each method uses only the values of those sequences that have
been calculated by other methods beforehand.  <em>HydPy’s</em> test routines
apply <a class="reference internal" href="#hydpy.core.testtools.check_methodorder" title="hydpy.core.testtools.check_methodorder"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_methodorder()</span></code></a> automatically on each available application
model. Alternatively, you can also execute it at the end of the
docstring of an individual application model “manually”, which
suppresses the automatic execution and allows to check and discuss
exceptional cases were <a class="reference internal" href="#hydpy.core.testtools.check_methodorder" title="hydpy.core.testtools.check_methodorder"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_methodorder()</span></code></a> generates false alarms.</p>
<p>Function <a class="reference internal" href="#hydpy.core.testtools.check_methodorder" title="hydpy.core.testtools.check_methodorder"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_methodorder()</span></code></a> relies on the class constants
<cite>REQUIREDSEQUENCES</cite>, <cite>UPDATEDSEQUENCES</cite>, and <cite>RESULTSEQUENCES</cite> of
all relevant <a class="reference internal" href="modeltools.html#hydpy.core.modeltools.Method" title="hydpy.core.modeltools.Method"><code class="xref py py-class docutils literal notranslate"><span class="pre">Method</span></code></a> subclasses.  Hence, the correctness of its
results depends on the correctness of these tuples.  However, even
of those tuples are well-defined, one cannot expect <a class="reference internal" href="#hydpy.core.testtools.check_methodorder" title="hydpy.core.testtools.check_methodorder"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_methodorder()</span></code></a>
to catch all kinds of order-related errors.  For example, consider the
case where one method calculates only some values of a multi-dimensional
sequence and another method the  remaining ones.  <a class="reference internal" href="#hydpy.core.testtools.check_methodorder" title="hydpy.core.testtools.check_methodorder"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_methodorder()</span></code></a>
would not report anything when a third method, relying on the completeness
of the sequence’s values, were called after the first but before
the second method.</p>
<p>We use the quite complex model <a class="reference internal" href="lland_v3.html#module-hydpy.models.lland_v3" title="hydpy.models.lland_v3"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lland_v3</span></code></a> as an example.
<a class="reference internal" href="#hydpy.core.testtools.check_methodorder" title="hydpy.core.testtools.check_methodorder"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_methodorder()</span></code></a> does not report any problems:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.core.testtools</span> <span class="kn">import</span> <span class="n">check_methodorder</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models.lland_v3</span> <span class="kn">import</span> <span class="n">Model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">check_methodorder</span><span class="p">(</span><span class="n">Model</span><span class="p">))</span>
</pre></div>
</div>
<p>To show how <a class="reference internal" href="#hydpy.core.testtools.check_methodorder" title="hydpy.core.testtools.check_methodorder"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_methodorder()</span></code></a> reports errors, we modify the
<cite>RESULTSEQUENCES</cite> tuples of methods <a class="reference internal" href="lland.html#hydpy.models.lland.lland_model.Calc_TKor_V1" title="hydpy.models.lland.lland_model.Calc_TKor_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_TKor_V1</span></code></a>,
<a class="reference internal" href="lland.html#hydpy.models.lland.lland_model.Calc_DryAirPressure_V1" title="hydpy.models.lland.lland_model.Calc_DryAirPressure_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_DryAirPressure_V1</span></code></a>, and <a class="reference internal" href="lland.html#hydpy.models.lland.lland_model.Calc_QA_V1" title="hydpy.models.lland.lland_model.Calc_QA_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_QA_V1</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models.lland.lland_model</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">Calc_TKor_V1</span><span class="p">,</span> <span class="n">Calc_DryAirPressure_V1</span><span class="p">,</span> <span class="n">Calc_QA_V1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results_tkor</span> <span class="o">=</span> <span class="n">Calc_TKor_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results_dryairpressure</span> <span class="o">=</span> <span class="n">Calc_DryAirPressure_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results_qa</span> <span class="o">=</span> <span class="n">Calc_QA_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Calc_TKor_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span> <span class="o">=</span> <span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Calc_DryAirPressure_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span> <span class="o">=</span> <span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Calc_QA_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span> <span class="o">+=</span> <span class="n">results_tkor</span>
</pre></div>
</div>
<p>Now, none of the relevant models calculates the value of sequence
<a class="reference internal" href="lland.html#hydpy.models.lland.lland_fluxes.DryAirPressure" title="hydpy.models.lland.lland_fluxes.DryAirPressure"><code class="xref py py-class docutils literal notranslate"><span class="pre">DryAirPressure</span></code></a>.  For <a class="reference internal" href="lland.html#hydpy.models.lland.lland_fluxes.TKor" title="hydpy.models.lland.lland_fluxes.TKor"><code class="xref py py-class docutils literal notranslate"><span class="pre">TKor</span></code></a>, there is
still a method (<a class="reference internal" href="lland.html#hydpy.models.lland.lland_model.Calc_QA_V1" title="hydpy.models.lland.lland_model.Calc_QA_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_QA_V1</span></code></a>) calculating its values,
but at a too-late stage of the simulation step:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">check_methodorder</span><span class="p">(</span><span class="n">Model</span><span class="p">))</span>    
<span class="go">Method Calc_SaturationVapourPressure_V1 requires the following sequences, which are not among the result sequences of any of its predecessors: TKor</span>
<span class="gp">...</span>
<span class="go">Method Calc_DensityAir_V1 requires the following sequences, which are not among the result sequences of any of its predecessors: TKor and DryAirPressure</span>
<span class="gp">...</span>
<span class="go">Method Calc_EvB_V2 requires the following sequences, which are not among the result sequences of any of its predecessors: TKor</span>
</pre></div>
</div>
<p>To tidy up, we need to revert the above changes:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Calc_TKor_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span> <span class="o">=</span> <span class="n">results_tkor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Calc_DryAirPressure_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span> <span class="o">=</span> <span class="n">results_dryairpressure</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Calc_QA_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span> <span class="o">=</span> <span class="n">results_qa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">check_methodorder</span><span class="p">(</span><span class="n">Model</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="hydpy.core.testtools.check_selectedvariables">
<code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">check_selectedvariables</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">modeltools.Method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><a class="reference internal" href="_modules/hydpy/core/testtools.html#check_selectedvariables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.check_selectedvariables" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform consistency checks regarding the <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.Parameter" title="hydpy.core.parametertools.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> and <a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.Sequence_" title="hydpy.core.sequencetools.Sequence_"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence_</span></code></a>
subclasses selected by the given <a class="reference internal" href="modeltools.html#hydpy.core.modeltools.Method" title="hydpy.core.modeltools.Method"><code class="xref py py-class docutils literal notranslate"><span class="pre">Method</span></code></a> subclass.</p>
<p>The purpose of this function is to help model developers to ensure
that the class tuples <cite>CONTROLPARAMETERS</cite>, <cite>DERIVEDPARAMETERS</cite>,
<cite>FIXEDPARAMETERS</cite>, <cite>REQUIREDSEQUENCES</cite>, <cite>UPDATEDSEQUENCES</cite>, and
<cite>RESULTSEQUENCES</cite> contain the correct parameter and sequence
subclasses.  <em>HydPy’s</em> test routines apply <a class="reference internal" href="#hydpy.core.testtools.check_selectedvariables" title="hydpy.core.testtools.check_selectedvariables"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_selectedvariables()</span></code></a>
automatically on each method of each available application model.
Alternatively, you can also execute it at the end of the docstring
of an individual <a class="reference internal" href="modeltools.html#hydpy.core.modeltools.Method" title="hydpy.core.modeltools.Method"><code class="xref py py-class docutils literal notranslate"><span class="pre">Method</span></code></a> subclass “manually”, which suppresses
the automatic execution and allows to check and discuss exceptional
cases were <a class="reference internal" href="#hydpy.core.testtools.check_selectedvariables" title="hydpy.core.testtools.check_selectedvariables"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_selectedvariables()</span></code></a> generates false alarms.</p>
<p>Do not expect <a class="reference internal" href="#hydpy.core.testtools.check_selectedvariables" title="hydpy.core.testtools.check_selectedvariables"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_selectedvariables()</span></code></a> to catch all possible
errors.  Also, false positives might occur.  However, in our experience
functions <a class="reference internal" href="#hydpy.core.testtools.check_selectedvariables" title="hydpy.core.testtools.check_selectedvariables"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_selectedvariables()</span></code></a> is of great help to prevent most
common mistakes when defining the parameter and sequence classes
relevant for a specific method.</p>
<p>As an example, we select method <a class="reference internal" href="lland.html#hydpy.models.lland.lland_model.Calc_WindSpeed2m_V1" title="hydpy.models.lland.lland_model.Calc_WindSpeed2m_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_WindSpeed2m_V1</span></code></a> of base
model <a class="reference internal" href="lland.html#module-hydpy.models.lland" title="hydpy.models.lland"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lland</span></code></a>.  <a class="reference internal" href="#hydpy.core.testtools.check_selectedvariables" title="hydpy.core.testtools.check_selectedvariables"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_selectedvariables()</span></code></a> does not reportany problems:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.core.testtools</span> <span class="kn">import</span> <span class="n">check_selectedvariables</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models.lland.lland_model</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">Calc_WindSpeed2m_V1</span><span class="p">,</span> <span class="n">Return_AdjustedWindSpeed_V1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">check_selectedvariables</span><span class="p">(</span><span class="n">Calc_WindSpeed2m_V1</span><span class="p">))</span>
</pre></div>
</div>
<p>To show how <a class="reference internal" href="#hydpy.core.testtools.check_selectedvariables" title="hydpy.core.testtools.check_selectedvariables"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_selectedvariables()</span></code></a> reports errors, we clear the
<cite>RESULTSEQUENCES</cite> tuple of method <a class="reference internal" href="lland.html#hydpy.models.lland.lland_model.Calc_WindSpeed2m_V1" title="hydpy.models.lland.lland_model.Calc_WindSpeed2m_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_WindSpeed2m_V1</span></code></a>.
Now <a class="reference internal" href="#hydpy.core.testtools.check_selectedvariables" title="hydpy.core.testtools.check_selectedvariables"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_selectedvariables()</span></code></a> realises the usage of the flux sequence
object <cite>windspeed2m</cite> within the source code of method
<a class="reference internal" href="lland.html#hydpy.models.lland.lland_model.Calc_WindSpeed2m_V1" title="hydpy.models.lland.lland_model.Calc_WindSpeed2m_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_WindSpeed2m_V1</span></code></a>, which is neither available within
the <cite>REQUIREDSEQUENCES</cite>, the <cite>UPDATEDSEQUENCES</cite>, nor the`RESULTSEQUENCES`
tuple:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">resultseqs</span> <span class="o">=</span> <span class="n">Calc_WindSpeed2m_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Calc_WindSpeed2m_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span> <span class="o">=</span> <span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">check_selectedvariables</span><span class="p">(</span><span class="n">Calc_WindSpeed2m_V1</span><span class="p">))</span>
<span class="go">Definitely missing: windspeed2m</span>
</pre></div>
</div>
<p>After putting the wrong flux sequence class <a class="reference internal" href="lland.html#hydpy.models.lland.lland_fluxes.WindSpeed10m" title="hydpy.models.lland.lland_fluxes.WindSpeed10m"><code class="xref py py-class docutils literal notranslate"><span class="pre">WindSpeed10m</span></code></a>
into the tuple, we get an additional warning pointing to our mistake:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models.lland.lland_fluxes</span> <span class="kn">import</span> <span class="n">WindSpeed10m</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Calc_WindSpeed2m_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span> <span class="o">=</span> <span class="n">WindSpeed10m</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">check_selectedvariables</span><span class="p">(</span><span class="n">Calc_WindSpeed2m_V1</span><span class="p">))</span>
<span class="go">Definitely missing: windspeed2m</span>
<span class="go">Possibly erroneously selected (RESULTSEQUENCES): WindSpeed10m</span>
</pre></div>
</div>
<p>Method <a class="reference internal" href="lland.html#hydpy.models.lland.lland_model.Calc_WindSpeed2m_V1" title="hydpy.models.lland.lland_model.Calc_WindSpeed2m_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_WindSpeed2m_V1</span></code></a> uses
<a class="reference internal" href="lland.html#hydpy.models.lland.lland_model.Return_AdjustedWindSpeed_V1" title="hydpy.models.lland.lland_model.Return_AdjustedWindSpeed_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Return_AdjustedWindSpeed_V1</span></code></a> as a submethod.  Hence,
<a class="reference internal" href="lland.html#hydpy.models.lland.lland_model.Calc_WindSpeed2m_V1" title="hydpy.models.lland.lland_model.Calc_WindSpeed2m_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_WindSpeed2m_V1</span></code></a> most likely needs to select
each variable selected by <a class="reference internal" href="lland.html#hydpy.models.lland.lland_model.Return_AdjustedWindSpeed_V1" title="hydpy.models.lland.lland_model.Return_AdjustedWindSpeed_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Return_AdjustedWindSpeed_V1</span></code></a>.
After adding additional variables to the <cite>DERIVEDPARAMETERS</cite> tuple of
<a class="reference internal" href="lland.html#hydpy.models.lland.lland_model.Return_AdjustedWindSpeed_V1" title="hydpy.models.lland.lland_model.Return_AdjustedWindSpeed_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Return_AdjustedWindSpeed_V1</span></code></a>, we get another warning message:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models.lland.lland_derived</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">Days</span><span class="p">,</span> <span class="n">Hours</span><span class="p">,</span> <span class="n">Seconds</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">derivedpars</span> <span class="o">=</span> <span class="n">Return_AdjustedWindSpeed_V1</span><span class="o">.</span><span class="n">DERIVEDPARAMETERS</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Return_AdjustedWindSpeed_V1</span><span class="o">.</span><span class="n">DERIVEDPARAMETERS</span> <span class="o">=</span> <span class="n">Days</span><span class="p">,</span> <span class="n">Hours</span><span class="p">,</span> <span class="n">Seconds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">check_selectedvariables</span><span class="p">(</span><span class="n">Calc_WindSpeed2m_V1</span><span class="p">))</span>
<span class="go">Definitely missing: windspeed2m</span>
<span class="go">Possibly missing (DERIVEDPARAMETERS):</span>
<span class="go">    Return_AdjustedWindSpeed_V1: Seconds, Hours, and Days</span>
<span class="go">Possibly erroneously selected (RESULTSEQUENCES): WindSpeed10m</span>
</pre></div>
</div>
<p>Finally, <a class="reference internal" href="#hydpy.core.testtools.check_selectedvariables" title="hydpy.core.testtools.check_selectedvariables"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_selectedvariables()</span></code></a> checks for duplicates both within
and between the different tuples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models.lland.lland_inputs</span> <span class="kn">import</span> <span class="n">WindSpeed</span><span class="p">,</span> <span class="n">TemL</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">requiredseqs</span> <span class="o">=</span> <span class="n">Calc_WindSpeed2m_V1</span><span class="o">.</span><span class="n">REQUIREDSEQUENCES</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Calc_WindSpeed2m_V1</span><span class="o">.</span><span class="n">REQUIREDSEQUENCES</span> <span class="o">=</span> <span class="n">WindSpeed</span><span class="p">,</span> <span class="n">WindSpeed</span><span class="p">,</span> <span class="n">TemL</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Calc_WindSpeed2m_V1</span><span class="o">.</span><span class="n">UPDATEDSEQUENCES</span> <span class="o">=</span> <span class="n">TemL</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">check_selectedvariables</span><span class="p">(</span><span class="n">Calc_WindSpeed2m_V1</span><span class="p">))</span>
<span class="go">Definitely missing: windspeed2m</span>
<span class="go">Possibly missing (DERIVEDPARAMETERS):</span>
<span class="go">    Return_AdjustedWindSpeed_V1: Seconds, Hours, and Days</span>
<span class="go">Possibly erroneously selected (REQUIREDSEQUENCES): TemL</span>
<span class="go">Possibly erroneously selected (UPDATEDSEQUENCES): TemL</span>
<span class="go">Possibly erroneously selected (RESULTSEQUENCES): WindSpeed10m</span>
<span class="go">Duplicates: TemL and WindSpeed</span>
</pre></div>
</div>
<p>To tidy up, we need to revert the above changes:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Calc_WindSpeed2m_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span> <span class="o">=</span> <span class="n">resultseqs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Return_AdjustedWindSpeed_V1</span><span class="o">.</span><span class="n">DERIVEDPARAMETERS</span> <span class="o">=</span> <span class="n">derivedpars</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Calc_WindSpeed2m_V1</span><span class="o">.</span><span class="n">REQUIREDSEQUENCES</span> <span class="o">=</span> <span class="n">requiredseqs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Calc_WindSpeed2m_V1</span><span class="o">.</span><span class="n">UPDATEDSEQUENCES</span> <span class="o">=</span> <span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">check_selectedvariables</span><span class="p">(</span><span class="n">Calc_WindSpeed2m_V1</span><span class="p">))</span>
</pre></div>
</div>
<p>Some methods as <a class="reference internal" href="arma.html#hydpy.models.arma.arma_model.Pick_Q_V1" title="hydpy.models.arma.arma_model.Pick_Q_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pick_Q_V1</span></code></a> of base model <a class="reference internal" href="arma.html#module-hydpy.models.arma" title="hydpy.models.arma"><code class="xref py py-mod docutils literal notranslate"><span class="pre">arma</span></code></a> rely on
the <cite>len</cite> attribute of 1-dimensional sequences.  Function
<a class="reference internal" href="#hydpy.core.testtools.check_selectedvariables" title="hydpy.core.testtools.check_selectedvariables"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_selectedvariables()</span></code></a> does not report false alarms in such cases:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models.arma.arma_model</span> <span class="kn">import</span> <span class="n">Pick_Q_V1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">check_selectedvariables</span><span class="p">(</span><span class="n">Pick_Q_V1</span><span class="p">))</span>
</pre></div>
</div>
<p>Some methods as <a class="reference internal" href="lland.html#hydpy.models.lland.lland_model.Update_ESnow_V1" title="hydpy.models.lland.lland_model.Update_ESnow_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update_ESnow_V1</span></code></a> of base model <a class="reference internal" href="lland.html#module-hydpy.models.lland" title="hydpy.models.lland"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lland</span></code></a> update a
sequence (meaning, they require its old value and calculate a new one), but
their submethods (in this case <a class="reference internal" href="lland.html#hydpy.models.lland.lland_model.Return_BackwardEulerError_V1" title="hydpy.models.lland.lland_model.Return_BackwardEulerError_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Return_BackwardEulerError_V1</span></code></a>)
just require them as input.  Function <a class="reference internal" href="#hydpy.core.testtools.check_selectedvariables" title="hydpy.core.testtools.check_selectedvariables"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_selectedvariables()</span></code></a> does not
report false alarms in such cases:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models.lland.lland_model</span> <span class="kn">import</span> <span class="n">Update_ESnow_V1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">check_selectedvariables</span><span class="p">(</span><span class="n">Update_ESnow_V1</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="hydpy.core.testtools.perform_consistencychecks">
<code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">perform_consistencychecks</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applicationmodel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">typing.Union[module,</span> <span class="pre">str]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><a class="reference internal" href="_modules/hydpy/core/testtools.html#perform_consistencychecks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.perform_consistencychecks" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform all available consistency checks for the given application model.</p>
<p>At the moment, function <a class="reference internal" href="#hydpy.core.testtools.perform_consistencychecks" title="hydpy.core.testtools.perform_consistencychecks"><code class="xref py py-func docutils literal notranslate"><span class="pre">perform_consistencychecks()</span></code></a> calls function
<a class="reference internal" href="#hydpy.core.testtools.check_selectedvariables" title="hydpy.core.testtools.check_selectedvariables"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_selectedvariables()</span></code></a> for each relevant model methods and function
<a class="reference internal" href="#hydpy.core.testtools.check_methodorder" title="hydpy.core.testtools.check_methodorder"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_methodorder()</span></code></a> for the application model itself.  Note that
<a class="reference internal" href="#hydpy.core.testtools.perform_consistencychecks" title="hydpy.core.testtools.perform_consistencychecks"><code class="xref py py-func docutils literal notranslate"><span class="pre">perform_consistencychecks()</span></code></a> executes only those checks not already
executed in the doctest of the respective method or model.  This
alternative allows model developers to perform the tests themselves
whenever exceptional cases result in misleading error reports and
discuss any related potential pitfalls in the official documentation.</p>
<p>As an example, we apply <a class="reference internal" href="#hydpy.core.testtools.perform_consistencychecks" title="hydpy.core.testtools.perform_consistencychecks"><code class="xref py py-func docutils literal notranslate"><span class="pre">perform_consistencychecks()</span></code></a> on the application
model <a class="reference internal" href="lland_v3.html#module-hydpy.models.lland_v3" title="hydpy.models.lland_v3"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lland_v3</span></code></a>.  It does not report any potential problems (not
already discussed in the documentation on the individual model methods):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.core.testtools</span> <span class="kn">import</span> <span class="n">perform_consistencychecks</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">perform_consistencychecks</span><span class="p">(</span><span class="s2">&quot;lland_v3&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>To show how <a class="reference internal" href="#hydpy.core.testtools.perform_consistencychecks" title="hydpy.core.testtools.perform_consistencychecks"><code class="xref py py-func docutils literal notranslate"><span class="pre">perform_consistencychecks()</span></code></a> reports errors, we modify the
<cite>RESULTSEQUENCES</cite> tuple of method <a class="reference internal" href="lland.html#hydpy.models.lland.lland_model.Calc_DryAirPressure_V1" title="hydpy.models.lland.lland_model.Calc_DryAirPressure_V1"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calc_DryAirPressure_V1</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models.lland.lland_model</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">Calc_DryAirPressure_V1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results_dryairpressure</span> <span class="o">=</span> <span class="n">Calc_DryAirPressure_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Calc_DryAirPressure_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span> <span class="o">=</span> <span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">perform_consistencychecks</span><span class="p">(</span><span class="s2">&quot;lland_v3&quot;</span><span class="p">))</span>
<span class="go">Potential consistency problems for individual methods:</span>
<span class="go">   Method Calc_DryAirPressure_V1:</span>
<span class="go">        Definitely missing: dryairpressure</span>
<span class="go">Potential consistency problems between methods:</span>
<span class="go">    Method Calc_DensityAir_V1 requires the following sequences, which are not among the result sequences of any of its predecessors: DryAirPressure</span>
</pre></div>
</div>
<p>To tidy up, we need to revert the above changes:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Calc_DryAirPressure_V1</span><span class="o">.</span><span class="n">RESULTSEQUENCES</span> <span class="o">=</span> <span class="n">results_dryairpressure</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">perform_consistencychecks</span><span class="p">(</span><span class="s2">&quot;lland_v3&quot;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="hydpy.core.testtools.save_autofig">
<code class="sig-prename descclassname"><span class="pre">hydpy.core.testtools.</span></code><code class="sig-name descname"><span class="pre">save_autofig</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">figure</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v3.3.4)"><span class="pre">matplotlib.figure.Figure</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/hydpy/core/testtools.html#save_autofig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hydpy.core.testtools.save_autofig" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a figure automatically generated during testing in the special <cite>autofig</cite>
sub-package so that Sphinx can include it into the documentation later.</p>
<p>When passing no figure, function <a class="reference internal" href="#hydpy.core.testtools.save_autofig" title="hydpy.core.testtools.save_autofig"><code class="xref py py-func docutils literal notranslate"><span class="pre">save_autofig()</span></code></a> takes the currently active one.</p>
</dd></dl>

</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/HydPy_Logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="how_to.html">How to…</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="framework.html">Framework Tools</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="core.html">Core Tools</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="aliastools.html">aliastools</a></li>
<li class="toctree-l3"><a class="reference internal" href="autodoctools.html">autodoctools</a></li>
<li class="toctree-l3"><a class="reference internal" href="auxfiletools.html">auxfiletools</a></li>
<li class="toctree-l3"><a class="reference internal" href="devicetools.html">devicetools</a></li>
<li class="toctree-l3"><a class="reference internal" href="exceptiontools.html">exceptiontools</a></li>
<li class="toctree-l3"><a class="reference internal" href="filetools.html">filetools</a></li>
<li class="toctree-l3"><a class="reference internal" href="hydpytools.html">hydpytools</a></li>
<li class="toctree-l3"><a class="reference internal" href="importtools.html">importtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="indextools.html">indextools</a></li>
<li class="toctree-l3"><a class="reference internal" href="itemtools.html">itemtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="masktools.html">masktools</a></li>
<li class="toctree-l3"><a class="reference internal" href="modeltools.html">modeltools</a></li>
<li class="toctree-l3"><a class="reference internal" href="netcdftools.html">netcdftools</a></li>
<li class="toctree-l3"><a class="reference internal" href="objecttools.html">objecttools</a></li>
<li class="toctree-l3"><a class="reference internal" href="optiontools.html">optiontools</a></li>
<li class="toctree-l3"><a class="reference internal" href="parametertools.html">parametertools</a></li>
<li class="toctree-l3"><a class="reference internal" href="printtools.html">printtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="propertytools.html">propertytools</a></li>
<li class="toctree-l3"><a class="reference internal" href="pubtools.html">pubtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="selectiontools.html">selectiontools</a></li>
<li class="toctree-l3"><a class="reference internal" href="sequencetools.html">sequencetools</a></li>
<li class="toctree-l3"><a class="reference internal" href="seriestools.html">seriestools</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">testtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="timetools.html">timetools</a></li>
<li class="toctree-l3"><a class="reference internal" href="typingtools.html">typingtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="variabletools.html">variabletools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="execution.html">Execution Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="cythons.html">Cython Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxiliaries.html">Auxiliary Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Configuration Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modelcollection.html">Model Collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Example Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="zbibliography.html">Bibliography</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="seriestools.html"
                        title="previous chapter">seriestools</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="timetools.html"
                        title="next chapter">timetools</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/testtools.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="timetools.html" title="timetools"
             >next</a> |</li>
        <li class="right" >
          <a href="seriestools.html" title="seriestools"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HydPy 4.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="framework.html" >Framework Tools</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="core.html" >Core Tools</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">testtools</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, HydPy Developers.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.2.
    </div>
  </body>
</html>